var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(o)}function l(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const u="undefined"!=typeof window;let a=u?()=>window.performance.now():()=>Date.now(),d=u?e=>requestAnimationFrame(e):e;const f=new Set;function p(e){f.forEach(t=>{t.c(e)||(f.delete(t),t.f())}),0!==f.size&&d(p)}function m(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function $(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function b(e){return document.createTextNode(e)}function w(){return b(" ")}function k(){return b("")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e){return""===e?null:+e}function E(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function A(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function I(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function R(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function T(e,t,n){e.classList[n?"add":"remove"](t)}let N;function G(e){N=e}function O(){if(!N)throw new Error("Function called outside component initialization");return N}function j(){const e=O();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,s)})}}}const L=[],U=[],M=[],P=[],W=Promise.resolve();let D=!1;function q(e){M.push(e)}let B=!1;const z=new Set;function V(){if(!B){B=!0;do{for(let e=0;e<L.length;e+=1){const t=L[e];G(t),K(t.$$)}for(G(null),L.length=0;U.length;)U.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];z.has(t)||(z.add(t),t())}M.length=0}while(L.length);for(;P.length;)P.pop()();D=!1,B=!1,z.clear()}}function K(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const H=new Set;let F;function J(){F={r:0,c:[],p:F}}function Y(){F.r||r(F.c),F=F.p}function Q(e,t){e&&e.i&&(H.delete(e),e.i(t))}function X(e,t,n,o){if(e&&e.o){if(H.has(e))return;H.add(e),F.c.push(()=>{H.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function Z(e){e&&e.c()}function ee(e,t,n){const{fragment:s,on_mount:i,on_destroy:c,after_update:u}=e.$$;s&&s.m(t,n),q(()=>{const t=i.map(o).filter(l);c?c.push(...t):r(t),e.$$.on_mount=[]}),u.forEach(q)}function te(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t){-1===e.$$.dirty[0]&&(L.push(e),D||(D=!0,W.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,n,o,l,i,c,u=[-1]){const a=N;G(t);const d=n.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:s(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,d,(e,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),p&&ne(t,e)),n}):[],f.update(),p=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(h)}else f.fragment&&f.fragment.c();n.intro&&Q(t.$$.fragment),ee(t,n.target,n.anchor),V()}G(a)}class se{$destroy(){te(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const re=[];function le(t,n=e){let o;const s=[];function r(e){if(i(t,e)&&(t=e,o)){const e=!re.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),re.push(n,t)}if(e){for(let e=0;e<re.length;e+=2)re[e][0](re[e+1]);re.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,i=e){const c=[l,i];return s.push(c),1===s.length&&(o=n(r)||e),l(t),()=>{const e=s.indexOf(c);-1!==e&&s.splice(e,1),0===s.length&&(o(),o=null)}}}}const ie=le(new Map),ce=le("");function ue(t){let n,o,s,r,l,i;return{c(){n=_("div"),o=_("img"),r=w(),l=_("p"),i=b(t[0]),x(o,"class","is-96x96"),x(o,"alt","user pic"),o.src!==(s=t[1])&&x(o,"src",s),x(l,"class","has-text-centered"),x(n,"class","svelte-ul5ug2")},m(e,t){g(e,n,t),m(n,o),m(n,r),m(n,l),m(l,i)},p(e,[t]){1&t&&E(i,e[0])},i:e,o:e,d(e){e&&h(n)}}}function ae(e,t,n){let o;var s;c(e,ie,e=>n(3,o=e));let{username:r}=t,l=null===(s=o.get(r))||void 0===s?void 0:s.img_src;return e.$$set=e=>{"username"in e&&n(0,r=e.username)},[r,l]}class de extends se{constructor(e){super(),oe(this,e,ae,ue,i,{username:0})}}function fe(t){let n,o,s,l,i,c,u,a,d,f,p,v,$,b,k,S,E,A,I,R;return{c(){n=_("div"),o=_("div"),s=_("label"),s.textContent="Username",l=w(),i=_("div"),c=_("input"),u=w(),a=_("div"),d=_("label"),d.textContent="Image url",f=w(),p=_("div"),v=_("input"),$=w(),b=_("div"),k=_("label"),k.textContent="Â ",S=w(),E=_("div"),A=_("button"),A.textContent="Login",x(s,"for","username-input"),x(s,"class","label"),x(c,"id","username-input"),x(c,"class","input"),x(c,"type","text"),x(c,"placeholder","username"),c.required=!0,x(i,"class","control"),x(o,"class","field column"),x(d,"for","image-url-input"),x(d,"class","label"),x(v,"id","image-url-input"),x(v,"class","input"),x(v,"type","url"),v.required=!0,x(p,"class","control"),x(a,"class","field column"),x(k,"for","login-button"),x(k,"class","label"),x(A,"id","login-button"),x(A,"class","button is-link"),x(E,"class","control"),x(b,"class","field column is-narrow"),x(n,"class","columns")},m(e,r){g(e,n,r),m(n,o),m(o,s),m(o,l),m(o,i),m(i,c),C(c,t[0]),m(n,u),m(n,a),m(a,d),m(a,f),m(a,p),m(p,v),C(v,t[1]),m(n,$),m(n,b),m(b,k),m(b,S),m(b,E),m(E,A),I||(R=[y(c,"input",t[3]),y(v,"input",t[4]),y(A,"click",t[2])],I=!0)},p(e,[t]){1&t&&c.value!==e[0]&&C(c,e[0]),2&t&&C(v,e[1])},i:e,o:e,d(e){e&&h(n),I=!1,r(R)}}}function pe(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((o=o.apply(e,t||[])).next())}))};const s=j();let r="";let l=["https://a.thumbs.redditmedia.com/kIpBoUR8zJLMQlF8azhN-kSBsjVUidHjvZNLuHDONm8.png","https://abs.twimg.com/sticky/default_profile_images/default_profile_400x400.png","https://styles.redditmedia.com/t5_2qhr7/styles/communityIcon_zqe9mgigjpi01.png","https://avatars1.githubusercontent.com/u/6978200","https://avatars2.githubusercontent.com/u/1506147"][Math.floor(5*Math.random())];function i(e){n(0,r=e.username||e.first_name+" "+e.last_name),n(1,l=e.photo_url||l),console.log("Logged in as "+e.first_name+" "+e.last_name+" ("+e.id+(e.username?", @"+e.username:"")+")"),console.log("Image src: "+l),s("login",{username:r,img_src:l})}var c;return c=()=>o(void 0,void 0,void 0,(function*(){window.onTelegramAuth=i})),O().$$.on_mount.push(c),[r,l,function(){console.log("dispatching"),s("login",{username:r,img_src:l})},function(){r=this.value,n(0,r)},function(){l=this.value,n(1,l)}]}class me extends se{constructor(e){super(),oe(this,e,pe,fe,i,{})}}class ge{constructor(){this.onMessage=e=>{},this.websocket=null}setUp(e,t){this.websocket=new WebSocket(`wss://${document.location.host}:8000/ws/${e}?img=${encodeURIComponent(t)}`),this.websocket.onmessage=e=>{console.log(e),console.log("got data:",e.data),this.onMessage(JSON.parse(e.data))}}sendObject(e){null!==this.websocket?this.websocket.send(JSON.stringify(e)):console.error("Can't send without websocket")}}function he(e,t,n){const o=e.slice();return o[11]=t[n].stroke,o[12]=t[n].width,o[13]=t[n].points,o}function ve(e){let t,n;return{c(){t=$("polyline"),A(t,"fill","none"),A(t,"stroke",e[11]),A(t,"stroke-width",e[12]),x(t,"points",n=e[13]),x(t,"stroke-linecap","round"),x(t,"stroke-linejoin","round"),x(t,"class","svelte-1kiv9qh")},m(e,n){g(e,t,n)},p(e,o){1&o&&A(t,"stroke",e[11]),1&o&&A(t,"stroke-width",e[12]),1&o&&n!==(n=e[13])&&x(t,"points",n)},d(e){e&&h(t)}}}function _e(e){let t,n,o,s,l,i,c,u,a,d,f,p,v,$,k,E,A,R,T,N,G,O,j,L;return{c(){t=_("div"),n=_("label"),o=b("Width:\n      "),s=_("input"),l=w(),i=_("input"),c=b("\n      Color:\n      "),u=_("select"),a=_("option"),a.textContent="red",d=_("option"),d.textContent="orange",f=_("option"),f.textContent="yellow",p=_("option"),p.textContent="green",v=_("option"),v.textContent="cyan",$=_("option"),$.textContent="blue",k=_("option"),k.textContent="purple",E=_("option"),E.textContent="pink",A=_("option"),A.textContent="white",R=_("option"),R.textContent="black",T=_("option"),T.textContent="gray",N=_("option"),N.textContent="brown",G=w(),O=_("button"),O.textContent="undo",x(s,"type","number"),x(s,"min","1"),x(s,"max","30"),x(i,"type","range"),x(i,"min","1"),x(i,"max","30"),a.__value="red",a.value=a.__value,d.__value="orange",d.value=d.__value,f.__value="yellow",f.value=f.__value,p.__value="green",p.value=p.__value,v.__value="cyan",v.value=v.__value,$.__value="blue",$.value=$.__value,k.__value="purple",k.value=k.__value,E.__value="pink",E.value=E.__value,A.__value="white",A.value=A.__value,R.__value="black",R.value=R.__value,T.__value="gray",T.value=T.__value,N.__value="brown",N.value=N.__value,void 0===e[2].stroke&&q(()=>e[8].call(u)),x(t,"class","controls svelte-1kiv9qh")},m(r,h){g(r,t,h),m(t,n),m(n,o),m(n,s),C(s,e[2].width),m(n,l),m(n,i),C(i,e[2].width),m(n,c),m(n,u),m(u,a),m(u,d),m(u,f),m(u,p),m(u,v),m(u,$),m(u,k),m(u,E),m(u,A),m(u,R),m(u,T),m(u,N),I(u,e[2].stroke),m(n,G),m(n,O),j||(L=[y(s,"input",e[6]),y(i,"change",e[7]),y(i,"input",e[7]),y(u,"change",e[8]),y(O,"click",e[9])],j=!0)},p(e,t){4&t&&S(s.value)!==e[2].width&&C(s,e[2].width),4&t&&C(i,e[2].width),4&t&&I(u,e[2].stroke)},d(e){e&&h(t),j=!1,r(L)}}}function $e(t){let n,o,s,l,i,c,u,a=t[0],d=[];for(let e=0;e<a.length;e+=1)d[e]=ve(he(t,a,e));let f=t[1]&&_e(t);return{c(){n=$("svg");for(let e=0;e<d.length;e+=1)d[e].c();o=$("polyline"),l=w(),f&&f.c(),i=k(),A(o,"fill","none"),A(o,"stroke",t[2].stroke),A(o,"stroke-width",t[2].width),x(o,"points",s=t[2].points),x(o,"stroke-linecap","round"),x(o,"stroke-linejoin","round"),x(o,"class","svelte-1kiv9qh"),x(n,"width","800"),x(n,"height","600"),x(n,"class","svelte-1kiv9qh")},m(e,s){g(e,n,s);for(let e=0;e<d.length;e+=1)d[e].m(n,null);m(n,o),g(e,l,s),f&&f.m(e,s),g(e,i,s),c||(u=[y(n,"mousemove",t[5]),y(n,"mouseup",t[3]),y(n,"mousedown",t[4]),y(n,"mouseleave",t[3])],c=!0)},p(e,[t]){if(1&t){let s;for(a=e[0],s=0;s<a.length;s+=1){const r=he(e,a,s);d[s]?d[s].p(r,t):(d[s]=ve(r),d[s].c(),d[s].m(n,o))}for(;s<d.length;s+=1)d[s].d(1);d.length=a.length}4&t&&A(o,"stroke",e[2].stroke),4&t&&A(o,"stroke-width",e[2].width),4&t&&s!==(s=e[2].points)&&x(o,"points",s),e[1]?f?f.p(e,t):(f=_e(e),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},i:e,o:e,d(e){e&&h(n),v(d,e),e&&h(l),f&&f.d(e),e&&h(i),c=!1,r(u)}}}function be(e,t,n){let{lines:o=[]}=t,{editable:s=!0}=t,r={stroke:"red",width:2,points:""},l=!1;return e.$$set=e=>{"lines"in e&&n(0,o=e.lines),"editable"in e&&n(1,s=e.editable)},[o,s,r,function(){l&&(l=!1,r.points.split(" ").length<2||(o.push({stroke:r.stroke,width:r.width,points:r.points}),n(0,o),n(2,r.points="",r)))},function(){s&&(l=!0)},function(e){l&&n(2,r.points+=" "+e.offsetX+","+e.offsetY,r)},function(){r.width=S(this.value),n(2,r)},function(){r.width=S(this.value),n(2,r)},function(){r.stroke=R(this),n(2,r)},()=>{o.length>0&&n(0,o=o.slice(0,o.length-1))}]}class we extends se{constructor(e){super(),oe(this,e,be,$e,i,{lines:0,editable:1})}}function ke(e){return"[object Date]"===Object.prototype.toString.call(e)}function ye(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((t,n)=>ye(e[n],t));return e=>n.map(t=>t(e))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(ke(e)&&ke(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),o={};return n.forEach(n=>{o[n]=ye(e[n],t[n])}),e=>{const t={};return n.forEach(n=>{t[n]=o[n](e)}),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function xe(e,o={}){const s=le(e);let r,l=e;function i(i,c){if(null==e)return s.set(e=i),Promise.resolve();l=i;let u=r,m=!1,{delay:g=0,duration:h=400,easing:v=t,interpolate:_=ye}=n(n({},o),c);if(0===h)return u&&(u.abort(),u=null),s.set(e=l),Promise.resolve();const $=a()+g;let b;return r=function(e){let t;return 0===f.size&&d(p),{promise:new Promise(n=>{f.add(t={c:e,f:n})}),abort(){f.delete(t)}}}(t=>{if(t<$)return!0;m||(b=_(e,i),"function"==typeof h&&(h=h(e,i)),m=!0),u&&(u.abort(),u=null);const n=t-$;return n>h?(s.set(e=i),!1):(s.set(e=b(v(n/h))),!0)}),r.promise}return{set:i,update:(t,n)=>i(t(l,e),n),subscribe:s.subscribe}}const Se=["fake moon landing","80% certain","large hadron collider","second date","starry night","LSD trip","colonizing mars","friendly couchsurfer","missed high five","Harambe The Pirate Gorilla","Embarassing childhood memories","Banks with tanks","Magic internet money","Alligator eating ice cream","Confused cat","Muslim Mona Lisa","Arnold Schwartznegger","Meme economy","Cremino vs Croccante","La Sfinge","Karl Marx birthday","Triple rainbow","La terra promessa","Mirror","Running dog","Leopards saving the city","Orzo Bruno","confused eggplant","Empathy","Ancient Greece","La stanza piÃ¹ remota della torre piÃ¹ alta","Bread stapled to a tree","Elon musk children","Portare a spasso tartaruga","passeggiare a Pisa con una pecora","parrucchiere che si finge idraulico","mouth full of marbles","dumplings","salsa di soia","tiny tiny sled dogs","french jedi","purse full of dreams","life spiraling out of control","planet of the babies","I'm not so sure about this hitchhiker","imposter","practice kiss","social media manager","new years resolution","End of quarantena party","Playing with spoons","Poisoned toothpaste","Giant cat","a wheelchair for six","trump fart","pubblicitÃ  della tim","parrucchiere di mattarella","il cuore immacolato di maria","autocertificazione","lavatrice occupata","hercules","constipated harry potter"];function Ee(e){let t,n,o,s,r,l,i,c,u,a,d,f,p,v,$,k;function S(t){e[6].call(null,t)}let C={};return void 0!==e[0]&&(C.lines=e[0]),o=new we({props:C}),U.push(()=>function(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(o,"lines",S)),{c(){t=_("h1"),t.textContent=""+e[3],n=w(),Z(o.$$.fragment),r=w(),l=_("h1"),i=b(e[1]),c=w(),u=_("progress"),a=w(),d=_("button"),f=b("Done!"),x(t,"class","is-title has-text-centered svelte-ccjhbj"),x(l,"class","has-text-centered svelte-ccjhbj"),x(u,"class","progress svelte-ccjhbj"),u.value=e[2],T(u,"is-success",e[2]<.5),T(u,"is-warning",e[2]>=.5&&e[2]<.8),T(u,"is-danger",e[2]>=.8),d.disabled=p=0===e[0].length,x(d,"class","svelte-ccjhbj")},m(s,p){g(s,t,p),g(s,n,p),ee(o,s,p),g(s,r,p),g(s,l,p),m(l,i),g(s,c,p),g(s,u,p),g(s,a,p),g(s,d,p),m(d,f),v=!0,$||(k=y(d,"click",e[5]),$=!0)},p(e,[t]){const n={};var r;!s&&1&t&&(s=!0,n.lines=e[0],r=()=>s=!1,P.push(r)),o.$set(n),(!v||2&t)&&E(i,e[1]),(!v||4&t)&&(u.value=e[2]),4&t&&T(u,"is-success",e[2]<.5),4&t&&T(u,"is-warning",e[2]>=.5&&e[2]<.8),4&t&&T(u,"is-danger",e[2]>=.8),(!v||1&t&&p!==(p=0===e[0].length))&&(d.disabled=p)},i(e){v||(Q(o.$$.fragment,e),v=!0)},o(e){X(o.$$.fragment,e),v=!1},d(e){e&&h(t),e&&h(n),te(o,e),e&&h(r),e&&h(l),e&&h(c),e&&h(u),e&&h(a),e&&h(d),$=!1,k()}}}function Ce(e,t,n){let o;const s=j(),r=Se[Math.floor(Math.random()*Se.length)].toUpperCase();let{lines:l=[]}=t;const i=xe(0,{duration:101e3});c(e,i,e=>n(2,o=e));let u,a=!1,d=function(){a||(i.set(1),confirm("Send picture?")&&(s("sendPicture",{lines:l,prompt:r}),a=!0))};return i.set(1).then(d),e.$$set=e=>{"lines"in e&&n(0,l=e.lines)},e.$$.update=()=>{4&e.$$.dirty&&n(1,u=Math.floor(101*(1-o)))},[l,u,o,r,i,d,function(e){l=e,n(0,l)}]}class Ae extends se{constructor(e){super(),oe(this,e,Ce,Ee,i,{lines:0})}}function Ie(e,t,n){const o=e.slice();return o[39]=t[n],o}function Re(e,t,n){const o=e.slice();return o[34]=t[n],o}function Te(e,t,n){const o=e.slice();return o[34]=t[n],o}function Ne(e,t,n){const o=e.slice();return o[31]=t[n],o}function Ge(e,t,n){const o=e.slice();return o[12]=t[n],o}function Oe(e){let t;return{c(){t=_("h1"),t.textContent="Scores:",x(t,"class","is-title has-text-centered svelte-148bkwp")},m(e,n){g(e,t,n)},d(e){e&&h(t)}}}function je(e){let t;return{c(){t=_("h1"),t.textContent="Pick your guess for:",x(t,"class","is-title has-text-centered svelte-148bkwp")},m(e,n){g(e,t,n)},d(e){e&&h(t)}}}function Le(e){let t;return{c(){t=_("h1"),t.textContent="Type your guess for:",x(t,"class","is-title has-text-centered svelte-148bkwp")},m(e,n){g(e,t,n)},d(e){e&&h(t)}}}function Ue(e){let t,n,o,s,r,l,i,c,u=e[6],a=[];for(let t=0;t<u.length;t+=1)a[t]=De(Ie(e,u,t));const d=e=>X(a[e],1,1,()=>{a[e]=null});return{c(){t=_("div"),n=_("div"),o=w(),s=_("div"),s.innerHTML="<strong>Score</strong>",r=w(),l=_("div"),l.innerHTML="<strong>LOLs</strong>",i=w();for(let e=0;e<a.length;e+=1)a[e].c();x(n,"class","column is-half center-text svelte-148bkwp"),x(s,"class","column is-one-quarter center-text svelte-148bkwp"),x(l,"class","column is-one-quarter center-text svelte-148bkwp"),x(t,"class","columns is-multiline half-width svelte-148bkwp")},m(e,u){g(e,t,u),m(t,n),m(t,o),m(t,s),m(t,r),m(t,l),m(t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);c=!0},p(e,n){if(64&n[0]){let o;for(u=e[6],o=0;o<u.length;o+=1){const s=Ie(e,u,o);a[o]?(a[o].p(s,n),Q(a[o],1)):(a[o]=De(s),a[o].c(),Q(a[o],1),a[o].m(t,null))}for(J(),o=u.length;o<a.length;o+=1)d(o);Y()}},i(e){if(!c){for(let e=0;e<u.length;e+=1)Q(a[e]);c=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)X(a[e]);c=!1},d(e){e&&h(t),v(a,e)}}}function Me(t){let n,o=t[7],s=[];for(let e=0;e<o.length;e+=1)s[e]=Be(Re(t,o,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();n=k()},m(e,t){for(let n=0;n<s.length;n+=1)s[n].m(e,t);g(e,n,t)},p(e,t){if(66208&t[0]){let r;for(o=e[7],r=0;r<o.length;r+=1){const l=Re(e,o,r);s[r]?s[r].p(l,t):(s[r]=Be(l),s[r].c(),s[r].m(n.parentNode,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},i:e,o:e,d(e){v(s,e),e&&h(n)}}}function Pe(e){let t,n,o,s;const r=[Ve,ze],l=[];function i(e,t){return e[4]?0:1}return t=i(e),n=l[t]=r[t](e),{c(){n.c(),o=k()},m(e,n){l[t].m(e,n),g(e,o,n),s=!0},p(e,s){let c=t;t=i(e),t===c?l[t].p(e,s):(J(),X(l[c],1,1,()=>{l[c]=null}),Y(),n=l[t],n||(n=l[t]=r[t](e),n.c()),Q(n,1),n.m(o.parentNode,o))},i(e){s||(Q(n),s=!0)},o(e){X(n),s=!1},d(e){l[t].d(e),e&&h(o)}}}function We(e){let t,n,o,s;const r=[Ye,Je],l=[];function i(e,t){return e[2]?0:1}return t=i(e),n=l[t]=r[t](e),{c(){n.c(),o=k()},m(e,n){l[t].m(e,n),g(e,o,n),s=!0},p(e,s){let c=t;t=i(e),t===c?l[t].p(e,s):(J(),X(l[c],1,1,()=>{l[c]=null}),Y(),n=l[t],n||(n=l[t]=r[t](e),n.c()),Q(n,1),n.m(o.parentNode,o))},i(e){s||(Q(n),s=!0)},o(e){X(n),s=!1},d(e){l[t].d(e),e&&h(o)}}}function De(e){let t,n,o,s,r,l,i,c,u,a=e[39].score+"",d=e[39].lol_score+"";return n=new de({props:{username:e[39].username}}),{c(){t=_("div"),Z(n.$$.fragment),o=w(),s=_("div"),r=b(a),l=w(),i=_("div"),c=b(d),x(t,"class","column is-half center-text svelte-148bkwp"),x(s,"class","column is-one-quarter center-text svelte-148bkwp"),x(i,"class","column is-one-quarter center-text svelte-148bkwp")},m(e,a){g(e,t,a),ee(n,t,null),g(e,o,a),g(e,s,a),m(s,r),g(e,l,a),g(e,i,a),m(i,c),u=!0},p(e,t){const o={};64&t[0]&&(o.username=e[39].username),n.$set(o),(!u||64&t[0])&&a!==(a=e[39].score+"")&&E(r,a),(!u||64&t[0])&&d!==(d=e[39].lol_score+"")&&E(c,d)},i(e){u||(Q(n.$$.fragment,e),u=!0)},o(e){X(n.$$.fragment,e),u=!1},d(e){e&&h(t),te(n),e&&h(o),e&&h(s),e&&h(l),e&&h(i)}}}function qe(e){let t,n,o,s,r,l,i,c,u,a=e[34].prompt+"";function d(...t){return e[23](e[34],...t)}return{c(){t=_("div"),n=b(a),o=w(),s=_("div"),r=_("button"),l=b("LOL point"),x(t,"class","column is-half center-text svelte-148bkwp"),x(r,"class","button"),r.disabled=i=e[5].includes(e[34].guesser_username),x(s,"class","column is-half")},m(e,i){g(e,t,i),m(t,n),g(e,o,i),g(e,s,i),m(s,r),m(r,l),c||(u=y(r,"click",d,{once:!0}),c=!0)},p(t,o){e=t,128&o[0]&&a!==(a=e[34].prompt+"")&&E(n,a),160&o[0]&&i!==(i=e[5].includes(e[34].guesser_username))&&(r.disabled=i)},d(e){e&&h(t),e&&h(o),e&&h(s),c=!1,u()}}}function Be(e){let t,n,o=e[34].guesser_username!==e[9]&&!Se.includes(e[34].prompt),s=o&&qe(e);return{c(){t=_("div"),s&&s.c(),n=w(),x(t,"class","columns is-multiline half-width svelte-148bkwp")},m(e,o){g(e,t,o),s&&s.m(t,null),m(t,n)},p(e,r){640&r[0]&&(o=e[34].guesser_username!==e[9]&&!Se.includes(e[34].prompt)),o?s?s.p(e,r):(s=qe(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null)},d(e){e&&h(t),s&&s.d()}}}function ze(t){let n,o,s,l,i,c=t[7],u=[];for(let e=0;e<c.length;e+=1)u[e]=He(Te(t,c,e));return{c(){n=_("select");for(let e=0;e<u.length;e+=1)u[e].c();o=w(),s=_("button"),s.textContent="Send!",void 0===t[3]&&q(()=>t[22].call(n)),x(s,"class","button is-info is-large")},m(e,r){g(e,n,r);for(let e=0;e<u.length;e+=1)u[e].m(n,null);I(n,t[3]),g(e,o,r),g(e,s,r),l||(i=[y(n,"change",t[22]),y(s,"click",t[15])],l=!0)},p(e,t){if(640&t[0]){let o;for(c=e[7],o=0;o<c.length;o+=1){const s=Te(e,c,o);u[o]?u[o].p(s,t):(u[o]=He(s),u[o].c(),u[o].m(n,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=c.length}136&t[0]&&I(n,e[3])},i:e,o:e,d(e){e&&h(n),v(u,e),e&&h(o),e&&h(s),l=!1,r(i)}}}function Ve(e){let t,n,o,s,r=e[8],l=[];for(let t=0;t<r.length;t+=1)l[t]=Fe(Ne(e,r,t));const i=e=>X(l[e],1,1,()=>{l[e]=null});return{c(){t=_("h2"),t.textContent="Got votes:",n=w();for(let e=0;e<l.length;e+=1)l[e].c();o=k(),x(t,"class","has-text-centered")},m(e,r){g(e,t,r),g(e,n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,r);g(e,o,r),s=!0},p(e,t){if(256&t[0]){let n;for(r=e[8],n=0;n<r.length;n+=1){const s=Ne(e,r,n);l[n]?(l[n].p(s,t),Q(l[n],1)):(l[n]=Fe(s),l[n].c(),Q(l[n],1),l[n].m(o.parentNode,o))}for(J(),n=r.length;n<l.length;n+=1)i(n);Y()}},i(e){if(!s){for(let e=0;e<r.length;e+=1)Q(l[e]);s=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)X(l[e]);s=!1},d(e){e&&h(t),e&&h(n),v(l,e),e&&h(o)}}}function Ke(e){let t,n,o,s=e[34].prompt+"";return{c(){t=_("option"),n=b(s),t.__value=o=e[34].guesser_username,t.value=t.__value},m(e,o){g(e,t,o),m(t,n)},p(e,r){128&r[0]&&s!==(s=e[34].prompt+"")&&E(n,s),128&r[0]&&o!==(o=e[34].guesser_username)&&(t.__value=o,t.value=t.__value)},d(e){e&&h(t)}}}function He(e){let t,n=e[34].guesser_username!==e[9]&&Ke(e);return{c(){n&&n.c(),t=k()},m(e,o){n&&n.m(e,o),g(e,t,o)},p(e,o){e[34].guesser_username!==e[9]?n?n.p(e,o):(n=Ke(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&h(t)}}}function Fe(e){let t,n;return t=new de({props:{username:e[31].voter_username}}),{c(){Z(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};256&n[0]&&(o.username=e[31].voter_username),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Je(t){let n,o,s,l,i,c,u,a,d,f;return{c(){n=_("div"),o=_("div"),s=_("input"),l=w(),i=_("div"),c=_("button"),u=b("Send!"),x(s,"class","input is-large"),x(s,"type","text"),x(s,"placeholder","Your guess"),s.required=!0,x(o,"class","control is-expanded"),x(c,"class","button is-info is-large"),c.disabled=a=0===t[12].length,x(i,"class","control"),x(n,"class","field has-addons has-addons-centered svelte-148bkwp")},m(e,r){g(e,n,r),m(n,o),m(o,s),C(s,t[12]),m(n,l),m(n,i),m(i,c),m(c,u),d||(f=[y(s,"input",t[21]),y(c,"click",t[14])],d=!0)},p(e,t){4096&t[0]&&s.value!==e[12]&&C(s,e[12]),4096&t[0]&&a!==(a=0===e[12].length)&&(c.disabled=a)},i:e,o:e,d(e){e&&h(n),d=!1,r(f)}}}function Ye(e){let t,n,o,s,r=e[7],l=[];for(let t=0;t<r.length;t+=1)l[t]=Qe(Ge(e,r,t));const i=e=>X(l[e],1,1,()=>{l[e]=null});return{c(){t=_("h2"),t.textContent="Got guesses:",n=w();for(let e=0;e<l.length;e+=1)l[e].c();o=k(),x(t,"class","has-text-centered")},m(e,r){g(e,t,r),g(e,n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,r);g(e,o,r),s=!0},p(e,t){if(128&t[0]){let n;for(r=e[7],n=0;n<r.length;n+=1){const s=Ge(e,r,n);l[n]?(l[n].p(s,t),Q(l[n],1)):(l[n]=Qe(s),l[n].c(),Q(l[n],1),l[n].m(o.parentNode,o))}for(J(),n=r.length;n<l.length;n+=1)i(n);Y()}},i(e){if(!s){for(let e=0;e<r.length;e+=1)Q(l[e]);s=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)X(l[e]);s=!1},d(e){e&&h(t),e&&h(n),v(l,e),e&&h(o)}}}function Qe(e){let t,n;return t=new de({props:{username:e[12].guesser_username}}),{c(){Z(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};128&n[0]&&(o.username=e[12].guesser_username),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Xe(e){let t,n,o,s,r,l,i,c,u,a,d;function f(e,t){return e[1]===e[13].WRITE_GUESS?Le:e[1]===e[13].PICK_GUESS?je:Oe}let p=f(e),v=p(e);n=new we({props:{lines:e[0].lines,editable:!1}});const $=[We,Pe,Me,Ue],k=[];function y(e,t){return e[1]===e[13].WRITE_GUESS?0:e[1]===e[13].PICK_GUESS?1:e[1]===e[13].SCORE?2:e[1]===e[13].LEADERBOARD?3:-1}return~(s=y(e))&&(r=k[s]=$[s](e)),{c(){v.c(),t=w(),Z(n.$$.fragment),o=w(),r&&r.c(),l=w(),i=_("progress"),c=w(),u=_("h1"),a=b(e[10]),x(i,"class","progress svelte-148bkwp"),i.value=e[11],T(i,"is-success",e[11]<.5),T(i,"is-warning",e[11]>=.5&&e[11]<.8),T(i,"is-danger",e[11]>=.8),x(u,"class","has-text-centered svelte-148bkwp")},m(e,r){v.m(e,r),g(e,t,r),ee(n,e,r),g(e,o,r),~s&&k[s].m(e,r),g(e,l,r),g(e,i,r),g(e,c,r),g(e,u,r),m(u,a),d=!0},p(e,o){p!==(p=f(e))&&(v.d(1),v=p(e),v&&(v.c(),v.m(t.parentNode,t)));const c={};1&o[0]&&(c.lines=e[0].lines),n.$set(c);let u=s;s=y(e),s===u?~s&&k[s].p(e,o):(r&&(J(),X(k[u],1,1,()=>{k[u]=null}),Y()),~s?(r=k[s],r||(r=k[s]=$[s](e),r.c()),Q(r,1),r.m(l.parentNode,l)):r=null),(!d||2048&o[0])&&(i.value=e[11]),2048&o[0]&&T(i,"is-success",e[11]<.5),2048&o[0]&&T(i,"is-warning",e[11]>=.5&&e[11]<.8),2048&o[0]&&T(i,"is-danger",e[11]>=.8),(!d||1024&o[0])&&E(a,e[10])},i(e){d||(Q(n.$$.fragment,e),Q(r),d=!0)},o(e){X(n.$$.fragment,e),X(r),d=!1},d(e){v.d(e),e&&h(t),te(n,e),e&&h(o),~s&&k[s].d(e),e&&h(l),e&&h(i),e&&h(c),e&&h(u)}}}function Ze(e,t,n){let o,s,r;c(e,ce,e=>n(9,o=e)),c(e,ie,e=>n(24,s=e));const l=j();let{pictures:i}=t;const u={WRITE_GUESS:"write_guess",PICK_GUESS:"pick_guess",SCORE:"scoring",LEADERBOARD:"leaderboard"};let a,d=i[0],f=u.WRITE_GUESS,p="",m=!1,g=!1,h=[],v=[],_=[],$=[];function b(){0!=i.length?(n(0,d=i.shift()),n(7,_=[{prompt:d.prompt,guesser_username:d.username}]),n(8,$=[]),n(1,f=u.WRITE_GUESS),n(2,m=d.username===o),n(12,p=""),n(5,h=[]),x.set(0,{duration:500}).then(()=>x.set(1)).then(()=>{m||alert("Please send a guess!")})):alert("The end!")}let w=function(){l("sendVote",a),n(4,g=!0)},k=function(e){n(5,h=[...h,e]),l("givePoint",e)};function y(){n(1,f=u.LEADERBOARD),n(6,v=[...s.values()]),v.sort((e,t)=>100*(t.score-e.score)+t.lol_score-e.lol_score),n(6,v),x.set(.8,{duration:500}).then(()=>x.set(1,{duration:6200})).then(b)}const x=xe(0,{duration:31e3});c(e,x,e=>n(11,r=e)),b();let S;return e.$$set=e=>{"pictures"in e&&n(18,i=e.pictures)},e.$$.update=()=>{2048&e.$$.dirty[0]&&n(10,S=Math.floor(31*(1-r)))},[d,f,m,a,g,h,v,_,$,o,S,r,p,u,function(){l("sendGuess",p.toUpperCase()),n(2,m=!0)},w,k,x,i,e=>{_.push(e),_.sort((e,t)=>e.prompt.localeCompare(t.prompt)),n(7,_),_.length===s.size&&(n(1,f=u.PICK_GUESS),n(4,g=!1),o===d.username&&(n(3,a=d.username),w()),x.set(0,{duration:500}).then(()=>x.set(1)).then(()=>{g||alert("Please send a vote!")}))},e=>{console.log(e),n(8,$=[...$,e]),console.log($),$.length===s.size&&(n(1,f=u.SCORE),x.set(.7,{duration:500}).then(()=>x.set(1,{duration:9300})).then(y))},function(){p=this.value,n(12,p)},function(){a=R(this),n(3,a),n(7,_)},e=>k(e.guesser_username)]}class et extends se{constructor(e){super(),oe(this,e,Ze,Xe,i,{pictures:18,onGuess:19,onVote:20},[-1,-1])}get onGuess(){return this.$$.ctx[19]}get onVote(){return this.$$.ctx[20]}}function tt(e,t,n){const o=e.slice();return o[19]=t[n],o}function nt(e,t,n){const o=e.slice();return o[16]=t[n],o}function ot(t){let n;return{c(){n=_("h1"),n.textContent="UNKNOWN STATE AAAA",x(n,"class","title has-text-centered")},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function st(e){let t,n,o={pictures:e[2]};return t=new et({props:o}),e[11](t),t.$on("sendVote",e[8]),t.$on("sendGuess",e[9]),t.$on("givePoint",e[10]),{c(){Z(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.pictures=e[2]),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(n){e[11](null),te(t,n)}}}function rt(e){let t,n,o,s,r=e[2],l=[];for(let t=0;t<r.length;t+=1)l[t]=ut(tt(e,r,t));const i=e=>X(l[e],1,1,()=>{l[e]=null});return{c(){t=_("h1"),t.textContent="Waiting for other players to finish drawing, got:",n=w();for(let e=0;e<l.length;e+=1)l[e].c();o=k(),x(t,"class","title has-text-centered")},m(e,r){g(e,t,r),g(e,n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,r);g(e,o,r),s=!0},p(e,t){if(4&t){let n;for(r=e[2],n=0;n<r.length;n+=1){const s=tt(e,r,n);l[n]?(l[n].p(s,t),Q(l[n],1)):(l[n]=ut(s),l[n].c(),Q(l[n],1),l[n].m(o.parentNode,o))}for(J(),n=r.length;n<l.length;n+=1)i(n);Y()}},i(e){if(!s){for(let e=0;e<r.length;e+=1)Q(l[e]);s=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)X(l[e]);s=!1},d(e){e&&h(t),e&&h(n),v(l,e),e&&h(o)}}}function lt(t){let n,o,s,r;return s=new Ae({}),s.$on("sendPicture",t[7]),{c(){n=_("h1"),n.textContent="Let's draw!",o=w(),Z(s.$$.fragment),x(n,"class","title has-text-centered")},m(e,t){g(e,n,t),g(e,o,t),ee(s,e,t),r=!0},p:e,i(e){r||(Q(s.$$.fragment,e),r=!0)},o(e){X(s.$$.fragment,e),r=!1},d(e){e&&h(n),e&&h(o),te(s,e)}}}function it(e){let t,n,o,s,r,l,i,c,u,a,d=e[3],f=[];for(let t=0;t<d.length;t+=1)f[t]=at(nt(e,d,t));const p=e=>X(f[e],1,1,()=>{f[e]=null});return{c(){t=_("h1"),t.textContent="Waiting for other players",n=w(),o=_("ul");for(let e=0;e<f.length;e+=1)f[e].c();s=w(),r=_("button"),l=b("Everybody in!"),x(t,"class","title has-text-centered"),x(r,"class","button"),r.disabled=i=e[3].length<2},m(i,d){g(i,t,d),g(i,n,d),g(i,o,d);for(let e=0;e<f.length;e+=1)f[e].m(o,null);g(i,s,d),g(i,r,d),m(r,l),c=!0,u||(a=y(r,"click",e[6],{once:!0}),u=!0)},p(e,t){if(8&t){let n;for(d=e[3],n=0;n<d.length;n+=1){const s=nt(e,d,n);f[n]?(f[n].p(s,t),Q(f[n],1)):(f[n]=at(s),f[n].c(),Q(f[n],1),f[n].m(o,null))}for(J(),n=d.length;n<f.length;n+=1)p(n);Y()}(!c||8&t&&i!==(i=e[3].length<2))&&(r.disabled=i)},i(e){if(!c){for(let e=0;e<d.length;e+=1)Q(f[e]);c=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)X(f[e]);c=!1},d(e){e&&h(t),e&&h(n),e&&h(o),v(f,e),e&&h(s),e&&h(r),u=!1,a()}}}function ct(t){let n,o;return n=new me({}),n.$on("login",t[5]),{c(){Z(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Q(n.$$.fragment,e),o=!0)},o(e){X(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function ut(e){let t,n;return t=new de({props:{username:e[19].username}}),{c(){Z(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.username=e[19].username),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function at(e){let t,n;return t=new de({props:{username:e[16][0]}}),{c(){Z(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.username=e[16][0]),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function dt(e){let t,n,o,s;const r=[ct,it,lt,rt,st,ot],l=[];function i(e,t){return e[0]===e[4].LOGIN?0:e[0]===e[4].WAIT_START?1:e[0]===e[4].DRAW?2:e[0]===e[4].WAIT_DRAWERS?3:e[0]===e[4].GUESS?4:5}return n=i(e),o=l[n]=r[n](e),{c(){t=_("div"),o.c(),x(t,"class","container svelte-1br3k65")},m(e,o){g(e,t,o),l[n].m(t,null),s=!0},p(e,[s]){let c=n;n=i(e),n===c?l[n].p(e,s):(J(),X(l[c],1,1,()=>{l[c]=null}),Y(),o=l[n],o||(o=l[n]=r[n](e),o.c()),Q(o,1),o.m(t,null))},i(e){s||(Q(o),s=!0)},o(e){X(o),s=!1},d(e){e&&h(t),l[n].d()}}}function ft(e,t,n){let o,s;c(e,ie,e=>n(14,o=e)),c(e,ce,e=>n(15,s=e));const r={LOGIN:"login",WAIT_START:"wait_start",DRAW:"draw",WAIT_DRAWERS:"wait_drawers",GUESS:"guess"};let l,i,u,a=r.LOGIN,d=new ge,f=[];return d.onMessage=e=>{switch(console.log(e.type),console.log(e),e.type){case"new_user":const t={username:e.username,img_src:e.img_src};ie.update(e=>(e.set(t.username,{lol_score:0,username:t.username,score:0,img_src:t.img_src}),console.log([...e]),e)),t.username===s&&(n(0,a=r.WAIT_START),console.log("Connected: ",e));break;case"old_users":const l=Object.entries(e.users).map(e=>({score:0,lol_score:0,username:e[0],img_src:e[1]}));ie.update(e=>{for(let t of l)e.set(t.username,{score:0,lol_score:0,img_src:t.img_src,username:t.username});return e});break;case"start_game":n(0,a=r.DRAW);break;case"picture":n(2,f=[...f,{username:e.username,lines:e.lines,prompt:e.prompt}]),f.sort(),console.log(f),f.length===o.size&&n(0,a=r.GUESS);break;case"guessed_prompt":i.onGuess(e);break;case"voted_prompt":e.voted_username!==e.voter_username&&ie.update(t=>{let n=t.get(e.voted_username);return n?(n.score+=1,t.set(e.voted_username,n),console.log([...t]),t):(console.error("MISSING USER"),alert("MISSING USER!!!!"),t)}),i.onVote(e);break;case"give_point":ie.update(t=>{let n=t.get(e.receiver_username);return n?(n.lol_score+=1,t.set(e.receiver_username,n),console.log([...t]),t):(console.error("MISSING USER"),alert("MISSING USER!!!!"),t)});break;default:alert("Unknown type, see console"),console.error(e)}},e.$$.update=()=>{16384&e.$$.dirty&&n(3,u=[...o])},[a,i,f,u,r,function(e){n(0,a=r.WAIT_START);let t=e.detail.username;l=e.detail.img_src,ce.set(t),ie.update(e=>(e.set(t,{lol_score:0,username:t,score:0,img_src:l}),console.log([...e]),e)),console.log("Logged in: ",e.detail);let o=document.getElementById("telegram-login-minnybot");(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o),d.setUp(t,l)},function(){null==d||d.sendObject({type:"start_game"})},function(e){console.log("sendPicture message",e),n(0,a=r.WAIT_DRAWERS),null==d||d.sendObject({type:"picture",lines:e.detail.lines,prompt:e.detail.prompt,username:s})},function(e){console.log("sendVote message",e),null==d||d.sendObject({type:"voted_prompt",voted_username:e.detail,voter_username:s})},function(e){console.log("sendGuess message",e),null==d||d.sendObject({type:"guessed_prompt",prompt:e.detail,guesser_username:s})},function(e){console.log("givePoint message",e),null==d||d.sendObject({type:"give_point",receiver_username:e.detail})},function(e){U[e?"unshift":"push"](()=>{i=e,n(1,i)})}]}return new class extends se{constructor(e){super(),oe(this,e,ft,dt,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
