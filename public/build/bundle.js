var app=function(t){"use strict";function e(){}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const n=t=>t;function o(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function s(){return Object.create(null)}function i(t){t.forEach(r)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const a="undefined"!=typeof window;let d=a?()=>window.performance.now():()=>Date.now(),p=a?t=>requestAnimationFrame(t):e;const f=new Set;function m(t){f.forEach(e=>{e.c(t)||(f.delete(e),e.f())}),0!==f.size&&p(m)}function g(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function _(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t){return document.createTextNode(t)}function b(){return k(" ")}function x(){return k("")}function y(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return""===t?null:+t}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function P(t,e){t.value=null==e?"":e}function S(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function j(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function N(t,e,n){t.classList[n?"add":"remove"](e)}let T;function O(t){T=t}function L(){if(!T)throw new Error("Function called outside component initialization");return T}function G(){const t=L();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}const U=[],D=[],I=[],R=[],W=Promise.resolve();let B=!1;function M(t){I.push(t)}let q=!1;const K=new Set;function z(){if(!q){q=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];O(e),H(e.$$)}for(O(null),U.length=0;D.length;)D.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];K.has(e)||(K.add(e),e())}I.length=0}while(U.length);for(;R.length;)R.pop()();B=!1,q=!1,K.clear()}}function H(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const V=new Set;let Y;function F(){Y={r:0,c:[],p:Y}}function J(){Y.r||i(Y.c),Y=Y.p}function X(t,e){t&&t.i&&(V.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),Y.c.push(()=>{V.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function Z(t){t&&t.c()}function tt(t,e,n){const{fragment:o,on_mount:s,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),M(()=>{const e=s.map(r).filter(l);c?c.push(...e):i(e),t.$$.on_mount=[]}),u.forEach(M)}function et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(U.push(t),B||(B=!0,W.then(z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(t,n,o,r,l,c,u=[-1]){const a=T;O(t);const d=n.props||{},p=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:s(),dirty:u,skip_bound:!1};let f=!1;if(p.ctx=o?o(t,d,(e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),f&&nt(t,e)),n}):[],p.update(),f=!0,i(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(w)}else p.fragment&&p.fragment.c();n.intro&&X(t.$$.fragment),tt(t,n.target,n.anchor),z()}O(a)}class rt{$destroy(){et(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function st(t){let n,o,r,s,i,l,c=t[0].username+"";return{c(){n=$("div"),o=$("img"),s=b(),i=$("p"),l=k(c),C(o,"alt","user pic"),o.src!==(r=t[0].img_src)&&C(o,"src",r),C(i,"class","has-text-centered svelte-1a9drn7"),C(n,"class","card svelte-1a9drn7")},m(t,e){h(t,n,e),g(n,o),g(n,s),g(n,i),g(i,l)},p(t,[e]){1&e&&o.src!==(r=t[0].img_src)&&C(o,"src",r),1&e&&c!==(c=t[0].username+"")&&A(l,c)},i:e,o:e,d(t){t&&w(n)}}}function it(t,e,n){let{user:o}=e;return t.$$set=t=>{"user"in t&&n(0,o=t.user)},[o]}class lt extends rt{constructor(t){super(),ot(this,t,it,st,c,{user:0})}}function ct(t){let n,o,r,s,l,c,u,a,d,p,f,m,v,_,k,x,E,A,S,j,N,T;return{c(){n=$("div"),o=$("div"),r=$("div"),s=$("label"),s.textContent="Username",l=b(),c=$("input"),u=b(),a=$("div"),d=$("div"),p=$("label"),p.textContent="Image url",f=b(),m=$("input"),v=b(),_=$("div"),k=$("div"),x=$("div"),E=$("input"),A=b(),S=$("div"),j=$("button"),j.textContent="Login",C(s,"for","paperInputs2"),C(c,"id","username-input"),C(c,"class","input-block"),C(c,"type","text"),C(c,"placeholder","Username"),c.required=!0,C(r,"class","form-group"),C(o,"class","col sm-4"),C(p,"for","paperInputs3"),C(m,"id","image-url-input"),C(m,"class","input-block"),C(m,"type","url"),m.required=!0,C(d,"class","form-group"),C(a,"class","col sm-8"),C(n,"class","row"),C(E,"class","input-block"),C(E,"type","text"),C(E,"placeholder","Your prompt"),E.required=!0,C(x,"class","form-group"),C(k,"class","col sm-10"),C(j,"id","login-button"),C(j,"class","button is-link svelte-1ppidry"),C(S,"class","col"),C(_,"class","row")},m(e,i){h(e,n,i),g(n,o),g(o,r),g(r,s),g(r,l),g(r,c),P(c,t[0]),g(n,u),g(n,a),g(a,d),g(d,p),g(d,f),g(d,m),P(m,t[2]),h(e,v,i),h(e,_,i),g(_,k),g(k,x),g(x,E),P(E,t[1]),g(_,A),g(_,S),g(S,j),N||(T=[y(c,"input",t[4]),y(m,"input",t[5]),y(E,"input",t[6]),y(j,"click",t[3])],N=!0)},p(t,[e]){1&e&&c.value!==t[0]&&P(c,t[0]),4&e&&P(m,t[2]),2&e&&E.value!==t[1]&&P(E,t[1])},i:e,o:e,d(t){t&&w(n),t&&w(v),t&&w(_),N=!1,i(T)}}}function ut(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,s){function i(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((o=o.apply(t,e||[])).next())}))};const r=G();let s="",i="";const l=["https://upload.wikimedia.org/wikipedia/en/a/a6/Pok%C3%A9mon_Pikachu_art.png","https://upload.wikimedia.org/wikipedia/en/2/28/Pok%C3%A9mon_Bulbasaur_art.png","https://upload.wikimedia.org/wikipedia/en/5/59/Pok%C3%A9mon_Squirtle_art.png","https://upload.wikimedia.org/wikipedia/en/a/a5/Pok%C3%A9mon_Charmander_art.png","https://upload.wikimedia.org/wikipedia/en/2/20/Pok%C3%A9mon_Venusaur_art.png","https://annachromy.com/wp-content/uploads/2020/08/Sisifo-pisa.jpg","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Jigglypuff_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pok%C3%A9mon_Meowth_art.png","https://upload.wikimedia.org/wikipedia/en/2/2d/Pok%C3%A9mon_Psyduck_art.png","https://upload.wikimedia.org/wikipedia/en/e/ea/Pok%C3%A9mon_Abra%2C_Kadabra%2C_Alakazam_art.png","https://upload.wikimedia.org/wikipedia/en/4/4c/Pok%C3%A9mon_Haunter_art.png","https://upload.wikimedia.org/wikipedia/en/b/bf/Pok%C3%A9mon_Gengar_art.png","https://upload.wikimedia.org/wikipedia/en/3/3f/Pok%C3%A9mon_Koffing_and_Weezing_art.png","https://upload.wikimedia.org/wikipedia/en/3/3f/Pok%C3%A9mon_Magikarp_art.png","https://upload.wikimedia.org/wikipedia/en/a/a9/Pok%C3%A9mon_Eevee_art.png","https://upload.wikimedia.org/wikipedia/en/4/40/Pok%C3%A9mon_Lapras_art.png","https://upload.wikimedia.org/wikipedia/en/3/3f/Pok%C3%A9mon_Snorlax_art.png","https://upload.wikimedia.org/wikipedia/en/1/1a/Pok%C3%A9mon_Chikorita_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pichu_artwork.png","https://upload.wikimedia.org/wikipedia/en/5/53/Pok%C3%A9mon_Togepi_art.png","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Mudkip_art.png"];let c=l[Math.floor(Math.random()*l.length)];function u(t){n(0,s=t.username||t.first_name+" "+t.last_name),console.log(JSON.stringify(t,null,2)),n(2,c=t.photo_url||c),console.log("Image src: "+c),a()}function a(){i?(console.log("dispatching"),r("login",{username:s,img_src:c,prompt:i})):alert("Write prompt first!")}var d;return d=()=>o(void 0,void 0,void 0,(function*(){window.onTelegramAuth=u})),L().$$.on_mount.push(d),[s,i,c,a,function(){s=this.value,n(0,s)},function(){c=this.value,n(2,c)},function(){i=this.value,n(1,i)}]}class at extends rt{constructor(t){super(),ot(this,t,ut,ct,c,{})}}const dt=[];function pt(t,n=e){let o;const r=[];function s(e){if(c(t,e)&&(t=e,o)){const e=!dt.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),dt.push(n,t)}if(e){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,l=e){const c=[i,l];return r.push(c),1===r.length&&(o=n(s)||e),i(t),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}const ft=pt(""),mt=pt(""),gt=pt({users:[],phase:"login",drawings:[],guesses:[],votes:[]});const ht=new class{constructor(){const e="localhost"===document.location.hostname?"ws":"wss";this.socket=t(`${e}://${document.location.hostname}:8000`),this.socket.on("update state",t=>{console.log("NEW STATE!!!"),console.log(t),gt.set(t)})}async login(t,e,n){return this.socket.emit("login",t,e,n),new Promise((t,e)=>{this.socket.on("ok",t),this.socket.on("error",e)})}async startGame(){return this.socket.emit("start game"),new Promise((t,e)=>{this.socket.on("ok",t),this.socket.on("error",e)})}async sendDrawing(t){return this.socket.emit("drawing",t),new Promise((t,e)=>{this.socket.on("ok",t),this.socket.on("error",e)})}};function wt(t,e,n){const o=t.slice();return o[11]=e[n].stroke,o[12]=e[n].width,o[13]=e[n].points,o}function vt(t){let e,n;return{c(){e=_("polyline"),S(e,"fill","none"),S(e,"stroke",t[11]),S(e,"stroke-width",t[12]),C(e,"points",n=t[13]),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round"),C(e,"class","svelte-1w3pg28")},m(t,n){h(t,e,n)},p(t,o){1&o&&S(e,"stroke",t[11]),1&o&&S(e,"stroke-width",t[12]),1&o&&n!==(n=t[13])&&C(e,"points",n)},d(t){t&&w(e)}}}function $t(t){let e,n,o,r,s,l,c,u,a,d,p,f,m,v;return{c(){e=$("div"),n=$("label"),o=k("Width:\n      "),r=$("input"),s=b(),l=$("input"),c=b(),u=$("label"),a=k("Color:\n      "),d=$("input"),p=b(),f=$("button"),f.textContent="undo",C(r,"type","number"),C(r,"min","1"),C(r,"max","30"),C(l,"type","range"),C(l,"min","1"),C(l,"max","30"),C(n,"class","svelte-1w3pg28"),C(d,"type","color"),C(u,"class","svelte-1w3pg28"),C(f,"class","svelte-1w3pg28"),C(e,"class","controls centered-flex svelte-1w3pg28")},m(i,w){h(i,e,w),g(e,n),g(n,o),g(n,r),P(r,t[2].width),g(n,s),g(n,l),P(l,t[2].width),g(e,c),g(e,u),g(u,a),g(u,d),P(d,t[2].stroke),g(e,p),g(e,f),m||(v=[y(r,"input",t[6]),y(l,"change",t[7]),y(l,"input",t[7]),y(d,"input",t[8]),y(f,"click",t[9])],m=!0)},p(t,e){4&e&&E(r.value)!==t[2].width&&P(r,t[2].width),4&e&&P(l,t[2].width),4&e&&P(d,t[2].stroke)},d(t){t&&w(e),m=!1,i(v)}}}function _t(t){let n,o,r,s,l,c,u,a=t[0],d=[];for(let e=0;e<a.length;e+=1)d[e]=vt(wt(t,a,e));let p=t[1]&&$t(t);return{c(){n=_("svg");for(let t=0;t<d.length;t+=1)d[t].c();o=_("polyline"),s=b(),p&&p.c(),l=x(),S(o,"fill","none"),S(o,"stroke",t[2].stroke),S(o,"stroke-width",t[2].width),C(o,"points",r=t[2].points),C(o,"stroke-linecap","round"),C(o,"stroke-linejoin","round"),C(o,"class","svelte-1w3pg28"),C(n,"width","800"),C(n,"height","600"),C(n,"class","svelte-1w3pg28")},m(e,r){h(e,n,r);for(let t=0;t<d.length;t+=1)d[t].m(n,null);g(n,o),h(e,s,r),p&&p.m(e,r),h(e,l,r),c||(u=[y(n,"mousemove",t[5]),y(n,"mouseup",t[3]),y(n,"mousedown",t[4]),y(n,"mouseleave",t[3])],c=!0)},p(t,[e]){if(1&e){let r;for(a=t[0],r=0;r<a.length;r+=1){const s=wt(t,a,r);d[r]?d[r].p(s,e):(d[r]=vt(s),d[r].c(),d[r].m(n,o))}for(;r<d.length;r+=1)d[r].d(1);d.length=a.length}4&e&&S(o,"stroke",t[2].stroke),4&e&&S(o,"stroke-width",t[2].width),4&e&&r!==(r=t[2].points)&&C(o,"points",r),t[1]?p?p.p(t,e):(p=$t(t),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:e,o:e,d(t){t&&w(n),v(d,t),t&&w(s),p&&p.d(t),t&&w(l),c=!1,i(u)}}}function kt(t,e,n){let{lines:o=[]}=e,{editable:r=!0}=e,s={stroke:"#ff0000",width:2,points:""},i=!1;return t.$$set=t=>{"lines"in t&&n(0,o=t.lines),"editable"in t&&n(1,r=t.editable)},[o,r,s,function(){i&&(i=!1,s.points.split(" ").length<2||(o.push({stroke:s.stroke,width:s.width,points:s.points}),n(0,o),n(2,s.points="",s)))},function(){r&&(i=!0)},function(t){i&&n(2,s.points+=" "+t.offsetX+","+t.offsetY,s)},function(){s.width=E(this.value),n(2,s)},function(){s.width=E(this.value),n(2,s)},function(){s.stroke=this.value,n(2,s)},()=>{o.length>0&&n(0,o=o.slice(0,o.length-1))}]}class bt extends rt{constructor(t){super(),ot(this,t,kt,_t,c,{lines:0,editable:1})}}function xt(t){return"[object Date]"===Object.prototype.toString.call(t)}function yt(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>yt(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(xt(t)&&xt(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach(n=>{o[n]=yt(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=o[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function Ct(t,e={}){const r=pt(t);let s,i=t;function l(l,c){if(null==t)return r.set(t=l),Promise.resolve();i=l;let u=s,a=!1,{delay:g=0,duration:h=400,easing:w=n,interpolate:v=yt}=o(o({},e),c);if(0===h)return u&&(u.abort(),u=null),r.set(t=i),Promise.resolve();const $=d()+g;let _;return s=function(t){let e;return 0===f.size&&p(m),{promise:new Promise(n=>{f.add(e={c:t,f:n})}),abort(){f.delete(e)}}}(e=>{if(e<$)return!0;a||(_=v(t,l),"function"==typeof h&&(h=h(t,l)),a=!0),u&&(u.abort(),u=null);const n=e-$;return n>h?(r.set(t=l),!1):(r.set(t=_(w(n/h))),!0)}),s.promise}return{set:l,update:(e,n)=>l(e(i,t),n),subscribe:r.subscribe}}function Et(t){let e,n,o,r,s,i,l,c,u,a,d,p,f,m,v,_;function x(e){t[6].call(null,e)}let E={};return void 0!==t[0]&&(E.lines=t[0]),o=new bt({props:E}),D.push(()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(o,"lines",x)),{c(){e=$("h1"),e.textContent=""+t[3],n=b(),Z(o.$$.fragment),s=b(),i=$("h1"),l=k(t[1]),c=b(),u=$("progress"),a=b(),d=$("button"),p=k("Done!"),C(e,"class","has-text-centered svelte-ccjhbj"),C(i,"class","has-text-centered svelte-ccjhbj"),C(u,"class","progress margin-bottom svelte-ccjhbj"),u.value=t[2],N(u,"is-success",t[2]<.5),N(u,"is-warning",t[2]>=.5&&t[2]<.8),N(u,"is-danger",t[2]>=.8),d.disabled=f=0===t[0].length,C(d,"class","svelte-ccjhbj")},m(r,f){h(r,e,f),h(r,n,f),tt(o,r,f),h(r,s,f),h(r,i,f),g(i,l),h(r,c,f),h(r,u,f),h(r,a,f),h(r,d,f),g(d,p),m=!0,v||(_=y(d,"click",t[5],{once:!0}),v=!0)},p(t,[e]){const n={};var s;!r&&1&e&&(r=!0,n.lines=t[0],s=()=>r=!1,R.push(s)),o.$set(n),(!m||2&e)&&A(l,t[1]),(!m||4&e)&&(u.value=t[2]),4&e&&N(u,"is-success",t[2]<.5),4&e&&N(u,"is-warning",t[2]>=.5&&t[2]<.8),4&e&&N(u,"is-danger",t[2]>=.8),(!m||1&e&&f!==(f=0===t[0].length))&&(d.disabled=f)},i(t){m||(X(o.$$.fragment,t),m=!0)},o(t){Q(o.$$.fragment,t),m=!1},d(t){t&&w(e),t&&w(n),et(o,t),t&&w(s),t&&w(i),t&&w(c),t&&w(u),t&&w(a),t&&w(d),v=!1,_()}}}function At(t,e,n){let o,r,s;u(t,gt,t=>n(8,o=t)),u(t,ft,t=>n(9,r=t));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,s){function i(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((o=o.apply(t,e||[])).next())}))};let l=o.users.filter(t=>t.username===r)[0].assigned_prompt,c=[];const a=Ct(0,{duration:181e3});u(t,a,t=>n(2,s=t));let d,p=!1,f=function(){return i(this,void 0,void 0,(function*(){if(!p&&confirm("Send Drawing?")){console.log("sendDrawing:",c,l);try{yield ht.sendDrawing({lines:c,prompt:l,username:r})}catch(t){alert(t)}p=!0,a.set(1)}}))};return a.set(1).then(f),t.$$.update=()=>{4&t.$$.dirty&&n(1,d=Math.floor(181*(1-s)))},[c,d,s,l,a,f,function(t){c=t,n(0,c)}]}class Pt extends rt{constructor(t){super(),ot(this,t,At,Et,c,{})}}function St(t,e,n){const o=t.slice();return o[41]=e[n],o}function jt(t,e,n){const o=t.slice();return o[36]=e[n],o}function Nt(t,e,n){const o=t.slice();return o[36]=e[n],o}function Tt(t,e,n){const o=t.slice();return o[33]=e[n],o}function Ot(t,e,n){const o=t.slice();return o[13]=e[n],o}function Lt(t){let e;return{c(){e=$("h1"),e.textContent="Scores:",C(e,"class","has-text-centered svelte-x46n78")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Gt(t){let e;return{c(){e=$("h1"),e.textContent="Pick your guess for:",C(e,"class","has-text-centered svelte-x46n78")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Ut(t){let e;return{c(){e=$("h1"),e.textContent="Type your guess for:",C(e,"class","has-text-centered svelte-x46n78")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Dt(t){let e,n,o,r,s,i,l,c,u,a,d,p=t[0].prompt+"",f=t[6],m=[];for(let e=0;e<f.length;e+=1)m[e]=Bt(St(t,f,e));const _=t=>Q(m[t],1,1,()=>{m[t]=null});return{c(){e=$("h1"),n=k(p),o=b(),r=$("div"),s=$("div"),s.innerHTML="<strong>User</strong>",i=b(),l=$("div"),l.innerHTML="<strong>Score</strong>",c=b(),u=$("div"),u.innerHTML="<strong>LOLs</strong>",a=b();for(let t=0;t<m.length;t+=1)m[t].c();C(e,"class","has-text-centered svelte-x46n78"),C(s,"class","col sm-6 center-text svelte-x46n78"),C(l,"class","col sm-3 center-text svelte-x46n78"),C(u,"class","col sm-3 center-text svelte-x46n78"),C(r,"class","row svelte-x46n78")},m(t,p){h(t,e,p),g(e,n),h(t,o,p),h(t,r,p),g(r,s),g(r,i),g(r,l),g(r,c),g(r,u),g(r,a);for(let t=0;t<m.length;t+=1)m[t].m(r,null);d=!0},p(t,e){if((!d||1&e[0])&&p!==(p=t[0].prompt+"")&&A(n,p),64&e[0]){let n;for(f=t[6],n=0;n<f.length;n+=1){const o=St(t,f,n);m[n]?(m[n].p(o,e),X(m[n],1)):(m[n]=Bt(o),m[n].c(),X(m[n],1),m[n].m(r,null))}for(F(),n=f.length;n<m.length;n+=1)_(n);J()}},i(t){if(!d){for(let t=0;t<f.length;t+=1)X(m[t]);d=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Q(m[t]);d=!1},d(t){t&&w(e),t&&w(o),t&&w(r),v(m,t)}}}function It(t){let n,o=t[7],r=[];for(let e=0;e<o.length;e+=1)r[e]=qt(jt(t,o,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=x()},m(t,e){for(let n=0;n<r.length;n+=1)r[n].m(t,e);h(t,n,e)},p(t,e){if(263841&e[0]){let s;for(o=t[7],s=0;s<o.length;s+=1){const i=jt(t,o,s);r[s]?r[s].p(i,e):(r[s]=qt(i),r[s].c(),r[s].m(n.parentNode,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}},i:e,o:e,d(t){v(r,t),t&&w(n)}}}function Rt(t){let e,n,o,r;const s=[zt,Kt],i=[];function l(t,e){return t[4]?0:1}return e=l(t),n=i[e]=s[e](t),{c(){n.c(),o=x()},m(t,n){i[e].m(t,n),h(t,o,n),r=!0},p(t,r){let c=e;e=l(t),e===c?i[e].p(t,r):(F(),Q(i[c],1,1,()=>{i[c]=null}),J(),n=i[e],n||(n=i[e]=s[e](t),n.c()),X(n,1),n.m(o.parentNode,o))},i(t){r||(X(n),r=!0)},o(t){Q(n),r=!1},d(t){i[e].d(t),t&&w(o)}}}function Wt(t){let e,n,o,r;const s=[Jt,Ft],i=[];function l(t,e){return t[2]?0:1}return e=l(t),n=i[e]=s[e](t),{c(){n.c(),o=x()},m(t,n){i[e].m(t,n),h(t,o,n),r=!0},p(t,r){let c=e;e=l(t),e===c?i[e].p(t,r):(F(),Q(i[c],1,1,()=>{i[c]=null}),J(),n=i[e],n||(n=i[e]=s[e](t),n.c()),X(n,1),n.m(o.parentNode,o))},i(t){r||(X(n),r=!0)},o(t){Q(n),r=!1},d(t){i[e].d(t),t&&w(o)}}}function Bt(t){let e,n,o,r,s,i,l,c,u,a,d=t[41].score+"",p=t[41].lol_score+"";return o=new lt({props:{user:t[41]}}),{c(){e=$("div"),n=$("div"),Z(o.$$.fragment),r=b(),s=$("div"),i=k(d),l=b(),c=$("div"),u=k(p),C(n,"class","centered-flex"),C(e,"class","col sm-6"),C(s,"class","col sm-3 center-text svelte-x46n78"),C(c,"class","col sm-3 center-text svelte-x46n78")},m(t,d){h(t,e,d),g(e,n),tt(o,n,null),h(t,r,d),h(t,s,d),g(s,i),h(t,l,d),h(t,c,d),g(c,u),a=!0},p(t,e){const n={};64&e[0]&&(n.user=t[41]),o.$set(n),(!a||64&e[0])&&d!==(d=t[41].score+"")&&A(i,d),(!a||64&e[0])&&p!==(p=t[41].lol_score+"")&&A(u,p)},i(t){a||(X(o.$$.fragment,t),a=!0)},o(t){Q(o.$$.fragment,t),a=!1},d(t){t&&w(e),et(o),t&&w(r),t&&w(s),t&&w(l),t&&w(c)}}}function Mt(t){let e,n,o,r,s,i,l,c,u,a=t[36].guessed_prompt+"";function d(...e){return t[24](t[36],...e)}return{c(){e=$("div"),n=k(a),o=b(),r=$("div"),s=$("button"),i=k("LOL point"),C(e,"class","col sm-6 center-text svelte-x46n78"),C(s,"class","button"),s.disabled=l=t[5].includes(t[36].guesser_username),C(r,"class","col sm-6 center-text svelte-x46n78")},m(t,l){h(t,e,l),g(e,n),h(t,o,l),h(t,r,l),g(r,s),g(s,i),c||(u=y(s,"click",d,{once:!0}),c=!0)},p(e,o){t=e,128&o[0]&&a!==(a=t[36].guessed_prompt+"")&&A(n,a),160&o[0]&&l!==(l=t[5].includes(t[36].guesser_username))&&(s.disabled=l)},d(t){t&&w(e),t&&w(o),t&&w(r),c=!1,u()}}}function qt(t){let e,n,o=t[36].guesser_username!==t[9]&&t[36].guessed_prompt!==t[10]&&t[36].guessed_prompt!==t[0].prompt&&"-----"!==t[36].guessed_prompt&&Mt(t);return{c(){e=$("div"),o&&o.c(),n=b(),C(e,"class","row svelte-x46n78")},m(t,r){h(t,e,r),o&&o.m(e,null),g(e,n)},p(t,r){t[36].guesser_username!==t[9]&&t[36].guessed_prompt!==t[10]&&t[36].guessed_prompt!==t[0].prompt&&"-----"!==t[36].guessed_prompt?o?o.p(t,r):(o=Mt(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null)},d(t){t&&w(e),o&&o.d()}}}function Kt(t){let n,o,r,s,l,c,u,a,d,p=t[7],f=[];for(let e=0;e<p.length;e+=1)f[e]=Vt(Nt(t,p,e));return{c(){n=$("div"),o=$("div"),r=$("div"),s=$("select");for(let t=0;t<f.length;t+=1)f[t].c();l=b(),c=$("div"),u=$("button"),u.textContent="Send!",C(s,"class","input-block"),void 0===t[3]&&M(()=>t[23].call(s)),C(r,"class","form-group"),C(o,"class","col sm-10"),C(u,"class","button"),C(c,"class","col sm-2"),C(n,"class","row svelte-x46n78")},m(e,i){h(e,n,i),g(n,o),g(o,r),g(r,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);j(s,t[3]),g(n,l),g(n,c),g(c,u),a||(d=[y(s,"change",t[23]),y(u,"click",t[17])],a=!0)},p(t,e){if(640&e[0]){let n;for(p=t[7],n=0;n<p.length;n+=1){const o=Nt(t,p,n);f[n]?f[n].p(o,e):(f[n]=Vt(o),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=p.length}136&e[0]&&j(s,t[3])},i:e,o:e,d(t){t&&w(n),v(f,t),a=!1,i(d)}}}function zt(t){let e,n,o,r,s=t[8],i=[];for(let e=0;e<s.length;e+=1)i[e]=Yt(Tt(t,s,e));const l=t=>Q(i[t],1,1,()=>{i[t]=null});return{c(){e=$("h2"),e.textContent="Got votes:",n=b(),o=$("div");for(let t=0;t<i.length;t+=1)i[t].c();C(e,"class","has-text-centered"),C(o,"class","centered-flex")},m(t,s){h(t,e,s),h(t,n,s),h(t,o,s);for(let t=0;t<i.length;t+=1)i[t].m(o,null);r=!0},p(t,e){if(16640&e[0]){let n;for(s=t[8],n=0;n<s.length;n+=1){const r=Tt(t,s,n);i[n]?(i[n].p(r,e),X(i[n],1)):(i[n]=Yt(r),i[n].c(),X(i[n],1),i[n].m(o,null))}for(F(),n=s.length;n<i.length;n+=1)l(n);J()}},i(t){if(!r){for(let t=0;t<s.length;t+=1)X(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);r=!1},d(t){t&&w(e),t&&w(n),t&&w(o),v(i,t)}}}function Ht(t){let e,n,o,r=t[36].guessed_prompt+"";return{c(){e=$("option"),n=k(r),e.__value=o=t[36].guesser_username,e.value=e.__value},m(t,o){h(t,e,o),g(e,n)},p(t,s){128&s[0]&&r!==(r=t[36].guessed_prompt+"")&&A(n,r),128&s[0]&&o!==(o=t[36].guesser_username)&&(e.__value=o,e.value=e.__value)},d(t){t&&w(e)}}}function Vt(t){let e,n=t[36].guesser_username!==t[9]&&Ht(t);return{c(){n&&n.c(),e=x()},m(t,o){n&&n.m(t,o),h(t,e,o)},p(t,o){t[36].guesser_username!==t[9]?n?n.p(t,o):(n=Ht(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&w(e)}}}function Yt(t){let e,n;return e=new lt({props:{user:t[14](t[33].voter_username)}}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){const o={};256&n[0]&&(o.user=t[14](t[33].voter_username)),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Ft(t){let n,o,r,s,l,c,u,a,d,p,f;return{c(){n=$("div"),o=$("div"),r=$("div"),s=$("input"),l=b(),c=$("div"),u=$("button"),a=k("Send!"),C(s,"class","input-block"),C(s,"type","text"),C(s,"placeholder","Your guess"),s.required=!0,C(r,"class","form-group"),C(o,"class","col sm-10"),C(u,"class","button is-info is-large"),u.disabled=d=0===t[13].length,C(c,"class","col sm-2"),C(n,"class","row svelte-x46n78")},m(e,i){h(e,n,i),g(n,o),g(o,r),g(r,s),P(s,t[13]),g(n,l),g(n,c),g(c,u),g(u,a),p||(f=[y(s,"input",t[22]),y(u,"click",t[16])],p=!0)},p(t,e){8192&e[0]&&s.value!==t[13]&&P(s,t[13]),8192&e[0]&&d!==(d=0===t[13].length)&&(u.disabled=d)},i:e,o:e,d(t){t&&w(n),p=!1,i(f)}}}function Jt(t){let e,n,o,r,s=t[7],i=[];for(let e=0;e<s.length;e+=1)i[e]=Xt(Ot(t,s,e));const l=t=>Q(i[t],1,1,()=>{i[t]=null});return{c(){e=$("h2"),e.textContent="Got guesses:",n=b(),o=$("div");for(let t=0;t<i.length;t+=1)i[t].c();C(e,"class","has-text-centered"),C(o,"class","centered-flex")},m(t,s){h(t,e,s),h(t,n,s),h(t,o,s);for(let t=0;t<i.length;t+=1)i[t].m(o,null);r=!0},p(t,e){if(16512&e[0]){let n;for(s=t[7],n=0;n<s.length;n+=1){const r=Ot(t,s,n);i[n]?(i[n].p(r,e),X(i[n],1)):(i[n]=Xt(r),i[n].c(),X(i[n],1),i[n].m(o,null))}for(F(),n=s.length;n<i.length;n+=1)l(n);J()}},i(t){if(!r){for(let t=0;t<s.length;t+=1)X(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);r=!1},d(t){t&&w(e),t&&w(n),t&&w(o),v(i,t)}}}function Xt(t){let e,n;return e=new lt({props:{user:t[14](t[13].guesser_username)}}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){const o={};128&n[0]&&(o.user=t[14](t[13].guesser_username)),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Qt(t){let e,n,o,r,s,i,l,c,u,a,d;function p(t,e){return t[1]===t[15].WRITE_GUESS?Ut:t[1]===t[15].PICK_GUESS?Gt:Lt}let f=p(t),m=f(t);n=new bt({props:{lines:t[0].lines,editable:!1}});const v=[Wt,Rt,It,Dt],_=[];function x(t,e){return t[1]===t[15].WRITE_GUESS?0:t[1]===t[15].PICK_GUESS?1:t[1]===t[15].SCORE?2:t[1]===t[15].LEADERBOARD?3:-1}return~(r=x(t))&&(s=_[r]=v[r](t)),{c(){m.c(),e=b(),Z(n.$$.fragment),o=b(),s&&s.c(),i=b(),l=$("progress"),c=b(),u=$("h1"),a=k(t[11]),C(l,"class","progress margin-bottom svelte-x46n78"),l.value=t[12],N(l,"success",t[12]<.5),N(l,"warning",t[12]>=.5&&t[12]<.8),N(l,"danger",t[12]>=.8),C(u,"class","has-text-centered svelte-x46n78")},m(t,s){m.m(t,s),h(t,e,s),tt(n,t,s),h(t,o,s),~r&&_[r].m(t,s),h(t,i,s),h(t,l,s),h(t,c,s),h(t,u,s),g(u,a),d=!0},p(t,o){f!==(f=p(t))&&(m.d(1),m=f(t),m&&(m.c(),m.m(e.parentNode,e)));const c={};1&o[0]&&(c.lines=t[0].lines),n.$set(c);let u=r;r=x(t),r===u?~r&&_[r].p(t,o):(s&&(F(),Q(_[u],1,1,()=>{_[u]=null}),J()),~r?(s=_[r],s||(s=_[r]=v[r](t),s.c()),X(s,1),s.m(i.parentNode,i)):s=null),(!d||4096&o[0])&&(l.value=t[12]),4096&o[0]&&N(l,"success",t[12]<.5),4096&o[0]&&N(l,"warning",t[12]>=.5&&t[12]<.8),4096&o[0]&&N(l,"danger",t[12]>=.8),(!d||2048&o[0])&&A(a,t[11])},i(t){d||(X(n.$$.fragment,t),X(s),d=!0)},o(t){Q(n.$$.fragment,t),Q(s),d=!1},d(t){m.d(t),t&&w(e),et(n,t),t&&w(o),~r&&_[r].d(t),t&&w(i),t&&w(l),t&&w(c),t&&w(u)}}}function Zt(t,e,n){let o,r,s,i;u(t,gt,t=>n(26,o=t)),u(t,ft,t=>n(9,r=t)),u(t,mt,t=>n(10,s=t));let l=[...o.drawings];const c={WRITE_GUESS:"write_guess",PICK_GUESS:"pick_guess",SCORE:"scoring",LEADERBOARD:"leaderboard"};let a,d=l[0],p=c.WRITE_GUESS,f="",m=!1,g=!1,h=[],w=[],v=[],$=[];function _(){0!=l.length?(n(0,d=l.shift()),v.push({real_prompt:d.prompt,guessed_prompt:d.prompt,guesser_username:d.username}),n(8,$=[]),n(1,p=c.WRITE_GUESS),n(2,m=d.username===r),n(13,f=""),n(5,h=[]),C.set(0,{duration:1e3}).then(()=>C.set(1)).then(()=>{m||alert("Please send a guess!")}),d.prompt===s&&(n(13,f="-----"),k())):alert("The end!")}let k=function(){n(2,m=!0)};let b=function(){console.log("sendVote message",a),n(4,g=!0)},x=function(t){n(5,h=[...h,t]),console.log("givePoint to username",t)};function y(){n(7,v=[]),n(1,p=c.LEADERBOARD),n(6,w=[...E]),w.sort((t,e)=>100*(e.score-t.score)+e.lol_score-t.lol_score),n(6,w),C.set(.7,{duration:1e3}).then(()=>C.set(1,{duration:18e3})).then(_)}const C=Ct(0,{duration:6e4});u(t,C,t=>n(12,i=t)),_();let E,A;return t.$$.update=()=>{67108864&t.$$.dirty[0]&&(E=[...o.users]),4096&t.$$.dirty[0]&&n(11,A=Math.floor(60*(1-i)))},[d,p,m,a,g,h,w,v,$,r,s,A,i,f,function(t){for(let e of E)if(e.username===t)return e;throw Error("User "+t+" not found")},c,k,b,x,C,t=>{v.push(t),v.sort((t,e)=>t.guessed_prompt.localeCompare(e.guessed_prompt)),n(7,v),v.length===E.length&&(n(1,p=c.PICK_GUESS),n(4,g=!1),r===d.username&&(n(3,a=d.username),b()),s===d.prompt&&(n(3,a=r),b()),C.set(0,{duration:1e3}).then(()=>C.set(1)).then(()=>{g||alert("Please send a vote!")}))},t=>{console.log(t),n(8,$=[...$,t]),console.log($),$.length===E.length&&(n(1,p=c.SCORE),C.set(.7,{duration:1e3}).then(()=>C.set(1,{duration:18e3})).then(y))},function(){f=this.value,n(13,f)},function(){a=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(3,a),n(7,v)},t=>x(t.guesser_username)]}class te extends rt{constructor(t){super(),ot(this,t,Zt,Qt,c,{onGuess:20,onVote:21},[-1,-1])}get onGuess(){return this.$$.ctx[20]}get onVote(){return this.$$.ctx[21]}}function ee(t,e,n){const o=t.slice();return o[14]=e[n],o}function ne(t,e,n){const o=t.slice();return o[11]=e[n],o}function oe(t){let n,o,r,s=t[2].phase+"";return{c(){n=$("h1"),o=k("UNKNOWN STATE AAAA!!!! "),r=k(s),C(n,"class","has-text-centered")},m(t,e){h(t,n,e),g(n,o),g(n,r)},p(t,e){4&e&&s!==(s=t[2].phase+"")&&A(r,s)},i:e,o:e,d(t){t&&w(n)}}}function re(t){let e,n;return e=new te({props:{}}),t[8](e),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){e.$set({})},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(n){t[8](null),et(e,n)}}}function se(t){let e,n,o,r,s;const i=[ce,le],l=[];function c(t,n){return 12&n&&(e=!!t[2].drawings.some(t[7])),e?0:1}return n=c(t,-1),o=l[n]=i[n](t),{c(){o.c(),r=x()},m(t,e){l[n].m(t,e),h(t,r,e),s=!0},p(t,e){let s=n;n=c(t,e),n===s?l[n].p(t,e):(F(),Q(l[s],1,1,()=>{l[s]=null}),J(),o=l[n],o||(o=l[n]=i[n](t),o.c()),X(o,1),o.m(r.parentNode,r))},i(t){s||(X(o),s=!0)},o(t){Q(o),s=!1},d(t){l[n].d(t),t&&w(r)}}}function ie(t){let e,n,o,r;const s=[de,ae],i=[];function l(t,e){return""===t[3]?0:1}return e=l(t),n=i[e]=s[e](t),{c(){n.c(),o=x()},m(t,n){i[e].m(t,n),h(t,o,n),r=!0},p(t,r){let c=e;e=l(t),e===c?i[e].p(t,r):(F(),Q(i[c],1,1,()=>{i[c]=null}),J(),n=i[e],n||(n=i[e]=s[e](t),n.c()),X(n,1),n.m(o.parentNode,o))},i(t){r||(X(n),r=!0)},o(t){Q(n),r=!1},d(t){i[e].d(t),t&&w(o)}}}function le(t){let n,o,r,s;return r=new Pt({}),{c(){n=$("h1"),n.textContent="Let's draw!",o=b(),Z(r.$$.fragment),C(n,"class","has-text-centered")},m(t,e){h(t,n,e),h(t,o,e),tt(r,t,e),s=!0},p:e,i(t){s||(X(r.$$.fragment,t),s=!0)},o(t){Q(r.$$.fragment,t),s=!1},d(t){t&&w(n),t&&w(o),et(r,t)}}}function ce(t){let e,n,o,r,s=t[2].drawings,i=[];for(let e=0;e<s.length;e+=1)i[e]=ue(ee(t,s,e));const l=t=>Q(i[t],1,1,()=>{i[t]=null});return{c(){e=$("h1"),e.textContent="Waiting for other players to finish drawing, got:",n=b(),o=$("div");for(let t=0;t<i.length;t+=1)i[t].c();C(e,"class","has-text-centered"),C(o,"class","centered-flex")},m(t,s){h(t,e,s),h(t,n,s),h(t,o,s);for(let t=0;t<i.length;t+=1)i[t].m(o,null);r=!0},p(t,e){if(20&e){let n;for(s=t[2].drawings,n=0;n<s.length;n+=1){const r=ee(t,s,n);i[n]?(i[n].p(r,e),X(i[n],1)):(i[n]=ue(r),i[n].c(),X(i[n],1),i[n].m(o,null))}for(F(),n=s.length;n<i.length;n+=1)l(n);J()}},i(t){if(!r){for(let t=0;t<s.length;t+=1)X(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);r=!1},d(t){t&&w(e),t&&w(n),t&&w(o),v(i,t)}}}function ue(t){let e,n;return e=new lt({props:{user:t[4](t[14].username)}}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.user=t[4](t[14].username)),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function ae(t){let e,n,o,r,s,i,l,c,u,a,d=t[1],p=[];for(let e=0;e<d.length;e+=1)p[e]=pe(ne(t,d,e));const f=t=>Q(p[t],1,1,()=>{p[t]=null});return{c(){e=$("h1"),e.textContent="Waiting for other players",n=b(),o=$("div");for(let t=0;t<p.length;t+=1)p[t].c();r=b(),s=$("button"),i=k("Everybody in!"),C(e,"class","has-text-centered"),C(o,"class","centered-flex"),C(s,"class","button centered-flex"),s.disabled=l=t[1].length<4},m(l,d){h(l,e,d),h(l,n,d),h(l,o,d);for(let t=0;t<p.length;t+=1)p[t].m(o,null);h(l,r,d),h(l,s,d),g(s,i),c=!0,u||(a=y(s,"click",t[6]),u=!0)},p(t,e){if(2&e){let n;for(d=t[1],n=0;n<d.length;n+=1){const r=ne(t,d,n);p[n]?(p[n].p(r,e),X(p[n],1)):(p[n]=pe(r),p[n].c(),X(p[n],1),p[n].m(o,null))}for(F(),n=d.length;n<p.length;n+=1)f(n);J()}(!c||2&e&&l!==(l=t[1].length<4))&&(s.disabled=l)},i(t){if(!c){for(let t=0;t<d.length;t+=1)X(p[t]);c=!0}},o(t){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)Q(p[t]);c=!1},d(t){t&&w(e),t&&w(n),t&&w(o),v(p,t),t&&w(r),t&&w(s),u=!1,a()}}}function de(t){let n,o;return n=new at({}),n.$on("login",t[5]),{c(){Z(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:e,i(t){o||(X(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function pe(t){let e,n;return e=new lt({props:{user:t[11]}}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.user=t[11]),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function fe(t){let e,n,o,r;const s=[ie,se,re,oe],i=[];function l(t,e){return"login"===t[2].phase?0:"draw"===t[2].phase?1:"guess"===t[2].phase?2:3}return n=l(t),o=i[n]=s[n](t),{c(){e=$("div"),o.c(),C(e,"class","container svelte-l24f7x")},m(t,o){h(t,e,o),i[n].m(e,null),r=!0},p(t,[r]){let c=n;n=l(t),n===c?i[n].p(t,r):(F(),Q(i[c],1,1,()=>{i[c]=null}),J(),o=i[n],o||(o=i[n]=s[n](t),o.c()),X(o,1),o.m(e,null))},i(t){r||(X(o),r=!0)},o(t){Q(o),r=!1},d(t){t&&w(e),i[n].d()}}}function me(t,e,n){let o,r;u(t,gt,t=>n(2,o=t)),u(t,ft,t=>n(3,r=t));var s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,s){function i(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((o=o.apply(t,e||[])).next())}))};let i,l;let c;return t.$$.update=()=>{4&t.$$.dirty&&n(1,c=[...o.users])},[l,c,o,r,function(t){for(let e of c)if(e.username===t)return e;throw Error("User "+t+" not found")},function(t){return s(this,void 0,void 0,(function*(){let e=t.detail.username;i=t.detail.img_src;let n=t.detail.prompt.toUpperCase();try{yield ht.login(e,i,n)}catch(t){return void alert(t)}ft.set(e),mt.set(n),console.log("Logged in: ",t.detail);let o=document.getElementById("telegram-login-minnybot");(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o)}))},function(){return s(this,void 0,void 0,(function*(){try{yield ht.startGame()}catch(t){alert(t)}}))},t=>t.username===r,function(t){D[t?"unshift":"push"](()=>{l=t,n(0,l)})}]}return new class extends rt{constructor(t){super(),ot(this,t,me,fe,c,{})}}({target:document.body,props:{}})}(io);
//# sourceMappingURL=bundle.js.map
