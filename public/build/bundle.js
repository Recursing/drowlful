var app=function(e){"use strict";function t(){}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const n=e=>e;function r(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function l(e){e.forEach(o)}function i(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let p=a?()=>window.performance.now():()=>Date.now(),d=a?e=>requestAnimationFrame(e):t;const f=new Set;function m(e){f.forEach(t=>{t.c(e)||(f.delete(t),t.f())}),0!==f.size&&d(m)}function h(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function w(e){return document.createTextNode(e)}function k(){return w(" ")}function x(){return w("")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function j(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function M(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function P(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function E(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function A(e,t,n){e.classList[n?"add":"remove"](t)}let N;function L(e){N=e}function O(e){(function(){if(!N)throw new Error("Function called outside component initialization");return N})().$$.on_mount.push(e)}const T=[],S=[],I=[],q=[],W=Promise.resolve();let D=!1;function U(e){I.push(e)}let G=!1;const F=new Set;function Y(){if(!G){G=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];L(t),B(t.$$)}for(L(null),T.length=0;S.length;)S.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];F.has(t)||(F.add(t),t())}I.length=0}while(T.length);for(;q.length;)q.pop()();D=!1,G=!1,F.clear()}}function B(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}const H=new Set;let X;function R(){X={r:0,c:[],p:X}}function K(){X.r||l(X.c),X=X.p}function V(e,t){e&&e.i&&(H.delete(e),e.i(t))}function J(e,t,n,r){if(e&&e.o){if(H.has(e))return;H.add(e),X.c.push(()=>{H.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Q="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Z(e,t){J(e,1,1,()=>{t.delete(e.key)})}function ee(e,t,n,r,o,s,l,i,c,u,a,p){let d=e.length,f=s.length,m=d;const h={};for(;m--;)h[e[m].key]=m;const g=[],v=new Map,_=new Map;for(m=f;m--;){const e=p(o,s,m),i=n(e);let c=l.get(i);c?r&&c.p(e,t):(c=u(i,e),c.c()),v.set(i,g[m]=c),i in h&&_.set(i,Math.abs(m-h[i]))}const $=new Set,y=new Set;function w(e){V(e,1),e.m(i,a),l.set(e.key,e),a=e.first,f--}for(;d&&f;){const t=g[f-1],n=e[d-1],r=t.key,o=n.key;t===n?(a=t.first,d--,f--):v.has(o)?!l.has(r)||$.has(r)?w(t):y.has(o)?d--:_.get(r)>_.get(o)?(y.add(r),w(t)):($.add(o),d--):(c(n,l),d--)}for(;d--;){const t=e[d];v.has(t.key)||c(t,l)}for(;f;)w(g[f-1]);return g}function te(e){e&&e.c()}function ne(e,t,n){const{fragment:r,on_mount:s,on_destroy:c,after_update:u}=e.$$;r&&r.m(t,n),U(()=>{const t=s.map(o).filter(i);c?c.push(...t):l(t),e.$$.on_mount=[]}),u.forEach(U)}function re(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function oe(e,t){-1===e.$$.dirty[0]&&(T.push(e),D||(D=!0,W.then(Y)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,n,r,o,i,c,u=[-1]){const a=N;L(e);const p=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:s(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=r?r(e,p,(t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&oe(e,t)),n}):[],d.update(),f=!0,l(d.before_update),d.fragment=!!o&&o(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(v)}else d.fragment&&d.fragment.c();n.intro&&V(e.$$.fragment),ne(e,n.target,n.anchor),Y()}L(a)}class le{$destroy(){re(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ie(e){let n,r,o,s,l,i,c=(e[0]?e[0].username:"")+"";return{c(){n=$("div"),r=$("img"),s=k(),l=$("p"),i=w(c),C(r,"alt","user pic"),r.src!==(o=e[0]?e[0].img_src:"")&&C(r,"src",o),C(r,"class","svelte-1h94cko"),C(l,"class","has-text-centered svelte-1h94cko"),C(n,"class","card svelte-1h94cko")},m(e,t){g(e,n,t),h(n,r),h(n,s),h(n,l),h(l,i)},p(e,[t]){1&t&&r.src!==(o=e[0]?e[0].img_src:"")&&C(r,"src",o),1&t&&c!==(c=(e[0]?e[0].username:"")+"")&&j(i,c)},i:t,o:t,d(e){e&&v(n)}}}function ce(e,t,n){let{user:r}=t;return e.$$set=e=>{"user"in e&&n(0,r=e.user)},[r]}class ue extends le{constructor(e){super(),se(this,e,ce,ie,c,{user:0})}}const ae=[];function pe(e,n=t){let r;const o=[];function s(t){if(c(e,t)&&(e=t,r)){const t=!ae.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),ae.push(n,e)}if(t){for(let e=0;e<ae.length;e+=2)ae[e][0](ae[e+1]);ae.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,i=t){const c=[l,i];return o.push(c),1===o.length&&(r=n(s)||t),l(e),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const de=pe({users:[],phase:"login",drawings:[],guesses:[],votes:[],lol_votes:[],current_prompt:""});let fe=pe(""),me="";fe.subscribe(e=>me=e),de.subscribe(e=>{if("guess"===e.phase){const t=new Map,n=new Map;for(let r of e.users)t.set(r.username,r.score),n.set(r.username,r.lol_score);he.set(t),ge.set(t)}e.users.some(e=>e.username===me)||fe.set("")});let he=pe(new Map),ge=pe(new Map);const ve=new class{constructor(){const t="localhost"===document.location.hostname?"ws":"wss";this.socket=e(`${t}://${document.location.hostname}:8000`),this.socket.on("update state",e=>{console.log(e),de.set(e)})}async login(e,t,n){return this.socket.emit("login",e,t,n),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async startGame(){return this.socket.emit("start game"),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendDrawing(e){return this.socket.emit("drawing",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendGuess(e){return this.socket.emit("guess",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendVote(e){return this.socket.emit("vote",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendLOL(e){return this.socket.emit("lol vote",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async relogin(e){return this.socket.emit("relogin",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async late_login(e,t){return this.socket.emit("late login",e,t),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}};function _e(e,t,n){const r=e.slice();return r[22]=t[n],r}function $e(e){let t,n,r,o,s,i,c,u,a,p,d,f,m,y,x,z,M=e[4].users,E=[];for(let t=0;t<M.length;t+=1)E[t]=xe(_e(e,M,t));return{c(){t=$("button"),t.textContent="Login as new player",n=k(),r=$("div"),o=$("div"),s=$("select"),i=$("option"),i.textContent="Select username\n        ";for(let e=0;e<E.length;e+=1)E[e].c();a=k(),p=$("div"),d=$("button"),f=w("Login as "),m=w(e[0]),C(t,"class","svelte-18elvi9"),i.disabled=c=!0,i.selected=u=!0,i.__value="",i.value=i.__value,C(s,"class","svelte-18elvi9"),void 0===e[0]&&U(()=>e[18].call(s)),C(o,"class","col sm-6"),d.disabled=y=!e[0],C(d,"class","btn-block svelte-18elvi9"),C(p,"class","col sm-6"),C(r,"class","row")},m(l,c){g(l,t,c),g(l,n,c),g(l,r,c),h(r,o),h(o,s),h(s,i);for(let e=0;e<E.length;e+=1)E[e].m(s,null);P(s,e[0]),h(r,a),h(r,p),h(p,d),h(d,f),h(d,m),x||(z=[b(t,"click",e[17]),b(s,"change",e[18]),b(d,"click",e[6])],x=!0)},p(e,t){if(16&t){let n;for(M=e[4].users,n=0;n<M.length;n+=1){const r=_e(e,M,n);E[n]?E[n].p(r,t):(E[n]=xe(r),E[n].c(),E[n].m(s,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=M.length}17&t&&P(s,e[0]),1&t&&j(m,e[0]),17&t&&y!==(y=!e[0])&&(d.disabled=y)},d(e){e&&v(t),e&&v(n),e&&v(r),_(E,e),x=!1,l(z)}}}function ye(e){let t,n,r,o,s,i,c,u,a,p,d,f,m,_,y,w,x,j,M;return{c(){t=$("button"),t.textContent="Login as existing player",n=k(),r=$("div"),o=$("div"),s=$("div"),i=$("label"),i.textContent="Username",c=k(),u=$("input"),a=k(),p=$("div"),d=$("div"),f=$("label"),f.textContent="Image url",m=k(),_=$("input"),y=k(),w=$("div"),x=$("button"),x.textContent="Login as new player",C(t,"class","svelte-18elvi9"),C(i,"for","paperInputs2"),C(u,"id","username-input"),C(u,"class","input-block"),C(u,"type","text"),C(u,"placeholder","Username"),u.required=!0,C(s,"class","form-group"),C(o,"class","col sm-4"),C(f,"for","paperInputs3"),C(_,"id","image-url-input"),C(_,"class","input-block"),C(_,"type","url"),_.required=!0,C(d,"class","form-group"),C(p,"class","col sm-8"),C(r,"class","row"),C(x,"class","svelte-18elvi9"),C(w,"class","col")},m(l,v){g(l,t,v),g(l,n,v),g(l,r,v),h(r,o),h(o,s),h(s,i),h(s,c),h(s,u),z(u,e[0]),h(r,a),h(r,p),h(p,d),h(d,f),h(d,m),h(d,_),z(_,e[2]),g(l,y,v),g(l,w,v),h(w,x),j||(M=[b(t,"click",e[14]),b(u,"input",e[15]),b(_,"input",e[16]),b(x,"click",e[7])],j=!0)},p(e,t){17&t&&u.value!==e[0]&&z(u,e[0]),4&t&&z(_,e[2])},d(e){e&&v(t),e&&v(n),e&&v(r),e&&v(y),e&&v(w),j=!1,l(M)}}}function we(e){let n,r,o,s,i,c;return{c(){n=$("div"),r=$("button"),r.textContent="Login as new player",o=k(),s=$("button"),s.textContent="Login as existing player",C(r,"class","svelte-18elvi9"),C(s,"class","svelte-18elvi9"),C(n,"class","centered-flex")},m(t,l){g(t,n,l),h(n,r),h(n,o),h(n,s),i||(c=[b(r,"click",e[12]),b(s,"click",e[13])],i=!0)},p:t,d(e){e&&v(n),i=!1,l(c)}}}function ke(e){let t,n,r,o,s,i,c,u,a,p,d,f,m,_,y,w,x,j,M;return{c(){t=$("div"),n=$("div"),r=$("div"),o=$("label"),o.textContent="Username",s=k(),i=$("input"),c=k(),u=$("div"),a=$("div"),p=$("label"),p.textContent="Image url",d=k(),f=$("input"),m=k(),_=$("div"),y=$("input"),w=k(),x=$("button"),x.textContent="Login",C(o,"for","paperInputs2"),C(i,"id","username-input"),C(i,"class","input-block"),C(i,"type","text"),C(i,"placeholder","Username"),i.required=!0,C(r,"class","form-group"),C(n,"class","col sm-4"),C(p,"for","paperInputs3"),C(f,"id","image-url-input"),C(f,"class","input-block"),C(f,"type","url"),f.required=!0,C(a,"class","form-group"),C(u,"class","col sm-8"),C(t,"class","row"),C(y,"class","width-100 input-block svelte-18elvi9"),C(y,"type","text"),C(y,"placeholder","Your prompt"),y.required=!0,C(_,"class","row"),C(x,"class","width-60 btn-block svelte-18elvi9")},m(l,v){g(l,t,v),h(t,n),h(n,r),h(r,o),h(r,s),h(r,i),z(i,e[0]),h(t,c),h(t,u),h(u,a),h(a,p),h(a,d),h(a,f),z(f,e[2]),g(l,m,v),g(l,_,v),h(_,y),z(y,e[1]),g(l,w,v),g(l,x,v),j||(M=[b(i,"input",e[8]),b(f,"input",e[9]),b(y,"input",e[10]),b(y,"keyup",e[11]),b(x,"click",e[5])],j=!0)},p(e,t){17&t&&i.value!==e[0]&&z(i,e[0]),4&t&&z(f,e[2]),2&t&&y.value!==e[1]&&z(y,e[1])},d(e){e&&v(t),e&&v(m),e&&v(_),e&&v(w),e&&v(x),j=!1,l(M)}}}function xe(e){let t,n,r,o,s=e[22].username+"";return{c(){t=$("option"),n=w(s),r=k(),t.__value=o=e[22].username,t.value=t.__value},m(e,o){g(e,t,o),h(t,n),h(t,r)},p(e,r){16&r&&s!==(s=e[22].username+"")&&j(n,s),16&r&&o!==(o=e[22].username)&&(t.__value=o,t.value=t.__value)},d(e){e&&v(t)}}}function be(e){let n;function r(e,t){return"login"===e[4].phase?ke:"login"===e[3]?we:"late login"===e[3]?ye:$e}let o=r(e),s=o(e);return{c(){s.c(),n=x()},m(e,t){s.m(e,t),g(e,n,t)},p(e,[t]){o===(o=r(e))&&s?s.p(e,t):(s.d(1),s=o(e),s&&(s.c(),s.m(n.parentNode,n)))},i:t,o:t,d(e){s.d(e),e&&v(n)}}}function Ce(e,t,n){let r;u(e,de,e=>n(4,r=e));var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function l(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))};let s="",l="";const i=["https://upload.wikimedia.org/wikipedia/en/a/a6/Pok%C3%A9mon_Pikachu_art.png","https://upload.wikimedia.org/wikipedia/en/2/28/Pok%C3%A9mon_Bulbasaur_art.png","https://upload.wikimedia.org/wikipedia/en/5/59/Pok%C3%A9mon_Squirtle_art.png","https://upload.wikimedia.org/wikipedia/en/a/a5/Pok%C3%A9mon_Charmander_art.png","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Jigglypuff_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pok%C3%A9mon_Meowth_art.png","https://upload.wikimedia.org/wikipedia/en/a/a9/Pok%C3%A9mon_Eevee_art.png","https://upload.wikimedia.org/wikipedia/en/4/40/Pok%C3%A9mon_Lapras_art.png","https://upload.wikimedia.org/wikipedia/en/1/1a/Pok%C3%A9mon_Chikorita_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pichu_artwork.png","https://upload.wikimedia.org/wikipedia/en/5/53/Pok%C3%A9mon_Togepi_art.png","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Mudkip_art.png"];let c=i[Math.floor(Math.random()*i.length)];function a(e){return o(this,void 0,void 0,(function*(){n(0,s=e.username||e.first_name+" "+e.last_name),console.log(JSON.stringify(e,null,2)),n(2,c=e.photo_url||c),console.log("Image src: "+c),yield p()}))}function p(){return o(this,void 0,void 0,(function*(){if(!l)return void alert("Write prompt first!");if(!s)return void alert("Empty username");if(!c)return void alert("Empty image");console.log("dispatching"),n(1,l=l.toUpperCase().trim());try{yield ve.login(s,c,l)}catch(e){return void alert(e)}fe.set(s),console.log("Logged in: ",s,c,l);let e=document.getElementById("telegram-login-minnybot");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}))}de.subscribe(e=>{for(;e.users.some(e=>e.img_src==c);)n(2,c=i[Math.floor(Math.random()*i.length)])});let d="login";O(()=>o(void 0,void 0,void 0,(function*(){window.onTelegramAuth=a})));return[s,l,c,d,r,p,function(){return o(this,void 0,void 0,(function*(){if(!s)return void alert("Empty username");try{yield ve.relogin(s)}catch(e){return void alert(e)}fe.set(s),console.log("Relogged in: ",s);let e=document.getElementById("telegram-login-minnybot");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}))},function(){return o(this,void 0,void 0,(function*(){if(!s)return void alert("Empty username");if(!c)return void alert("Empty image");try{yield ve.late_login(s,c)}catch(e){return void alert(e)}fe.set(s),console.log("Late logged in: ",s,c);let e=document.getElementById("telegram-login-minnybot");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}))},function(){s=this.value,n(0,s)},function(){c=this.value,n(2,c)},function(){l=this.value,n(1,l)},e=>"Enter"===e.code?p():null,()=>n(3,d="late login"),()=>n(3,d="relogin"),()=>n(3,d="relogin"),function(){s=this.value,n(0,s)},function(){c=this.value,n(2,c)},()=>n(3,d="late login"),function(){s=E(this),n(0,s)}]}class je extends le{constructor(e){super(),se(this,e,Ce,be,c,{})}}function ze(e,t,n){const r=e.slice();return r[18]=t[n],r}function Me(e){let t,n,r,o,s;return{c(){t=y("ellipse"),M(t,"fill",e[18].fill?e[18].stroke:"none"),M(t,"stroke",e[18].stroke),M(t,"stroke-width",e[18].width),C(t,"cx",n=(e[18].x1+e[18].x2)/2),C(t,"cy",r=(e[18].y1+e[18].y2)/2),C(t,"rx",o=Math.abs(e[18].x1-e[18].x2)/2),C(t,"ry",s=Math.abs(e[18].y1-e[18].y2)/2),C(t,"class","svelte-zsztg")},m(e,n){g(e,t,n)},p(e,l){13&l&&M(t,"fill",e[18].fill?e[18].stroke:"none"),13&l&&M(t,"stroke",e[18].stroke),13&l&&M(t,"stroke-width",e[18].width),13&l&&n!==(n=(e[18].x1+e[18].x2)/2)&&C(t,"cx",n),13&l&&r!==(r=(e[18].y1+e[18].y2)/2)&&C(t,"cy",r),13&l&&o!==(o=Math.abs(e[18].x1-e[18].x2)/2)&&C(t,"rx",o),13&l&&s!==(s=Math.abs(e[18].y1-e[18].y2)/2)&&C(t,"ry",s)},d(e){e&&v(t)}}}function Pe(e){let t,n;return{c(){t=y("polyline"),M(t,"fill",e[18].fill?e[18].stroke:"none"),M(t,"stroke",e[18].stroke),M(t,"stroke-width",e[18].width),C(t,"points",n=e[18].points.map(Le).join(" ")),C(t,"stroke-linecap","round"),C(t,"stroke-linejoin","round"),C(t,"class","svelte-zsztg")},m(e,n){g(e,t,n)},p(e,r){13&r&&M(t,"fill",e[18].fill?e[18].stroke:"none"),13&r&&M(t,"stroke",e[18].stroke),13&r&&M(t,"stroke-width",e[18].width),13&r&&n!==(n=e[18].points.map(Le).join(" "))&&C(t,"points",n)},d(e){e&&v(t)}}}function Ee(e){let t;function n(e,t){return"polyline"===e[18].type?Pe:"ellipse"===e[18].type?Me:void 0}let r=n(e),o=r&&r(e);return{c(){o&&o.c(),t=x()},m(e,n){o&&o.m(e,n),g(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o&&o.d(1),o=r&&r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o&&o.d(e),e&&v(t)}}}function Ae(e){let t,n,r,o,s,i,c,u,a,p,d,f,m,_,y,x,M,E,A,N,L,O,T,S,I,q,W,D,G,F,Y,B,H,X,R,K,V,J,Q,Z,ee,te,ne,re,oe,se,le,ie=e[2].width+"",ce=e[2].fill+"",ue=e[2].stroke+"";return{c(){t=$("div"),n=$("div"),r=$("label"),o=w("Size: "),s=w(ie),i=k(),c=$("input"),u=k(),a=$("label"),p=$("input"),d=k(),f=$("span"),m=w("Fill: "),_=w(ce),y=k(),x=$("div"),M=$("input"),E=k(),A=$("label"),A.textContent="Line",N=k(),L=$("input"),O=k(),T=$("label"),T.textContent="Ellipse",S=k(),I=$("label"),q=w("Color: "),W=w(ue),D=k(),G=$("input"),F=k(),Y=$("select"),B=$("option"),B.textContent="red",H=$("option"),H.textContent="orange",X=$("option"),X.textContent="yellow",R=$("option"),R.textContent="green",K=$("option"),K.textContent="cyan",V=$("option"),V.textContent="blue",J=$("option"),J.textContent="purple",Q=$("option"),Q.textContent="pink",Z=$("option"),Z.textContent="white",ee=$("option"),ee.textContent="black",te=$("option"),te.textContent="gray",ne=$("option"),ne.textContent="saddlebrown",re=k(),oe=$("button"),oe.textContent="UNDO",C(c,"type","range"),C(c,"min","1"),C(c,"max","40"),C(c,"class","svelte-zsztg"),C(p,"id","fill_checkbox"),C(p,"type","checkbox"),C(p,"class","svelte-zsztg"),C(M,"id","polyline"),C(M,"type","radio"),M.__value="polyline",M.value=M.__value,C(M,"class","svelte-zsztg"),e[13][0].push(M),C(A,"for","polyline"),C(L,"id","ellipse"),C(L,"type","radio"),L.__value="ellipse",L.value=L.__value,C(L,"class","svelte-zsztg"),e[13][0].push(L),C(T,"for","ellipse"),C(n,"class","svelte-zsztg"),C(G,"type","color"),C(G,"class","svelte-zsztg"),B.__value="#FF0000",B.value=B.__value,H.__value="#FFA500",H.value=H.__value,X.__value="#ffff00",X.value=X.__value,R.__value="#008000",R.value=R.__value,K.__value="#00ffff",K.value=K.__value,V.__value="#0000ff",V.value=V.__value,J.__value="#800080",J.value=J.__value,Q.__value="#ffc0cb",Q.value=Q.__value,Z.__value="#ffffff",Z.value=Z.__value,ee.__value="#000000",ee.value=ee.__value,te.__value="#808080",te.value=te.__value,ne.__value="#8b4513",ne.value=ne.__value,void 0===e[2].stroke&&U(()=>e[16].call(Y)),C(I,"class","svelte-zsztg"),C(oe,"class","svelte-zsztg"),C(t,"class","controls centered-flex svelte-zsztg")},m(l,v){g(l,t,v),h(t,n),h(n,r),h(r,o),h(r,s),h(r,i),h(r,c),z(c,e[4]),h(n,u),h(n,a),h(a,p),p.checked=e[2].fill,h(a,d),h(a,f),h(f,m),h(f,_),h(n,y),h(n,x),h(x,M),M.checked=M.__value===e[2].type,h(x,E),h(x,A),h(x,N),h(x,L),L.checked=L.__value===e[2].type,h(x,O),h(x,T),h(t,S),h(t,I),h(I,q),h(I,W),h(I,D),h(I,G),z(G,e[2].stroke),h(I,F),h(I,Y),h(Y,B),h(Y,H),h(Y,X),h(Y,R),h(Y,K),h(Y,V),h(Y,J),h(Y,Q),h(Y,Z),h(Y,ee),h(Y,te),h(Y,ne),P(Y,e[2].stroke),h(t,re),h(t,oe),se||(le=[b(c,"change",e[10]),b(c,"input",e[10]),b(p,"change",e[11]),b(M,"change",e[12]),b(L,"change",e[14]),b(G,"input",e[15]),b(Y,"change",e[16]),b(oe,"click",e[17])],se=!0)},p(e,t){4&t&&ie!==(ie=e[2].width+"")&&j(s,ie),16&t&&z(c,e[4]),4&t&&(p.checked=e[2].fill),4&t&&ce!==(ce=e[2].fill+"")&&j(_,ce),4&t&&(M.checked=M.__value===e[2].type),4&t&&(L.checked=L.__value===e[2].type),4&t&&ue!==(ue=e[2].stroke+"")&&j(W,ue),4&t&&z(G,e[2].stroke),4&t&&P(Y,e[2].stroke)},d(n){n&&v(t),e[13][0].splice(e[13][0].indexOf(M),1),e[13][0].splice(e[13][0].indexOf(L),1),se=!1,l(le)}}}function Ne(e){let n,r,o,s,i,c=e[3]?[...e[0],e[2]]:e[0],u=[];for(let t=0;t<c.length;t+=1)u[t]=Ee(ze(e,c,t));let a=e[1]&&Ae(e);return{c(){n=y("svg");for(let e=0;e<u.length;e+=1)u[e].c();r=k(),a&&a.c(),o=x(),C(n,"width","800"),C(n,"height","600"),C(n,"class","svelte-zsztg")},m(t,l){g(t,n,l);for(let e=0;e<u.length;e+=1)u[e].m(n,null);g(t,r,l),a&&a.m(t,l),g(t,o,l),s||(i=[b(window,"keydown",e[8]),b(window,"keyup",e[9]),b(n,"mousemove",e[7]),b(n,"mouseup",e[5]),b(n,"mousedown",e[6]),b(n,"mouseleave",e[5])],s=!0)},p(e,[t]){if(13&t){let r;for(c=e[3]?[...e[0],e[2]]:e[0],r=0;r<c.length;r+=1){const o=ze(e,c,r);u[r]?u[r].p(o,t):(u[r]=Ee(o),u[r].c(),u[r].m(n,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=c.length}e[1]?a?a.p(e,t):(a=Ae(e),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},i:t,o:t,d(e){e&&v(n),_(u,e),e&&v(r),a&&a.d(e),e&&v(o),s=!1,l(i)}}}const Le=([e,t])=>`${e},${t}`;function Oe(e,t,n){let{shapes:r=[]}=t,{editable:o=!0}=t,s={type:"polyline",stroke:"#ff0000",width:2,points:[],fill:!1},l=!1;let i=2;return e.$$set=e=>{"shapes"in e&&n(0,r=e.shapes),"editable"in e&&n(1,o=e.editable)},e.$$.update=()=>{var t;16&e.$$.dirty&&n(2,s.width=(t=i)+Math.max(0,t-10)+Math.max(0,t-20)+Math.max(0,t-30),s)},[r,o,s,l,i,function(){if(l){switch(n(3,l=!1),s.type){case"polyline":if(s.points.length<2)return;break;case"ellipse":if(s.y1===s.y2||s.x1===s.x2)return}r.push(Object.assign({},s)),n(0,r)}},function(e){if(o)switch(n(3,l=!0),s.type){case"polyline":n(2,s.points=[[e.offsetX,e.offsetY]],s);break;case"ellipse":n(2,s.y1=n(2,s.y2=e.offsetY,s),s),n(2,s.x1=n(2,s.x2=e.offsetX,s),s)}},function(e){if(l)switch(s.type){case"polyline":e.shiftKey?n(2,s.points=[s.points[0],[e.offsetX,e.offsetY]],s):(s.points.push([e.offsetX,e.offsetY]),n(2,s),n(4,i));break;case"ellipse":n(2,s.y2=e.offsetY,s),n(2,s.x2=e.offsetX,s)}},function(e){"Alt"===e.key&&n(2,s.fill=!0,s)},function(e){"Alt"===e.key&&n(2,s.fill=!1,s)},function(){var e;e=this.value,i=""===e?null:+e,n(4,i)},function(){s.fill=this.checked,n(2,s),n(4,i)},function(){s.type=this.__value,n(2,s),n(4,i)},[[]],function(){s.type=this.__value,n(2,s),n(4,i)},function(){s.stroke=this.value,n(2,s),n(4,i)},function(){s.stroke=E(this),n(2,s),n(4,i)},()=>{r.length>0&&n(0,r=r.slice(0,r.length-1))}]}class Te extends le{constructor(e){super(),se(this,e,Oe,Ne,c,{shapes:0,editable:1})}}function Se(e){let t,n,r,o,s,l,i,c,u,a,p,d;function f(t){e[3].call(null,t)}let m={};return void 0!==e[0]&&(m.shapes=e[0]),o=new Te({props:m}),S.push(()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(o,"shapes",f)),{c(){t=$("h1"),n=w(e[1]),r=k(),te(o.$$.fragment),l=k(),i=$("button"),c=w("Done!"),C(t,"class","has-text-centered svelte-11z6e2m"),i.disabled=u=0===e[0].length,C(i,"class","svelte-11z6e2m")},m(s,u){g(s,t,u),h(t,n),g(s,r,u),ne(o,s,u),g(s,l,u),g(s,i,u),h(i,c),a=!0,p||(d=b(i,"click",e[2],{once:!0}),p=!0)},p(e,[t]){(!a||2&t)&&j(n,e[1]);const r={};var l;!s&&1&t&&(s=!0,r.shapes=e[0],l=()=>s=!1,q.push(l)),o.$set(r),(!a||1&t&&u!==(u=0===e[0].length))&&(i.disabled=u)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){J(o.$$.fragment,e),a=!1},d(e){e&&v(t),e&&v(r),re(o,e),e&&v(l),e&&v(i),p=!1,d()}}}function Ie(e,t,n){let r,o;u(e,de,e=>n(5,r=e)),u(e,fe,e=>n(6,o=e));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function l(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))};let l,i,c,a=[];return e.$$.update=()=>{96&e.$$.dirty&&n(4,l=r.users.find(e=>e.username===o)),16&e.$$.dirty&&n(1,i=l?l.assigned_prompt:""),96&e.$$.dirty&&(c=r.drawings.some(e=>e.username===o))},[a,i,function(){return s(this,void 0,void 0,(function*(){if(!c&&confirm("Send Drawing?")){console.log("sendDrawing:",a,i);try{yield ve.sendDrawing({shapes:a,prompt:i,username:o})}catch(e){alert(e)}c=!0}}))},function(e){a=e,n(0,a)}]}class qe extends le{constructor(e){super(),se(this,e,Ie,Se,c,{})}}const We=e=>{const t=Math.abs(e.x2-e.x1)/2,n=Math.abs(e.y2-e.y1)/2,r=((t-n)/(t+n))**2;return Math.PI*(t+n)*(1+3*r/(10+Math.sqrt(4-3*r)))},De=e=>"polyline"===e.type?(e=>{if(0===e.length)return 0;let t=0,[n,r]=e[0];for(let[o,s]of e)t+=Math.sqrt((s-r)**2+(o-n)**2),n=o,r=s;return t})(e.points):We(e),Ue=(e,t)=>"polyline"===e.type?((e,t)=>{let n=[];if(e.points.length<2)return e;let[r,o]=e.points[0];for(let[s,l]of e.points){let e=Math.sqrt((l-o)**2+(s-r)**2);if(!(e<=t)){let i=t/e;s=r+(s-r)*i,l=o+(l-o)*i,n.push([s,l]);break}n.push([s,l]),t-=e,r=s,o=l}return Object.assign(Object.assign({},e),{points:n})})(e,t):((e,t)=>{const n=t/We(e);return Object.assign(Object.assign({},e),{x2:e.x1+(e.x2-e.x1)*n,y2:e.y1+(e.y2-e.y1)*n})})(e,t);function Ge(e){return"[object Date]"===Object.prototype.toString.call(e)}function Fe(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((t,n)=>Fe(e[n],t));return e=>n.map(t=>t(e))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(Ge(e)&&Ge(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach(n=>{r[n]=Fe(e[n],t[n])}),e=>{const t={};return n.forEach(n=>{t[n]=r[n](e)}),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function Ye(e,t={}){const o=pe(e);let s,l=e;function i(i,c){if(null==e)return o.set(e=i),Promise.resolve();l=i;let u=s,a=!1,{delay:h=0,duration:g=400,easing:v=n,interpolate:_=Fe}=r(r({},t),c);if(0===g)return u&&(u.abort(),u=null),o.set(e=l),Promise.resolve();const $=p()+h;let y;return s=function(e){let t;return 0===f.size&&d(m),{promise:new Promise(n=>{f.add(t={c:e,f:n})}),abort(){f.delete(t)}}}(t=>{if(t<$)return!0;a||(y=_(e,i),"function"==typeof g&&(g=g(e,i)),a=!0),u&&(u.abort(),u=null);const n=t-$;return n>g?(o.set(e=i),!1):(o.set(e=y(v(n/g))),!0)}),s.promise}return{set:i,update:(t,n)=>i(t(l,e),n),subscribe:o.subscribe}}function Be(e,t,n){const r=e.slice();return r[45]=t[n],r}function He(e,t,n){const r=e.slice();return r[45]=t[n],r}function Xe(e,t,n){const r=e.slice();return r[34]=t[n],r}function Re(e,t,n){const r=e.slice();return r[42]=t[n],r}function Ke(e,t,n){const r=e.slice();return r[34]=t[n],r}function Ve(e,t,n){const r=e.slice();return r[37]=t[n],r}function Je(e){let n;return{c(){n=$("h1"),n.textContent="UNKNOWN PHASE",C(n,"class","has-text-centered svelte-16z9hj4")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function Qe(e){let n;return{c(){n=$("h1"),n.textContent="Give LOLs!",C(n,"class","has-text-centered svelte-16z9hj4")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function Ze(e){let t;function n(e,t){return e[6]?nt:tt}let r=n(e),o=r(e);return{c(){o.c(),t=x()},m(e,n){o.m(e,n),g(e,t,n)},p(e,s){r!==(r=n(e))&&(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&v(t)}}}function et(e){let t;function n(e,t){return e[5]?ot:rt}let r=n(e),o=r(e);return{c(){o.c(),t=x()},m(e,n){o.m(e,n),g(e,t,n)},p(e,s){r!==(r=n(e))&&(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&v(t)}}}function tt(e){let t;return{c(){t=$("h1"),t.textContent="Pick one!",C(t,"class","has-text-centered svelte-16z9hj4")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function nt(e){let t;return{c(){t=$("h1"),t.textContent="Wait for everybody to pick",C(t,"class","has-text-centered svelte-16z9hj4")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function rt(e){let t;return{c(){t=$("h1"),t.textContent="Type your guess for:",C(t,"class","has-text-centered svelte-16z9hj4")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function ot(e){let t;return{c(){t=$("h1"),t.textContent="Wait for everybody to guess",C(t,"class","has-text-centered svelte-16z9hj4")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function st(e){let n,r=e[14](),o=[];for(let t=0;t<r.length;t+=1)o[t]=ct(Be(e,r,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();n=x()},m(e,t){for(let n=0;n<o.length;n+=1)o[n].m(e,t);g(e,n,t)},p(e,t){if(24600&t[0]){let s;for(r=e[14](),s=0;s<r.length;s+=1){const l=Be(e,r,s);o[s]?o[s].p(l,t):(o[s]=ct(l),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},i:t,o:t,d(e){_(o,e),e&&v(n)}}}function lt(e){let t,n,r,o;const s=[at,ut],l=[];function i(e,t){return e[6]?0:1}return t=i(e),n=l[t]=s[t](e),{c(){n.c(),r=x()},m(e,n){l[t].m(e,n),g(e,r,n),o=!0},p(e,o){let c=t;t=i(e),t===c?l[t].p(e,o):(R(),J(l[c],1,1,()=>{l[c]=null}),K(),n=l[t],n||(n=l[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){o||(V(n),o=!0)},o(e){J(n),o=!1},d(e){l[t].d(e),e&&v(r)}}}function it(e){let t,n,r,o;const s=[ht,mt],l=[];function i(e,t){return e[5]?0:1}return t=i(e),n=l[t]=s[t](e),{c(){n.c(),r=x()},m(e,n){l[t].m(e,n),g(e,r,n),o=!0},p(e,o){let c=t;t=i(e),t===c?l[t].p(e,o):(R(),J(l[c],1,1,()=>{l[c]=null}),K(),n=l[t],n||(n=l[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){o||(V(n),o=!0)},o(e){J(n),o=!1},d(e){l[t].d(e),e&&v(r)}}}function ct(e){let t,n,r,o,s,l,i,c,u,a,p,d=e[45]+"";function f(...t){return e[25](e[45],...t)}function m(...t){return e[26](e[45],...t)}return{c(){t=$("div"),n=$("div"),r=w(d),o=k(),s=$("div"),l=$("button"),i=w("LOL point"),u=k(),C(n,"class","col sm-6 center-text svelte-16z9hj4"),l.disabled=c=e[3].lol_votes.some(f),C(s,"class","col sm-6 center-text svelte-16z9hj4"),C(t,"class","row svelte-16z9hj4")},m(e,c){g(e,t,c),h(t,n),h(n,r),h(t,o),h(t,s),h(s,l),h(l,i),h(t,u),a||(p=b(l,"click",m,{once:!0}),a=!0)},p(t,n){e=t,24&n[0]&&c!==(c=e[3].lol_votes.some(f))&&(l.disabled=c)},d(e){e&&v(t),a=!1,p()}}}function ut(e){let n,r,o,s,l,i,c,u,a,p=e[14](),d=[];for(let t=0;t<p.length;t+=1)d[t]=pt(He(e,p,t));return{c(){n=$("div"),r=$("div");for(let e=0;e<d.length;e+=1)d[e].c();o=k(),s=$("div"),l=$("button"),i=w("Send!"),C(r,"class","col sm-10 center-text svelte-16z9hj4"),l.disabled=c=!e[1],C(s,"class","col sm-2 center-text svelte-16z9hj4"),C(n,"class","row svelte-16z9hj4")},m(t,c){g(t,n,c),h(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);h(n,o),h(n,s),h(s,l),h(l,i),u||(a=b(l,"click",e[12]),u=!0)},p(e,t){if(16386&t[0]){let n;for(p=e[14](),n=0;n<p.length;n+=1){const o=He(e,p,n);d[n]?d[n].p(o,t):(d[n]=pt(o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=p.length}2&t[0]&&c!==(c=!e[1])&&(l.disabled=c)},i:t,o:t,d(e){e&&v(n),_(d,e),u=!1,a()}}}function at(e){let t,n,r,o,s,l,i,c,u,a,p,d,f=[],m=new Map,_=[],y=new Map;o=new ue({props:{user:e[9](e[10].username)}}),l=new ue({props:{user:e[3].users.find(e[20])}});let w=e[3].votes.filter(e[21]);const x=e=>e[42].voter_username;for(let t=0;t<w.length;t+=1){let n=Re(e,w,t),r=x(n);m.set(r,f[t]=dt(r,n))}let b=e[8];const j=e=>e[34].username;for(let t=0;t<b.length;t+=1){let n=Xe(e,b,t),r=j(n);y.set(r,_[t]=ft(r,n))}return{c(){t=$("h2"),t.textContent="Got votes:",n=k(),r=$("div"),te(o.$$.fragment),s=k(),te(l.$$.fragment),i=k();for(let e=0;e<f.length;e+=1)f[e].c();c=k(),u=$("h2"),u.textContent="Waiting for:",a=k(),p=$("div");for(let e=0;e<_.length;e+=1)_[e].c();C(t,"class","has-text-centered svelte-16z9hj4"),C(r,"class","centered-flex"),C(u,"class","has-text-centered svelte-16z9hj4"),C(p,"class","centered-flex")},m(e,m){g(e,t,m),g(e,n,m),g(e,r,m),ne(o,r,null),h(r,s),ne(l,r,null),h(r,i);for(let e=0;e<f.length;e+=1)f[e].m(r,null);g(e,c,m),g(e,u,m),g(e,a,m),g(e,p,m);for(let e=0;e<_.length;e+=1)_[e].m(p,null);d=!0},p(e,t){const n={};if(8&t[0]&&(n.user=e[3].users.find(e[20])),l.$set(n),520&t[0]){const n=e[3].votes.filter(e[21]);R(),f=ee(f,t,x,1,e,n,m,r,Z,dt,null,Re),K()}if(256&t[0]){const n=e[8];R(),_=ee(_,t,j,1,e,n,y,p,Z,ft,null,Xe),K()}},i(e){if(!d){V(o.$$.fragment,e),V(l.$$.fragment,e);for(let e=0;e<w.length;e+=1)V(f[e]);for(let e=0;e<b.length;e+=1)V(_[e]);d=!0}},o(e){J(o.$$.fragment,e),J(l.$$.fragment,e);for(let e=0;e<f.length;e+=1)J(f[e]);for(let e=0;e<_.length;e+=1)J(_[e]);d=!1},d(e){e&&v(t),e&&v(n),e&&v(r),re(o),re(l);for(let e=0;e<f.length;e+=1)f[e].d();e&&v(c),e&&v(u),e&&v(a),e&&v(p);for(let e=0;e<_.length;e+=1)_[e].d()}}}function pt(e){let t,n,r,o,s,i,c,u,a,p,d,f,m,_=e[45]+"";function y(...t){return e[24](e[45],...t)}return{c(){t=$("div"),n=$("div"),r=$("input"),i=k(),c=$("div"),u=$("label"),a=w(_),d=k(),C(r,"id",o=e[45]),C(r,"type","radio"),r.__value=s=e[45],r.value=r.__value,e[23][0].push(r),C(n,"class","col sm-1"),C(u,"for",p=e[45]),C(u,"class","svelte-16z9hj4"),C(c,"class","col sm-11"),C(t,"class","row voterow svelte-16z9hj4"),A(t,"row-selected",e[1]===e[45])},m(o,s){g(o,t,s),h(t,n),h(n,r),r.checked=r.__value===e[1],h(t,i),h(t,c),h(c,u),h(u,a),h(t,d),f||(m=[b(r,"change",e[22]),b(t,"click",y)],f=!0)},p(n,o){e=n,2&o[0]&&(r.checked=r.__value===e[1]),16386&o[0]&&A(t,"row-selected",e[1]===e[45])},d(n){n&&v(t),e[23][0].splice(e[23][0].indexOf(r),1),f=!1,l(m)}}}function dt(e,t){let n,r,o;return r=new ue({props:{user:t[9](t[42].voter_username)}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};8&t[0]&&(n.user=e[9](e[42].voter_username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function ft(e,t){let n,r,o;return r=new ue({props:{user:t[34]}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};256&t[0]&&(n.user=e[34]),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function mt(e){let n,r,o,s,i,c,u,a,p,d,f;return{c(){n=$("div"),r=$("div"),o=$("div"),s=$("input"),i=k(),c=$("div"),u=$("button"),a=w("Send!"),C(s,"class","input-block"),C(s,"type","text"),C(s,"placeholder","Your guess"),s.required=!0,C(o,"class","form-group"),C(r,"class","col sm-10"),u.disabled=p=0===e[0].length,C(c,"class","col sm-2"),C(n,"class","row svelte-16z9hj4")},m(t,l){g(t,n,l),h(n,r),h(r,o),h(o,s),z(s,e[0]),h(n,i),h(n,c),h(c,u),h(u,a),d||(f=[b(s,"input",e[18]),b(s,"keyup",e[19]),b(u,"click",e[11])],d=!0)},p(e,t){1&t[0]&&s.value!==e[0]&&z(s,e[0]),1&t[0]&&p!==(p=0===e[0].length)&&(u.disabled=p)},i:t,o:t,d(e){e&&v(n),d=!1,l(f)}}}function ht(e){let t,n,r,o,s,l,i,c,u,a,p,d,f=[],m=new Map,_=[],y=new Map;o=new ue({props:{user:e[9](e[10].username)}}),l=new ue({props:{user:e[3].users.find(e[16])}});let w=e[3].guesses.filter(e[17]);const x=e=>e[37].guesser_username;for(let t=0;t<w.length;t+=1){let n=Ve(e,w,t),r=x(n);m.set(r,f[t]=gt(r,n))}let b=e[7];const j=e=>e[34].username;for(let t=0;t<b.length;t+=1){let n=Ke(e,b,t),r=j(n);y.set(r,_[t]=vt(r,n))}return{c(){t=$("h2"),t.textContent="Got guesses:",n=k(),r=$("div"),te(o.$$.fragment),s=k(),te(l.$$.fragment),i=k();for(let e=0;e<f.length;e+=1)f[e].c();c=k(),u=$("h2"),u.textContent="Waiting for:",a=k(),p=$("div");for(let e=0;e<_.length;e+=1)_[e].c();C(t,"class","has-text-centered svelte-16z9hj4"),C(r,"class","centered-flex"),C(u,"class","has-text-centered svelte-16z9hj4"),C(p,"class","centered-flex")},m(e,m){g(e,t,m),g(e,n,m),g(e,r,m),ne(o,r,null),h(r,s),ne(l,r,null),h(r,i);for(let e=0;e<f.length;e+=1)f[e].m(r,null);g(e,c,m),g(e,u,m),g(e,a,m),g(e,p,m);for(let e=0;e<_.length;e+=1)_[e].m(p,null);d=!0},p(e,t){const n={};if(8&t[0]&&(n.user=e[3].users.find(e[16])),l.$set(n),520&t[0]){const n=e[3].guesses.filter(e[17]);R(),f=ee(f,t,x,1,e,n,m,r,Z,gt,null,Ve),K()}if(128&t[0]){const n=e[7];R(),_=ee(_,t,j,1,e,n,y,p,Z,vt,null,Ke),K()}},i(e){if(!d){V(o.$$.fragment,e),V(l.$$.fragment,e);for(let e=0;e<w.length;e+=1)V(f[e]);for(let e=0;e<b.length;e+=1)V(_[e]);d=!0}},o(e){J(o.$$.fragment,e),J(l.$$.fragment,e);for(let e=0;e<f.length;e+=1)J(f[e]);for(let e=0;e<_.length;e+=1)J(_[e]);d=!1},d(e){e&&v(t),e&&v(n),e&&v(r),re(o),re(l);for(let e=0;e<f.length;e+=1)f[e].d();e&&v(c),e&&v(u),e&&v(a),e&&v(p);for(let e=0;e<_.length;e+=1)_[e].d()}}}function gt(e,t){let n,r,o;return r=new ue({props:{user:t[9](t[37].guesser_username)}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};8&t[0]&&(n.user=e[9](e[37].guesser_username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function vt(e,t){let n,r,o;return r=new ue({props:{user:t[34]}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};128&t[0]&&(n.user=e[34]),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function _t(e){let t,n,r,o,s,l,i;function c(e,t){return"guess"===e[3].phase?et:"vote"===e[3].phase?Ze:"lol vote"===e[3].phase?Qe:Je}let u=c(e),a=u(e);n=new Te({props:{shapes:e[2],editable:!1}});const p=[it,lt,st],d=[];function f(e,t){return"guess"===e[3].phase?0:"vote"===e[3].phase?1:"lol vote"===e[3].phase?2:-1}return~(o=f(e))&&(s=d[o]=p[o](e)),{c(){a.c(),t=k(),te(n.$$.fragment),r=k(),s&&s.c(),l=x()},m(e,s){a.m(e,s),g(e,t,s),ne(n,e,s),g(e,r,s),~o&&d[o].m(e,s),g(e,l,s),i=!0},p(e,r){u===(u=c(e))&&a?a.p(e,r):(a.d(1),a=u(e),a&&(a.c(),a.m(t.parentNode,t)));const i={};4&r[0]&&(i.shapes=e[2]),n.$set(i);let m=o;o=f(e),o===m?~o&&d[o].p(e,r):(s&&(R(),J(d[m],1,1,()=>{d[m]=null}),K()),~o?(s=d[o],s||(s=d[o]=p[o](e),s.c()),V(s,1),s.m(l.parentNode,l)):s=null)},i(e){i||(V(n.$$.fragment,e),V(s),i=!0)},o(e){J(n.$$.fragment,e),J(s),i=!1},d(e){a.d(e),e&&v(t),re(n,e),e&&v(r),~o&&d[o].d(e),e&&v(l)}}}function $t(e,t,n){let r,o,s;u(e,de,e=>n(3,r=e)),u(e,fe,e=>n(4,o=e));var l,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function l(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))};function c(e){const t=r.users.find(t=>t.username===e);return t||(console.error("Error: user "+e+" not found"),{username:"",score:0,img_src:"",lol_score:0,proposed_prompt:"",assigned_prompt:""})}const a=null!==(l=r.drawings.find(e=>e.prompt===r.current_prompt))&&void 0!==l?l:{shapes:[],username:"",prompt:""};let p="",d="";function f(){return i(this,void 0,void 0,(function*(){try{yield ve.sendGuess({guessed_prompt:p,real_prompt:r.current_prompt,guesser_username:o})}catch(e){return void alert(e)}n(0,p="")}))}function m(e){return i(this,void 0,void 0,(function*(){try{yield ve.sendLOL({real_prompt:r.current_prompt,voted_prompt:e,voter_username:o})}catch(e){return void alert(e)}}))}const h=Ye(0);u(e,h,e=>n(29,s=e)),h.set(1,{duration:1e4});let g=[];const v=(e=>{let t=0;for(let n of e)t+=n;return t})(a.shapes.map(De));let _,$,y,w,k;return e.$$.update=()=>{16&e.$$.dirty[0]&&n(28,_=c(o)),268435480&e.$$.dirty[0]&&n(5,$=r.guesses.some(e=>e.guesser_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==_.proposed_prompt||r.current_prompt==_.assigned_prompt),268435480&e.$$.dirty[0]&&n(6,y=r.votes.some(e=>e.voter_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==_.proposed_prompt||r.current_prompt==_.assigned_prompt),8&e.$$.dirty[0]&&n(7,w=r.users.filter(e=>e.proposed_prompt!==r.current_prompt&&e.username!==a.username&&!r.guesses.some(t=>t.guesser_username===e.username&&t.real_prompt===r.current_prompt))),8&e.$$.dirty[0]&&n(8,k=r.users.filter(e=>e.proposed_prompt!==r.current_prompt&&e.username!==a.username&&!r.votes.some(t=>t.voter_username===e.username&&t.real_prompt===r.current_prompt))),536870912&e.$$.dirty[0]&&function(e,t){n(2,g=[]);let r=Math.floor(e*v);for(let e of t){let t=De(e);if(!(t<=r)){e=Ue(e,r),g.push(e);break}g.push(e),r-=t}n(2,g)}(s,a.shapes)},[p,d,g,r,o,$,y,w,k,c,a,f,function(){return i(this,void 0,void 0,(function*(){try{yield ve.sendVote({real_prompt:r.current_prompt,voted_prompt:d,voter_username:o})}catch(e){return void alert(e)}n(1,d="")}))},m,function(){const e=r.guesses.filter(e=>e.real_prompt===r.current_prompt&&e.guesser_username!==o).map(e=>e.guessed_prompt);return r.current_prompt!==_.proposed_prompt&&e.push(r.current_prompt),e.sort(),e},h,e=>e.proposed_prompt===r.current_prompt,e=>e.real_prompt===r.current_prompt,function(){p=this.value,n(0,p)},async e=>{"Enter"===e.code&&await f()},e=>e.proposed_prompt===r.current_prompt,e=>e.real_prompt===r.current_prompt,function(){d=this.__value,n(1,d)},[[]],e=>n(1,d=e),(e,t)=>t.voter_username===o&&t.real_prompt===r.current_prompt&&t.voted_prompt===e,async e=>await m(e)]}class yt extends le{constructor(e){super(),se(this,e,$t,_t,c,{},[-1,-1])}}function wt(e){let t,n,r,o;return{c(){t=$("h1"),n=w(e[1]),r=k(),o=$("progress"),C(t,"class","has-text-centered svelte-1nyik79"),C(o,"class","progress margin-bottom svelte-1nyik79"),o.value=e[2],A(o,"is-success",e[2]<.5),A(o,"is-warning",e[2]>=.5&&e[2]<.8),A(o,"is-danger",e[2]>=.8)},m(e,s){g(e,t,s),h(t,n),g(e,r,s),g(e,o,s)},p(e,t){2&t&&j(n,e[1]),4&t&&(o.value=e[2]),4&t&&A(o,"is-success",e[2]<.5),4&t&&A(o,"is-warning",e[2]>=.5&&e[2]<.8),4&t&&A(o,"is-danger",e[2]>=.8)},d(e){e&&v(t),e&&v(r),e&&v(o)}}}function kt(e){let n,r=["draw","guess","vote","lol vote","leaderboard"].includes(e[0]),o=r&&wt(e);return{c(){o&&o.c(),n=x()},m(e,t){o&&o.m(e,t),g(e,n,t)},p(e,[t]){1&t&&(r=["draw","guess","vote","lol vote","leaderboard"].includes(e[0])),r?o?o.p(e,t):(o=wt(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(e){o&&o.d(e),e&&v(n)}}}function xt(e,t,n){let r,o,s;u(e,de,e=>n(6,r=e)),u(e,fe,e=>n(10,o=e));var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function l(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))};let i="login",c=0;const a=Ye(0);function p(e,t="",r=(()=>!1)){n(4,c=e),console.log("TOT TIME IS",c),a.set(0,{duration:c?100:1e3}).then(()=>a.set(1,{duration:1e3*c})).then(()=>r()?alert(t):null)}function d(){return!r.drawings.some(e=>e.username===o)}function f(){return!(r.guesses.some(e=>e.guesser_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==y||r.current_prompt==$)}function m(){return!(r.votes.some(e=>e.voter_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==y||r.current_prompt==$)}let h,g,v,_,$,y,w;return u(e,a,e=>n(2,s=e)),O(()=>l(void 0,void 0,void 0,(function*(){de.subscribe(e=>{i!==e.phase&&("draw"===e.phase?p(181,"Please send your drawing!",d):"guess"===e.phase?p(60,"Please send your guess!",f):"vote"===e.phase?p(h,"Please send your vote!",m):"lol vote"===e.phase?p(g):"leaderboard"===e.phase&&"leaderboard"!==i&&p(v),n(0,i=e.phase))})}))),e.$$.update=()=>{64&e.$$.dirty&&(h=4*r.users.length),64&e.$$.dirty&&(g=3*r.users.length),64&e.$$.dirty&&(v=2*r.users.length),1088&e.$$.dirty&&n(9,_=r.users.find(e=>e.username===o)),512&e.$$.dirty&&($=_?_.assigned_prompt:""),512&e.$$.dirty&&(y=_?_.proposed_prompt:""),20&e.$$.dirty&&n(1,w=Math.floor((1-s)*c))},[i,w,s,a]}class bt extends le{constructor(e){super(),se(this,e,xt,kt,c,{})}}const{Map:Ct}=Q;function jt(e,t,n){const r=e.slice();return r[8]=t[n],r}function zt(e){let t,n,r,o,s,l=e[1].current_prompt+"";return t=new Te({props:{shapes:e[0].shapes,editable:!1}}),{c(){te(t.$$.fragment),n=k(),r=$("h1"),o=w(l),C(r,"class","has-text-centered svelte-170yjwn")},m(e,l){ne(t,e,l),g(e,n,l),g(e,r,l),h(r,o),s=!0},p(e,n){const r={};1&n&&(r.shapes=e[0].shapes),t.$set(r),(!s||2&n)&&l!==(l=e[1].current_prompt+"")&&j(o,l)},i(e){s||(V(t.$$.fragment,e),s=!0)},o(e){J(t.$$.fragment,e),s=!1},d(e){re(t,e),e&&v(n),e&&v(r)}}}function Mt(e){let n;return{c(){n=$("h1"),n.textContent="THE END!",C(n,"class","has-text-centered svelte-170yjwn")},m(e,t){g(e,n,t)},p:t,i:t,o:t,d(e){e&&v(n)}}}function Pt(e){let t;return{c(){t=$("strong"),t.textContent="Guessed"},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function Et(e){let t;return{c(){t=$("strong"),t.textContent="Voted"},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function At(e){let t,n,r,o=e[8].score-(e[5].get(e[8].username)??0)+"";return{c(){t=$("span"),n=w("+"),r=w(o),C(t,"class","svelte-170yjwn")},m(e,o){g(e,t,o),h(t,n),h(t,r)},p(e,t){48&t&&o!==(o=e[8].score-(e[5].get(e[8].username)??0)+"")&&j(r,o)},d(e){e&&v(t)}}}function Nt(e){let t,n,r,o=e[8].lol_score-(e[6].get(e[8].username)??0)+"";return{c(){t=$("span"),n=w("+"),r=w(o),C(t,"class","svelte-170yjwn")},m(e,o){g(e,t,o),h(t,n),h(t,r)},p(e,t){80&t&&o!==(o=e[8].lol_score-(e[6].get(e[8].username)??0)+"")&&j(r,o)},d(e){e&&v(t)}}}function Lt(e){let t;function n(e,t){return e[1].current_prompt===e[8].assigned_prompt?St:e[1].current_prompt===e[8].proposed_prompt?Tt:Ot}let r=n(e),o=r(e);return{c(){o.c(),t=x()},m(e,n){o.m(e,n),g(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&v(t)}}}function Ot(e){let t,n=(e[3].get(e[8].username)??"")+"";return{c(){t=w(n)},m(e,n){g(e,t,n)},p(e,r){24&r&&n!==(n=(e[3].get(e[8].username)??"")+"")&&j(t,n)},d(e){e&&v(t)}}}function Tt(e){let n;return{c(){n=$("span"),n.textContent="WRITER",C(n,"class","svelte-170yjwn")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function St(e){let n;return{c(){n=$("span"),n.textContent="ARTIST",C(n,"class","svelte-170yjwn")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function It(e){let t,n=(e[2].get(e[8].username)??"")+"";return{c(){t=w(n)},m(e,n){g(e,t,n)},p(e,r){20&r&&n!==(n=(e[2].get(e[8].username)??"")+"")&&j(t,n)},d(e){e&&v(t)}}}function qt(e,t){let n,r,o,s,l,i,c,u,a,p,d,f,m,_,y,x,b,z=t[8].score+"",M=t[8].score>(t[5].get(t[8].username)??0)&&"leaderboard"===t[1].phase,P=t[8].lol_score+"",E=t[8].lol_score>(t[6].get(t[8].username)??0)&&"leaderboard"===t[1].phase;o=new ue({props:{user:t[8]}});let A=M&&At(t),N=E&&Nt(t),L="leaderboard"===t[1].phase&&Lt(t),O="leaderboard"===t[1].phase&&It(t);return{key:e,first:null,c(){n=$("div"),r=$("div"),te(o.$$.fragment),s=k(),l=$("div"),i=w(z),c=k(),A&&A.c(),u=k(),a=$("div"),p=w(P),d=k(),N&&N.c(),f=k(),m=$("div"),L&&L.c(),_=k(),y=$("div"),O&&O.c(),x=k(),C(r,"class","centered-flex"),C(n,"class","col sm-2"),C(l,"class","col sm-2 center-text svelte-170yjwn"),C(a,"class","col sm-2 center-text svelte-170yjwn"),C(m,"class","col sm-3 center-text svelte-170yjwn"),C(y,"class","col sm-3 center-text svelte-170yjwn"),this.first=n},m(e,t){g(e,n,t),h(n,r),ne(o,r,null),g(e,s,t),g(e,l,t),h(l,i),h(l,c),A&&A.m(l,null),g(e,u,t),g(e,a,t),h(a,p),h(a,d),N&&N.m(a,null),g(e,f,t),g(e,m,t),L&&L.m(m,null),g(e,_,t),g(e,y,t),O&&O.m(y,null),h(y,x),b=!0},p(e,t){const n={};16&t&&(n.user=e[8]),o.$set(n),(!b||16&t)&&z!==(z=e[8].score+"")&&j(i,z),50&t&&(M=e[8].score>(e[5].get(e[8].username)??0)&&"leaderboard"===e[1].phase),M?A?A.p(e,t):(A=At(e),A.c(),A.m(l,null)):A&&(A.d(1),A=null),(!b||16&t)&&P!==(P=e[8].lol_score+"")&&j(p,P),82&t&&(E=e[8].lol_score>(e[6].get(e[8].username)??0)&&"leaderboard"===e[1].phase),E?N?N.p(e,t):(N=Nt(e),N.c(),N.m(a,null)):N&&(N.d(1),N=null),"leaderboard"===e[1].phase?L?L.p(e,t):(L=Lt(e),L.c(),L.m(m,null)):L&&(L.d(1),L=null),"leaderboard"===e[1].phase?O?O.p(e,t):(O=It(e),O.c(),O.m(y,x)):O&&(O.d(1),O=null)},i(e){b||(V(o.$$.fragment,e),b=!0)},o(e){J(o.$$.fragment,e),b=!1},d(e){e&&v(n),re(o),e&&v(s),e&&v(l),A&&A.d(),e&&v(u),e&&v(a),N&&N.d(),e&&v(f),e&&v(m),L&&L.d(),e&&v(_),e&&v(y),O&&O.d()}}}function Wt(e){let t,n,r,o,s,l,i,c,u,a,p,d,f,m,_,y=[],w=new Ct;const x=[Mt,zt],b=[];function j(e,t){return"end"===e[1].phase?0:1}t=j(e),n=b[t]=x[t](e);let z="leaderboard"===e[1].phase&&Pt(),M="leaderboard"===e[1].phase&&Et(),P=e[4];const E=e=>e[8].username;for(let t=0;t<P.length;t+=1){let n=jt(e,P,t),r=E(n);w.set(r,y[t]=qt(r,n))}return{c(){n.c(),r=k(),o=$("div"),s=$("div"),s.innerHTML="<strong>User</strong>",l=k(),i=$("div"),i.innerHTML="<strong>Score</strong>",c=k(),u=$("div"),u.innerHTML="<strong>LOLs</strong>",a=k(),p=$("div"),z&&z.c(),d=k(),f=$("div"),M&&M.c(),m=k();for(let e=0;e<y.length;e+=1)y[e].c();C(s,"class","col sm-2 center-text svelte-170yjwn"),C(i,"class","col sm-2 center-text svelte-170yjwn"),C(u,"class","col sm-2 center-text svelte-170yjwn"),C(p,"class","col sm-3 center-text svelte-170yjwn"),C(f,"class","col sm-3 center-text svelte-170yjwn"),C(o,"class","row svelte-170yjwn")},m(e,n){b[t].m(e,n),g(e,r,n),g(e,o,n),h(o,s),h(o,l),h(o,i),h(o,c),h(o,u),h(o,a),h(o,p),z&&z.m(p,null),h(o,d),h(o,f),M&&M.m(f,null),h(o,m);for(let e=0;e<y.length;e+=1)y[e].m(o,null);_=!0},p(e,[s]){let l=t;if(t=j(e),t===l?b[t].p(e,s):(R(),J(b[l],1,1,()=>{b[l]=null}),K(),n=b[t],n||(n=b[t]=x[t](e),n.c()),V(n,1),n.m(r.parentNode,r)),"leaderboard"===e[1].phase?z||(z=Pt(),z.c(),z.m(p,null)):z&&(z.d(1),z=null),"leaderboard"===e[1].phase?M||(M=Et(),M.c(),M.m(f,null)):M&&(M.d(1),M=null),126&s){const t=e[4];R(),y=ee(y,s,E,1,e,t,w,o,Z,qt,null,jt),K()}},i(e){if(!_){V(n);for(let e=0;e<P.length;e+=1)V(y[e]);_=!0}},o(e){J(n);for(let e=0;e<y.length;e+=1)J(y[e]);_=!1},d(e){b[t].d(e),e&&v(r),e&&v(o),z&&z.d(),M&&M.d();for(let e=0;e<y.length;e+=1)y[e].d()}}}function Dt(e,t,n){let r,o,s;var l;let i,c,a,p;return u(e,de,e=>n(1,r=e)),u(e,he,e=>n(5,o=e)),u(e,ge,e=>n(6,s=e)),e.$$.update=()=>{130&e.$$.dirty&&n(0,i=null!==n(7,l=r.drawings.find(e=>e.prompt===r.current_prompt))&&void 0!==l?l:{shapes:[],username:"",prompt:""}),2&e.$$.dirty&&n(2,c=new Map(r.votes.filter(e=>e.real_prompt===r.current_prompt).map(e=>[e.voter_username,e.voted_prompt]))),2&e.$$.dirty&&n(3,a=new Map(r.guesses.filter(e=>e.real_prompt===r.current_prompt).map(e=>[e.guesser_username,e.guessed_prompt]))),2&e.$$.dirty&&n(4,p=[...r.users].sort((e,t)=>t.score+t.lol_score-e.score-e.lol_score))},[i,r,c,a,p,o,s]}class Ut extends le{constructor(e){super(),se(this,e,Dt,Wt,c,{})}}function Gt(e,t,n){const r=e.slice();return r[8]=t[n],r}function Ft(e,t,n){const r=e.slice();return r[13]=t[n],r}function Yt(e,t,n){const r=e.slice();return r[8]=t[n],r}function Bt(e){let n,r,o,s=e[1].phase+"";return{c(){n=$("h1"),r=w("UNKNOWN STATE AAAA!!!! "),o=w(s),C(n,"class","has-text-centered")},m(e,t){g(e,n,t),h(n,r),h(n,o)},p(e,t){2&t&&s!==(s=e[1].phase+"")&&j(o,s)},i:t,o:t,d(e){e&&v(n)}}}function Ht(e){let n,r;return n=new Ut({}),{c(){te(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:t,i(e){r||(V(n.$$.fragment,e),r=!0)},o(e){J(n.$$.fragment,e),r=!1},d(e){re(n,e)}}}function Xt(e){let n,r;return n=new yt({}),{c(){te(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:t,i(e){r||(V(n.$$.fragment,e),r=!0)},o(e){J(n.$$.fragment,e),r=!1},d(e){re(n,e)}}}function Rt(e){let t,n,r,o,s;const l=[Qt,Jt],i=[];function c(e,n){return 6&n&&(t=!!e[1].drawings.some(e[5])),t?0:1}return n=c(e,-1),r=i[n]=l[n](e),{c(){r.c(),o=x()},m(e,t){i[n].m(e,t),g(e,o,t),s=!0},p(e,t){let s=n;n=c(e,t),n===s?i[n].p(e,t):(R(),J(i[s],1,1,()=>{i[s]=null}),K(),r=i[n],r||(r=i[n]=l[n](e),r.c()),V(r,1),r.m(o.parentNode,o))},i(e){s||(V(r),s=!0)},o(e){J(r),s=!1},d(e){i[n].d(e),e&&v(o)}}}function Kt(e){let t,n,r,o,s,l,i,c,u,a,p=[],d=new Map,f=e[0];const m=e=>e[8].username;for(let t=0;t<f.length;t+=1){let n=Yt(e,f,t),r=m(n);d.set(r,p[t]=tn(r,n))}return{c(){t=$("h1"),t.textContent="Waiting for other players",n=k(),r=$("div");for(let e=0;e<p.length;e+=1)p[e].c();o=k(),s=$("button"),l=w("Everybody in!"),C(t,"class","has-text-centered"),C(r,"class","centered-flex"),C(s,"class","centered-flex"),s.disabled=i=e[0].length<4},m(i,d){g(i,t,d),g(i,n,d),g(i,r,d);for(let e=0;e<p.length;e+=1)p[e].m(r,null);g(i,o,d),g(i,s,d),h(s,l),c=!0,u||(a=b(s,"click",e[4]),u=!0)},p(e,t){if(1&t){const n=e[0];R(),p=ee(p,t,m,1,e,n,d,r,Z,tn,null,Yt),K()}(!c||1&t&&i!==(i=e[0].length<4))&&(s.disabled=i)},i(e){if(!c){for(let e=0;e<f.length;e+=1)V(p[e]);c=!0}},o(e){for(let e=0;e<p.length;e+=1)J(p[e]);c=!1},d(e){e&&v(t),e&&v(n),e&&v(r);for(let e=0;e<p.length;e+=1)p[e].d();e&&v(o),e&&v(s),u=!1,a()}}}function Vt(e){let n,r;return n=new je({}),{c(){te(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:t,i(e){r||(V(n.$$.fragment,e),r=!0)},o(e){J(n.$$.fragment,e),r=!1},d(e){re(n,e)}}}function Jt(e){let n,r,o,s;return o=new qe({}),{c(){n=$("h1"),n.textContent="Let's draw!",r=k(),te(o.$$.fragment),C(n,"class","has-text-centered")},m(e,t){g(e,n,t),g(e,r,t),ne(o,e,t),s=!0},p:t,i(e){s||(V(o.$$.fragment,e),s=!0)},o(e){J(o.$$.fragment,e),s=!1},d(e){e&&v(n),e&&v(r),re(o,e)}}}function Qt(e){let t,n,r,o,s,l,i,c,u=[],a=new Map,p=[],d=new Map,f=e[1].drawings;const m=e=>e[13].username;for(let t=0;t<f.length;t+=1){let n=Ft(e,f,t),r=m(n);a.set(r,u[t]=Zt(r,n))}let h=e[1].users.filter(e[6]);const _=e=>e[8].username;for(let t=0;t<h.length;t+=1){let n=Gt(e,h,t),r=_(n);d.set(r,p[t]=en(r,n))}return{c(){t=$("h1"),t.textContent="Waiting for other players to finish drawing, got:",n=k(),r=$("div");for(let e=0;e<u.length;e+=1)u[e].c();o=k(),s=$("h1"),s.textContent="Waiting for:",l=k(),i=$("div");for(let e=0;e<p.length;e+=1)p[e].c();C(t,"class","has-text-centered"),C(r,"class","centered-flex"),C(s,"class","has-text-centered"),C(i,"class","centered-flex")},m(e,a){g(e,t,a),g(e,n,a),g(e,r,a);for(let e=0;e<u.length;e+=1)u[e].m(r,null);g(e,o,a),g(e,s,a),g(e,l,a),g(e,i,a);for(let e=0;e<p.length;e+=1)p[e].m(i,null);c=!0},p(e,t){if(10&t){const n=e[1].drawings;R(),u=ee(u,t,m,1,e,n,a,r,Z,Zt,null,Ft),K()}if(2&t){const n=e[1].users.filter(e[6]);R(),p=ee(p,t,_,1,e,n,d,i,Z,en,null,Gt),K()}},i(e){if(!c){for(let e=0;e<f.length;e+=1)V(u[e]);for(let e=0;e<h.length;e+=1)V(p[e]);c=!0}},o(e){for(let e=0;e<u.length;e+=1)J(u[e]);for(let e=0;e<p.length;e+=1)J(p[e]);c=!1},d(e){e&&v(t),e&&v(n),e&&v(r);for(let e=0;e<u.length;e+=1)u[e].d();e&&v(o),e&&v(s),e&&v(l),e&&v(i);for(let e=0;e<p.length;e+=1)p[e].d()}}}function Zt(e,t){let n,r,o;return r=new ue({props:{user:t[3](t[13].username)}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};2&t&&(n.user=e[3](e[13].username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function en(e,t){let n,r,o;return r=new ue({props:{user:t[8]}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};2&t&&(n.user=e[8]),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function tn(e,t){let n,r,o;return r=new ue({props:{user:t[8]}}),{key:e,first:null,c(){n=x(),te(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ne(r,e,t),o=!0},p(e,t){const n={};1&t&&(n.user=e[8]),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&v(n),re(r,e)}}}function nn(e){let t,n;return t=new bt({}),{c(){te(t.$$.fragment)},m(e,r){ne(t,e,r),n=!0},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){re(t,e)}}}function rn(e){let t,n,r,o,s;const l=[Vt,Kt,Rt,Xt,Ht,Bt],i=[];function c(e,t){return""===e[2]?0:"login"===e[1].phase?1:"draw"===e[1].phase?2:"guess"===e[1].phase||"vote"===e[1].phase||"lol vote"===e[1].phase?3:"leaderboard"===e[1].phase||"end"===e[1].phase?4:5}n=c(e),r=i[n]=l[n](e);let u=""!==e[2]&&nn();return{c(){t=$("div"),r.c(),o=k(),u&&u.c(),C(t,"class","container svelte-l24f7x")},m(e,r){g(e,t,r),i[n].m(t,null),h(t,o),u&&u.m(t,null),s=!0},p(e,[s]){let a=n;n=c(e),n===a?i[n].p(e,s):(R(),J(i[a],1,1,()=>{i[a]=null}),K(),r=i[n],r||(r=i[n]=l[n](e),r.c()),V(r,1),r.m(t,o)),""!==e[2]?u?4&s&&V(u,1):(u=nn(),u.c(),V(u,1),u.m(t,null)):u&&(R(),J(u,1,1,()=>{u=null}),K())},i(e){s||(V(r),V(u),s=!0)},o(e){J(r),J(u),s=!1},d(e){e&&v(t),i[n].d(),u&&u.d()}}}function on(e,t,n){let r,o;u(e,de,e=>n(1,r=e)),u(e,fe,e=>n(2,o=e));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function l(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))};let l;return e.$$.update=()=>{2&e.$$.dirty&&n(0,l=[...r.users])},[l,r,o,function(e){for(let t of l)if(t.username===e)return t;return alert("Error: user "+e+" not found"),{username:"",score:0,img_src:"",lol_score:0,proposed_prompt:"",assigned_prompt:""}},function(){return s(this,void 0,void 0,(function*(){try{yield ve.startGame()}catch(e){alert(e)}}))},e=>e.username===o,e=>!r.drawings.some(t=>t.username===e.username)]}return new class extends le{constructor(e){super(),se(this,e,on,rn,c,{})}}({target:document.body,props:{}})}(io);
//# sourceMappingURL=bundle.js.map
