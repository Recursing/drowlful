var app=function(e){"use strict";function t(){}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const n=e=>e;function r(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function i(e){e.forEach(o)}function l(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let p=a?()=>window.performance.now():()=>Date.now(),d=a?e=>requestAnimationFrame(e):t;const f=new Set;function m(e){f.forEach(t=>{t.c(e)||(f.delete(t),t.f())}),0!==f.size&&d(m)}function h(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function _(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function k(e){return document.createTextNode(e)}function y(){return k(" ")}function x(){return k("")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function P(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function E(e,t){e.value=null==t?"":t}function A(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function N(e,t,n){e.classList[n?"add":"remove"](t)}let L;function M(e){L=e}function O(){if(!L)throw new Error("Function called outside component initialization");return L}function S(){const e=O();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}const T=[],j=[],D=[],z=[],U=Promise.resolve();let W=!1;function q(e){D.push(e)}let G=!1;const I=new Set;function H(){if(!G){G=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];M(t),B(t.$$)}for(M(null),T.length=0;j.length;)j.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];I.has(t)||(I.add(t),t())}D.length=0}while(T.length);for(;z.length;)z.pop()();W=!1,G=!1,I.clear()}}function B(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const Y=new Set;let F;function J(){F={r:0,c:[],p:F}}function K(){F.r||i(F.c),F=F.p}function V(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function X(e,t,n,r){if(e&&e.o){if(Y.has(e))return;Y.add(e),F.c.push(()=>{Y.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Q(e,t){X(e,1,1,()=>{t.delete(e.key)})}function R(e,t,n,r,o,s,i,l,c,u,a,p){let d=e.length,f=s.length,m=d;const h={};for(;m--;)h[e[m].key]=m;const g=[],v=new Map,$=new Map;for(m=f;m--;){const e=p(o,s,m),l=n(e);let c=i.get(l);c?r&&c.p(e,t):(c=u(l,e),c.c()),v.set(l,g[m]=c),l in h&&$.set(l,Math.abs(m-h[l]))}const w=new Set,_=new Set;function k(e){V(e,1),e.m(l,a),i.set(e.key,e),a=e.first,f--}for(;d&&f;){const t=g[f-1],n=e[d-1],r=t.key,o=n.key;t===n?(a=t.first,d--,f--):v.has(o)?!i.has(r)||w.has(r)?k(t):_.has(o)?d--:$.get(r)>$.get(o)?(_.add(r),k(t)):(w.add(o),d--):(c(n,i),d--)}for(;d--;){const t=e[d];v.has(t.key)||c(t,i)}for(;f;)k(g[f-1]);return g}function Z(e){e&&e.c()}function ee(e,t,n){const{fragment:r,on_mount:s,on_destroy:c,after_update:u}=e.$$;r&&r.m(t,n),q(()=>{const t=s.map(o).filter(l);c?c.push(...t):i(t),e.$$.on_mount=[]}),u.forEach(q)}function te(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t){-1===e.$$.dirty[0]&&(T.push(e),W||(W=!0,U.then(H)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,n,r,o,l,c,u=[-1]){const a=L;M(e);const p=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:s(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=r?r(e,p,(t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&ne(e,t)),n}):[],d.update(),f=!0,i(d.before_update),d.fragment=!!o&&o(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(v)}else d.fragment&&d.fragment.c();n.intro&&V(e.$$.fragment),ee(e,n.target,n.anchor),H()}M(a)}class oe{$destroy(){te(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function se(e){let n,r,o,s,i,l,c=e[0].username+"";return{c(){n=w("div"),r=w("img"),s=y(),i=w("p"),l=k(c),C(r,"alt","user pic"),r.src!==(o=e[0].img_src)&&C(r,"src",o),C(r,"class","svelte-zro2a3"),C(i,"class","has-text-centered svelte-zro2a3"),C(n,"class","card svelte-zro2a3")},m(e,t){g(e,n,t),h(n,r),h(n,s),h(n,i),h(i,l)},p(e,[t]){1&t&&r.src!==(o=e[0].img_src)&&C(r,"src",o),1&t&&c!==(c=e[0].username+"")&&P(l,c)},i:t,o:t,d(e){e&&v(n)}}}function ie(e,t,n){let{user:r}=t;return e.$$set=e=>{"user"in e&&n(0,r=e.user)},[r]}class le extends oe{constructor(e){super(),re(this,e,ie,se,c,{user:0})}}const ce=[];function ue(e,n=t){let r;const o=[];function s(t){if(c(e,t)&&(e=t,r)){const t=!ce.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),ce.push(n,e)}if(t){for(let e=0;e<ce.length;e+=2)ce[e][0](ce[e+1]);ce.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,l=t){const c=[i,l];return o.push(c),1===o.length&&(r=n(s)||t),i(e),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const ae=ue({users:[],phase:"login",drawings:[],guesses:[],votes:[],lol_votes:[],current_prompt:""});let pe=ue("");function de(e){let n,r,o,s,l,c,u,a,p,d,f,m,$,_,k,x,P,A,N,L,M,O;return{c(){n=w("div"),r=w("div"),o=w("div"),s=w("label"),s.textContent="Username",l=y(),c=w("input"),u=y(),a=w("div"),p=w("div"),d=w("label"),d.textContent="Image url",f=y(),m=w("input"),$=y(),_=w("div"),k=w("div"),x=w("div"),P=w("input"),A=y(),N=w("div"),L=w("button"),L.textContent="Login",C(s,"for","paperInputs2"),C(c,"id","username-input"),C(c,"class","input-block"),C(c,"type","text"),C(c,"placeholder","Username"),c.required=!0,C(o,"class","form-group"),C(r,"class","col sm-4"),C(d,"for","paperInputs3"),C(m,"id","image-url-input"),C(m,"class","input-block"),C(m,"type","url"),m.required=!0,C(p,"class","form-group"),C(a,"class","col sm-8"),C(n,"class","row"),C(P,"class","input-block"),C(P,"type","text"),C(P,"placeholder","Your prompt"),P.required=!0,C(x,"class","form-group"),C(k,"class","col sm-10"),C(L,"id","login-button"),C(L,"class","button is-link svelte-1ppidry"),C(N,"class","col"),C(_,"class","row")},m(t,i){g(t,n,i),h(n,r),h(r,o),h(o,s),h(o,l),h(o,c),E(c,e[0]),h(n,u),h(n,a),h(a,p),h(p,d),h(p,f),h(p,m),E(m,e[2]),g(t,$,i),g(t,_,i),h(_,k),h(k,x),h(x,P),E(P,e[1]),h(_,A),h(_,N),h(N,L),M||(O=[b(c,"input",e[4]),b(m,"input",e[5]),b(P,"input",e[6]),b(P,"keyup",e[7]),b(L,"click",e[3])],M=!0)},p(e,[t]){1&t&&c.value!==e[0]&&E(c,e[0]),4&t&&E(m,e[2]),2&t&&P.value!==e[1]&&E(P,e[1])},i:t,o:t,d(e){e&&v(n),e&&v($),e&&v(_),M=!1,i(O)}}}function fe(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function l(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const o=S();ae.subscribe(e=>{for(;e.users.some(e=>e.img_src==c);)n(2,c=l[Math.floor(Math.random()*l.length)])});let s="",i="";const l=["https://upload.wikimedia.org/wikipedia/en/a/a6/Pok%C3%A9mon_Pikachu_art.png","https://upload.wikimedia.org/wikipedia/en/2/28/Pok%C3%A9mon_Bulbasaur_art.png","https://upload.wikimedia.org/wikipedia/en/5/59/Pok%C3%A9mon_Squirtle_art.png","https://upload.wikimedia.org/wikipedia/en/a/a5/Pok%C3%A9mon_Charmander_art.png","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Jigglypuff_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pok%C3%A9mon_Meowth_art.png","https://upload.wikimedia.org/wikipedia/en/a/a9/Pok%C3%A9mon_Eevee_art.png","https://upload.wikimedia.org/wikipedia/en/4/40/Pok%C3%A9mon_Lapras_art.png","https://upload.wikimedia.org/wikipedia/en/1/1a/Pok%C3%A9mon_Chikorita_art.png","https://upload.wikimedia.org/wikipedia/en/a/aa/Pichu_artwork.png","https://upload.wikimedia.org/wikipedia/en/5/53/Pok%C3%A9mon_Togepi_art.png","https://upload.wikimedia.org/wikipedia/en/2/22/Pok%C3%A9mon_Mudkip_art.png"];let c=l[Math.floor(Math.random()*l.length)];function u(e){n(0,s=e.username||e.first_name+" "+e.last_name),console.log(JSON.stringify(e,null,2)),n(2,c=e.photo_url||c),console.log("Image src: "+c),a()}function a(){i?(console.log("dispatching"),o("login",{username:s,img_src:c,prompt:i})):alert("Write prompt first!")}var p;p=()=>r(void 0,void 0,void 0,(function*(){window.onTelegramAuth=u})),O().$$.on_mount.push(p);return[s,i,c,a,function(){s=this.value,n(0,s)},function(){c=this.value,n(2,c)},function(){i=this.value,n(1,i)},e=>"Enter"===e.code?a():null]}class me extends oe{constructor(e){super(),re(this,e,fe,de,c,{})}}const he=new class{constructor(){const t="localhost"===document.location.hostname?"ws":"wss";this.socket=e(`${t}://${document.location.hostname}:8000`),this.socket.on("update state",e=>{console.log("NEW STATE!!!"),console.log(e),ae.set(e)})}async login(e,t,n){return this.socket.emit("login",e,t,n),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async startGame(){return this.socket.emit("start game"),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendDrawing(e){return this.socket.emit("drawing",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendGuess(e){return this.socket.emit("guess",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendVote(e){return this.socket.emit("vote",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}async sendLOL(e){return this.socket.emit("lol vote",e),new Promise((e,t)=>{this.socket.on("ok",e),this.socket.on("error",t)})}};function ge(e,t,n){const r=e.slice();return r[10]=t[n].stroke,r[11]=t[n].width,r[12]=t[n].points,r}function ve(e){let t,n;return{c(){t=_("polyline"),A(t,"fill","none"),A(t,"stroke",e[10]),A(t,"stroke-width",e[11]),C(t,"points",n=e[12]),C(t,"stroke-linecap","round"),C(t,"stroke-linejoin","round"),C(t,"class","svelte-1x9c48v")},m(e,n){g(e,t,n)},p(e,r){1&r&&A(t,"stroke",e[10]),1&r&&A(t,"stroke-width",e[11]),1&r&&n!==(n=e[12])&&C(t,"points",n)},d(e){e&&v(t)}}}function $e(e){let t,n,r,o,s,l,c,u,a,p,d,f,m=e[2].width+"";return{c(){t=w("div"),n=w("label"),r=k("Size: "),o=k(m),s=y(),l=w("input"),c=y(),u=w("input"),a=y(),p=w("button"),p.textContent="UNDO",C(l,"type","range"),C(l,"min","1"),C(l,"max","80"),C(n,"class","svelte-1x9c48v"),C(u,"type","color"),C(u,"class","svelte-1x9c48v"),C(p,"class","svelte-1x9c48v"),C(t,"class","controls centered-flex svelte-1x9c48v")},m(i,m){g(i,t,m),h(t,n),h(n,r),h(n,o),h(n,s),h(n,l),E(l,e[2].width),h(t,c),h(t,u),E(u,e[2].stroke),h(t,a),h(t,p),d||(f=[b(l,"change",e[6]),b(l,"input",e[6]),b(u,"input",e[7]),b(p,"click",e[8])],d=!0)},p(e,t){4&t&&m!==(m=e[2].width+"")&&P(o,m),4&t&&E(l,e[2].width),4&t&&E(u,e[2].stroke)},d(e){e&&v(t),d=!1,i(f)}}}function we(e){let n,r,o,s,l,c,u,a=e[0],p=[];for(let t=0;t<a.length;t+=1)p[t]=ve(ge(e,a,t));let d=e[1]&&$e(e);return{c(){n=_("svg");for(let e=0;e<p.length;e+=1)p[e].c();r=_("polyline"),s=y(),d&&d.c(),l=x(),A(r,"fill","none"),A(r,"stroke",e[2].stroke),A(r,"stroke-width",e[2].width),C(r,"points",o=e[2].points),C(r,"stroke-linecap","round"),C(r,"stroke-linejoin","round"),C(r,"class","svelte-1x9c48v"),C(n,"width","800"),C(n,"height","600"),C(n,"class","svelte-1x9c48v")},m(t,o){g(t,n,o);for(let e=0;e<p.length;e+=1)p[e].m(n,null);h(n,r),g(t,s,o),d&&d.m(t,o),g(t,l,o),c||(u=[b(n,"mousemove",e[5]),b(n,"mouseup",e[3]),b(n,"mousedown",e[4]),b(n,"mouseleave",e[3])],c=!0)},p(e,[t]){if(1&t){let o;for(a=e[0],o=0;o<a.length;o+=1){const s=ge(e,a,o);p[o]?p[o].p(s,t):(p[o]=ve(s),p[o].c(),p[o].m(n,r))}for(;o<p.length;o+=1)p[o].d(1);p.length=a.length}4&t&&A(r,"stroke",e[2].stroke),4&t&&A(r,"stroke-width",e[2].width),4&t&&o!==(o=e[2].points)&&C(r,"points",o),e[1]?d?d.p(e,t):(d=$e(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},i:t,o:t,d(e){e&&v(n),$(p,e),e&&v(s),d&&d.d(e),e&&v(l),c=!1,i(u)}}}function _e(e,t,n){let{lines:r=[]}=t,{editable:o=!0}=t,s={stroke:"#ff0000",width:2,points:""},i=!1;return e.$$set=e=>{"lines"in e&&n(0,r=e.lines),"editable"in e&&n(1,o=e.editable)},[r,o,s,function(){i&&(i=!1,s.points.split(" ").length<2||(r.push({stroke:s.stroke,width:s.width,points:s.points}),n(0,r),n(2,s.points="",s)))},function(){o&&(i=!0)},function(e){i&&n(2,s.points+=" "+e.offsetX+","+e.offsetY,s)},function(){var e;s.width=""===(e=this.value)?null:+e,n(2,s)},function(){s.stroke=this.value,n(2,s)},()=>{r.length>0&&n(0,r=r.slice(0,r.length-1))}]}class ke extends oe{constructor(e){super(),re(this,e,_e,we,c,{lines:0,editable:1})}}function ye(e){let t,n,r,o,s,i,l,c,u,a,p,d;function f(t){e[3].call(null,t)}let m={};return void 0!==e[0]&&(m.lines=e[0]),o=new ke({props:m}),j.push(()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(o,"lines",f)),{c(){t=w("h1"),n=k(e[1]),r=y(),Z(o.$$.fragment),i=y(),l=w("button"),c=k("Done!"),C(t,"class","has-text-centered svelte-11z6e2m"),l.disabled=u=0===e[0].length,C(l,"class","svelte-11z6e2m")},m(s,u){g(s,t,u),h(t,n),g(s,r,u),ee(o,s,u),g(s,i,u),g(s,l,u),h(l,c),a=!0,p||(d=b(l,"click",e[2],{once:!0}),p=!0)},p(e,[t]){(!a||2&t)&&P(n,e[1]);const r={};var i;!s&&1&t&&(s=!0,r.lines=e[0],i=()=>s=!1,z.push(i)),o.$set(r),(!a||1&t&&u!==(u=0===e[0].length))&&(l.disabled=u)},i(e){a||(V(o.$$.fragment,e),a=!0)},o(e){X(o.$$.fragment,e),a=!1},d(e){e&&v(t),e&&v(r),te(o,e),e&&v(i),e&&v(l),p=!1,d()}}}function xe(e,t,n){let r,o;u(e,ae,e=>n(5,r=e)),u(e,pe,e=>n(6,o=e));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function l(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};let i,l,c,a=[];return e.$$.update=()=>{96&e.$$.dirty&&n(4,i=r.users.find(e=>e.username===o)),16&e.$$.dirty&&n(1,l=i?i.assigned_prompt:""),96&e.$$.dirty&&(c=r.drawings.some(e=>e.username===o))},[a,l,function(){return s(this,void 0,void 0,(function*(){if(!c&&confirm("Send Drawing?")){console.log("sendDrawing:",a,l);try{yield he.sendDrawing({lines:a,prompt:l,username:o})}catch(e){alert(e)}c=!0}}))},function(e){a=e,n(0,a)}]}class be extends oe{constructor(e){super(),re(this,e,xe,ye,c,{})}}function Ce(e,t,n){const r=e.slice();return r[36]=t[n],r}function Pe(e,t,n){const r=e.slice();return r[31]=t[n],r}function Ee(e,t,n){const r=e.slice();return r[31]=t[n],r}function Ae(e,t,n){const r=e.slice();return r[28]=t[n],r}function Ne(e,t,n){const r=e.slice();return r[25]=t[n],r}function Le(e){let n;return{c(){n=w("h1"),n.textContent="UNKNOWN PHASE",C(n,"class","has-text-centered svelte-92pox0")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function Me(e){let n;return{c(){n=w("h1"),n.textContent="leaderboard:",C(n,"class","has-text-centered svelte-92pox0")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function Oe(e){let n;return{c(){n=w("h1"),n.textContent="Give LOLs!",C(n,"class","has-text-centered svelte-92pox0")},m(e,t){g(e,n,t)},p:t,d(e){e&&v(n)}}}function Se(e){let t;function n(e,t){return e[6]?De:je}let r=n(e),o=r(e);return{c(){o.c(),t=x()},m(e,n){o.m(e,n),g(e,t,n)},p(e,s){r!==(r=n(e))&&(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&v(t)}}}function Te(e){let t;function n(e,t){return e[5]?Ue:ze}let r=n(e),o=r(e);return{c(){o.c(),t=x()},m(e,n){o.m(e,n),g(e,t,n)},p(e,s){r!==(r=n(e))&&(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&v(t)}}}function je(e){let t;return{c(){t=w("h1"),t.textContent="Pick one!",C(t,"class","has-text-centered svelte-92pox0")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function De(e){let t;return{c(){t=w("h1"),t.textContent="Wait for everybody to pick",C(t,"class","has-text-centered svelte-92pox0")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function ze(e){let t;return{c(){t=w("h1"),t.textContent="Type your guess for:",C(t,"class","has-text-centered svelte-92pox0")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function Ue(e){let t;return{c(){t=w("h1"),t.textContent="Wait for everybody to guess",C(t,"class","has-text-centered svelte-92pox0")},m(e,n){g(e,t,n)},d(e){e&&v(t)}}}function We(e){let t,n,r,o,s,i,l,c,u,a,p,d=e[2].current_prompt+"",f=[],m=new Map,$=e[12]();const _=e=>e[36].username;for(let t=0;t<$.length;t+=1){let n=Ce(e,$,t),r=_(n);m.set(r,f[t]=He(r,n))}return{c(){t=w("h1"),n=k(d),r=y(),o=w("div"),s=w("div"),s.innerHTML="<strong>User</strong>",i=y(),l=w("div"),l.innerHTML="<strong>Score</strong>",c=y(),u=w("div"),u.innerHTML="<strong>LOLs</strong>",a=y();for(let e=0;e<f.length;e+=1)f[e].c();C(t,"class","has-text-centered svelte-92pox0"),C(s,"class","col sm-6 center-text svelte-92pox0"),C(l,"class","col sm-3 center-text svelte-92pox0"),C(u,"class","col sm-3 center-text svelte-92pox0"),C(o,"class","row svelte-92pox0")},m(e,d){g(e,t,d),h(t,n),g(e,r,d),g(e,o,d),h(o,s),h(o,i),h(o,l),h(o,c),h(o,u),h(o,a);for(let e=0;e<f.length;e+=1)f[e].m(o,null);p=!0},p(e,t){if((!p||4&t[0])&&d!==(d=e[2].current_prompt+"")&&P(n,d),4096&t[0]){const n=e[12]();J(),f=R(f,t,_,1,e,n,m,o,Q,He,null,Ce),K()}},i(e){if(!p){for(let e=0;e<$.length;e+=1)V(f[e]);p=!0}},o(e){for(let e=0;e<f.length;e+=1)X(f[e]);p=!1},d(e){e&&v(t),e&&v(r),e&&v(o);for(let e=0;e<f.length;e+=1)f[e].d()}}}function qe(e){let n,r=e[11](),o=[];for(let t=0;t<r.length;t+=1)o[t]=Be(Pe(e,r,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();n=x()},m(e,t){for(let n=0;n<o.length;n+=1)o[n].m(e,t);g(e,n,t)},p(e,t){if(3084&t[0]){let s;for(r=e[11](),s=0;s<r.length;s+=1){const i=Pe(e,r,s);o[s]?o[s].p(i,t):(o[s]=Be(i),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},i:t,o:t,d(e){$(o,e),e&&v(n)}}}function Ge(e){let t,n,r,o;const s=[Fe,Ye],i=[];function l(e,t){return e[6]?0:1}return t=l(e),n=i[t]=s[t](e),{c(){n.c(),r=x()},m(e,n){i[t].m(e,n),g(e,r,n),o=!0},p(e,o){let c=t;t=l(e),t===c?i[t].p(e,o):(J(),X(i[c],1,1,()=>{i[c]=null}),K(),n=i[t],n||(n=i[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){o||(V(n),o=!0)},o(e){X(n),o=!1},d(e){i[t].d(e),e&&v(r)}}}function Ie(e){let t,n,r,o;const s=[Xe,Ve],i=[];function l(e,t){return e[5]?0:1}return t=l(e),n=i[t]=s[t](e),{c(){n.c(),r=x()},m(e,n){i[t].m(e,n),g(e,r,n),o=!0},p(e,o){let c=t;t=l(e),t===c?i[t].p(e,o):(J(),X(i[c],1,1,()=>{i[c]=null}),K(),n=i[t],n||(n=i[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){o||(V(n),o=!0)},o(e){X(n),o=!1},d(e){i[t].d(e),e&&v(r)}}}function He(e,n){let r,o,s,i,l,c,u,a,p,d,f=n[36].score+"",m=n[36].lol_score+"";return s=new le({props:{user:n[36]}}),{key:e,first:null,c(){r=w("div"),o=w("div"),Z(s.$$.fragment),i=y(),l=w("div"),c=k(f),u=y(),a=w("div"),p=k(m),C(o,"class","centered-flex"),C(r,"class","col sm-6"),C(l,"class","col sm-3 center-text svelte-92pox0"),C(a,"class","col sm-3 center-text svelte-92pox0"),this.first=r},m(e,t){g(e,r,t),h(r,o),ee(s,o,null),g(e,i,t),g(e,l,t),h(l,c),g(e,u,t),g(e,a,t),h(a,p),d=!0},p:t,i(e){d||(V(s.$$.fragment,e),d=!0)},o(e){X(s.$$.fragment,e),d=!1},d(e){e&&v(r),te(s),e&&v(i),e&&v(l),e&&v(u),e&&v(a)}}}function Be(e){let t,n,r,o,s,i,l,c,u,a,p,d=e[31]+"";function f(...t){return e[21](e[31],...t)}function m(...t){return e[22](e[31],...t)}return{c(){t=w("div"),n=w("div"),r=k(d),o=y(),s=w("div"),i=w("button"),l=k("LOL point"),u=y(),C(n,"class","col sm-6 center-text svelte-92pox0"),C(i,"class","button"),i.disabled=c=e[2].lol_votes.some(f),C(s,"class","col sm-6 center-text svelte-92pox0"),C(t,"class","row svelte-92pox0")},m(e,c){g(e,t,c),h(t,n),h(n,r),h(t,o),h(t,s),h(s,i),h(i,l),h(t,u),a||(p=b(i,"click",m,{once:!0}),a=!0)},p(t,n){e=t,12&n[0]&&c!==(c=e[2].lol_votes.some(f))&&(i.disabled=c)},d(e){e&&v(t),a=!1,p()}}}function Ye(e){let n,r,o,s,i,l,c,u,a,p=e[11](),d=[];for(let t=0;t<p.length;t+=1)d[t]=Je(Ee(e,p,t));return{c(){n=w("div"),r=w("div");for(let e=0;e<d.length;e+=1)d[e].c();o=y(),s=w("div"),i=w("button"),l=k("Send!"),C(r,"class","col sm-10 center-text svelte-92pox0"),C(i,"class","button"),i.disabled=c=!e[1],C(s,"class","col sm-2 center-text svelte-92pox0"),C(n,"class","row svelte-92pox0")},m(t,c){g(t,n,c),h(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);h(n,o),h(n,s),h(s,i),h(i,l),u||(a=b(i,"click",e[9]),u=!0)},p(e,t){if(2050&t[0]){let n;for(p=e[11](),n=0;n<p.length;n+=1){const o=Ee(e,p,n);d[n]?d[n].p(o,t):(d[n]=Je(o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=p.length}2&t[0]&&c!==(c=!e[1])&&(i.disabled=c)},i:t,o:t,d(e){e&&v(n),$(d,e),u=!1,a()}}}function Fe(e){let t,n,r,o,s,i,l,c,u=[],a=new Map;o=new le({props:{user:e[7](e[4].username)}}),i=new le({props:{user:e[2].users.find(e[17])}});let p=e[2].votes.filter(e[18]);const d=e=>e[28].voter_username;for(let t=0;t<p.length;t+=1){let n=Ae(e,p,t),r=d(n);a.set(r,u[t]=Ke(r,n))}return{c(){t=w("h2"),t.textContent="Got votes:",n=y(),r=w("div"),Z(o.$$.fragment),s=y(),Z(i.$$.fragment),l=y();for(let e=0;e<u.length;e+=1)u[e].c();C(t,"class","has-text-centered"),C(r,"class","centered-flex")},m(e,a){g(e,t,a),g(e,n,a),g(e,r,a),ee(o,r,null),h(r,s),ee(i,r,null),h(r,l);for(let e=0;e<u.length;e+=1)u[e].m(r,null);c=!0},p(e,t){const n={};16&t[0]&&(n.user=e[7](e[4].username)),o.$set(n);const s={};if(4&t[0]&&(s.user=e[2].users.find(e[17])),i.$set(s),132&t[0]){const n=e[2].votes.filter(e[18]);J(),u=R(u,t,d,1,e,n,a,r,Q,Ke,null,Ae),K()}},i(e){if(!c){V(o.$$.fragment,e),V(i.$$.fragment,e);for(let e=0;e<p.length;e+=1)V(u[e]);c=!0}},o(e){X(o.$$.fragment,e),X(i.$$.fragment,e);for(let e=0;e<u.length;e+=1)X(u[e]);c=!1},d(e){e&&v(t),e&&v(n),e&&v(r),te(o),te(i);for(let e=0;e<u.length;e+=1)u[e].d()}}}function Je(e){let t,n,r,o,s,i,l,c,u,a,p,d,f,m=e[31]+"";return{c(){t=w("div"),n=w("div"),r=w("input"),i=y(),l=w("div"),c=w("label"),u=k(m),p=y(),C(r,"id",o=e[31]),C(r,"type","radio"),r.__value=s=e[31],r.value=r.__value,e[20][0].push(r),C(n,"class","col sm-1"),C(c,"for",a=e[31]),C(c,"class","svelte-92pox0"),C(l,"class","col sm-11"),C(t,"class","row svelte-92pox0")},m(o,s){g(o,t,s),h(t,n),h(n,r),r.checked=r.__value===e[1],h(t,i),h(t,l),h(l,c),h(c,u),h(t,p),d||(f=b(r,"change",e[19]),d=!0)},p(e,t){2&t[0]&&(r.checked=r.__value===e[1])},d(n){n&&v(t),e[20][0].splice(e[20][0].indexOf(r),1),d=!1,f()}}}function Ke(e,t){let n,r,o;return r=new le({props:{user:t[7](t[28].voter_username)}}),{key:e,first:null,c(){n=x(),Z(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ee(r,e,t),o=!0},p(e,t){const n={};4&t[0]&&(n.user=e[7](e[28].voter_username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){X(r.$$.fragment,e),o=!1},d(e){e&&v(n),te(r,e)}}}function Ve(e){let n,r,o,s,l,c,u,a,p,d,f;return{c(){n=w("div"),r=w("div"),o=w("div"),s=w("input"),l=y(),c=w("div"),u=w("button"),a=k("Send!"),C(s,"class","input-block"),C(s,"type","text"),C(s,"placeholder","Your guess"),s.required=!0,C(o,"class","form-group"),C(r,"class","col sm-10"),C(u,"class","button is-info is-large"),u.disabled=p=0===e[0].length,C(c,"class","col sm-2"),C(n,"class","row svelte-92pox0")},m(t,i){g(t,n,i),h(n,r),h(r,o),h(o,s),E(s,e[0]),h(n,l),h(n,c),h(c,u),h(u,a),d||(f=[b(s,"input",e[15]),b(s,"keyup",e[16]),b(u,"click",e[8])],d=!0)},p(e,t){1&t[0]&&s.value!==e[0]&&E(s,e[0]),1&t[0]&&p!==(p=0===e[0].length)&&(u.disabled=p)},i:t,o:t,d(e){e&&v(n),d=!1,i(f)}}}function Xe(e){let t,n,r,o,s,i,l,c,u=[],a=new Map;o=new le({props:{user:e[7](e[4].username)}}),i=new le({props:{user:e[2].users.find(e[13])}});let p=e[2].guesses.filter(e[14]);const d=e=>e[25].guesser_username;for(let t=0;t<p.length;t+=1){let n=Ne(e,p,t),r=d(n);a.set(r,u[t]=Qe(r,n))}return{c(){t=w("h2"),t.textContent="Got guesses:",n=y(),r=w("div"),Z(o.$$.fragment),s=y(),Z(i.$$.fragment),l=y();for(let e=0;e<u.length;e+=1)u[e].c();C(t,"class","has-text-centered"),C(r,"class","centered-flex")},m(e,a){g(e,t,a),g(e,n,a),g(e,r,a),ee(o,r,null),h(r,s),ee(i,r,null),h(r,l);for(let e=0;e<u.length;e+=1)u[e].m(r,null);c=!0},p(e,t){const n={};16&t[0]&&(n.user=e[7](e[4].username)),o.$set(n);const s={};if(4&t[0]&&(s.user=e[2].users.find(e[13])),i.$set(s),132&t[0]){const n=e[2].guesses.filter(e[14]);J(),u=R(u,t,d,1,e,n,a,r,Q,Qe,null,Ne),K()}},i(e){if(!c){V(o.$$.fragment,e),V(i.$$.fragment,e);for(let e=0;e<p.length;e+=1)V(u[e]);c=!0}},o(e){X(o.$$.fragment,e),X(i.$$.fragment,e);for(let e=0;e<u.length;e+=1)X(u[e]);c=!1},d(e){e&&v(t),e&&v(n),e&&v(r),te(o),te(i);for(let e=0;e<u.length;e+=1)u[e].d()}}}function Qe(e,t){let n,r,o;return r=new le({props:{user:t[7](t[25].guesser_username)}}),{key:e,first:null,c(){n=x(),Z(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ee(r,e,t),o=!0},p(e,t){const n={};4&t[0]&&(n.user=e[7](e[25].guesser_username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){X(r.$$.fragment,e),o=!1},d(e){e&&v(n),te(r,e)}}}function Re(e){let t,n,r,o,s,i,l;function c(e,t){return"guess"===e[2].phase?Te:"vote"===e[2].phase?Se:"lol vote"===e[2].phase?Oe:"leaderboard"===e[2].phase?Me:Le}let u=c(e),a=u(e);n=new ke({props:{lines:e[4].lines,editable:!1}});const p=[Ie,Ge,qe,We],d=[];function f(e,t){return"guess"===e[2].phase?0:"vote"===e[2].phase?1:"lol vote"===e[2].phase?2:"leaderboard"===e[2].phase?3:-1}return~(o=f(e))&&(s=d[o]=p[o](e)),{c(){a.c(),t=y(),Z(n.$$.fragment),r=y(),s&&s.c(),i=x()},m(e,s){a.m(e,s),g(e,t,s),ee(n,e,s),g(e,r,s),~o&&d[o].m(e,s),g(e,i,s),l=!0},p(e,r){u===(u=c(e))&&a?a.p(e,r):(a.d(1),a=u(e),a&&(a.c(),a.m(t.parentNode,t)));const l={};16&r[0]&&(l.lines=e[4].lines),n.$set(l);let m=o;o=f(e),o===m?~o&&d[o].p(e,r):(s&&(J(),X(d[m],1,1,()=>{d[m]=null}),K()),~o?(s=d[o],s||(s=d[o]=p[o](e),s.c()),V(s,1),s.m(i.parentNode,i)):s=null)},i(e){l||(V(n.$$.fragment,e),V(s),l=!0)},o(e){X(n.$$.fragment,e),X(s),l=!1},d(e){a.d(e),e&&v(t),te(n,e),e&&v(r),~o&&d[o].d(e),e&&v(i)}}}function Ze(e,t,n){let r,o;u(e,ae,e=>n(2,r=e)),u(e,pe,e=>n(3,o=e));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function l(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};function i(e){const t=r.users.find(t=>t.username===e);if(t)return t;throw Error("User "+e+" not found")}let l="",c="";function a(){return s(this,void 0,void 0,(function*(){try{yield he.sendGuess({guessed_prompt:l,real_prompt:r.current_prompt,guesser_username:o})}catch(e){return void alert(e)}n(0,l="")}))}function p(e){return s(this,void 0,void 0,(function*(){try{yield he.sendLOL({real_prompt:r.current_prompt,voted_prompt:e,voter_username:o})}catch(e){return void alert(e)}}))}let d,f,m,h;return e.$$.update=()=>{8&e.$$.dirty[0]&&n(23,d=i(o)),4&e.$$.dirty[0]&&n(4,f=r.drawings.find(e=>e.prompt===r.current_prompt)||{lines:[],username:"",prompt:""}),8388620&e.$$.dirty[0]&&n(5,m=r.guesses.some(e=>e.guesser_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==d.proposed_prompt||r.current_prompt==d.assigned_prompt),8388620&e.$$.dirty[0]&&n(6,h=r.votes.some(e=>e.voter_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==d.proposed_prompt||r.current_prompt==d.assigned_prompt)},[l,c,r,o,f,m,h,i,a,function(){return s(this,void 0,void 0,(function*(){try{yield he.sendVote({real_prompt:r.current_prompt,voted_prompt:c,voter_username:o})}catch(e){return void alert(e)}n(1,c="")}))},p,function(){const e=r.guesses.filter(e=>e.real_prompt===r.current_prompt&&e.guesser_username!==o).map(e=>e.guessed_prompt);return r.current_prompt!==d.proposed_prompt&&e.push(r.current_prompt),e.sort(),e},function(){const e=[...r.users];return e.sort((e,t)=>t.score+t.lol_score-e.score-e.lol_score),e},e=>e.proposed_prompt===r.current_prompt,e=>e.real_prompt===r.current_prompt,function(){l=this.value,n(0,l)},async e=>{"Enter"===e.code&&await a()},e=>e.proposed_prompt===r.current_prompt,e=>e.real_prompt===r.current_prompt,function(){c=this.__value,n(1,c)},[[]],(e,t)=>t.voter_username===o&&t.real_prompt===r.current_prompt&&t.voted_prompt===e,async e=>await p(e)]}class et extends oe{constructor(e){super(),re(this,e,Ze,Re,c,{},[-1,-1])}}function tt(e){return"[object Date]"===Object.prototype.toString.call(e)}function nt(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((t,n)=>nt(e[n],t));return e=>n.map(t=>t(e))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(tt(e)&&tt(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach(n=>{r[n]=nt(e[n],t[n])}),e=>{const t={};return n.forEach(n=>{t[n]=r[n](e)}),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function rt(e,t={}){const o=ue(e);let s,i=e;function l(l,c){if(null==e)return o.set(e=l),Promise.resolve();i=l;let u=s,a=!1,{delay:h=0,duration:g=400,easing:v=n,interpolate:$=nt}=r(r({},t),c);if(0===g)return u&&(u.abort(),u=null),o.set(e=i),Promise.resolve();const w=p()+h;let _;return s=function(e){let t;return 0===f.size&&d(m),{promise:new Promise(n=>{f.add(t={c:e,f:n})}),abort(){f.delete(t)}}}(t=>{if(t<w)return!0;a||(_=$(e,l),"function"==typeof g&&(g=g(e,l)),a=!0),u&&(u.abort(),u=null);const n=t-w;return n>g?(o.set(e=l),!1):(o.set(e=_(v(n/g))),!0)}),s.promise}return{set:l,update:(t,n)=>l(t(i,e),n),subscribe:o.subscribe}}function ot(e){let t,n,r,o;return{c(){t=w("h1"),n=k(e[1]),r=y(),o=w("progress"),C(t,"class","has-text-centered svelte-1nyik79"),C(o,"class","progress margin-bottom svelte-1nyik79"),o.value=e[2],N(o,"is-success",e[2]<.5),N(o,"is-warning",e[2]>=.5&&e[2]<.8),N(o,"is-danger",e[2]>=.8)},m(e,s){g(e,t,s),h(t,n),g(e,r,s),g(e,o,s)},p(e,t){2&t&&P(n,e[1]),4&t&&(o.value=e[2]),4&t&&N(o,"is-success",e[2]<.5),4&t&&N(o,"is-warning",e[2]>=.5&&e[2]<.8),4&t&&N(o,"is-danger",e[2]>=.8)},d(e){e&&v(t),e&&v(r),e&&v(o)}}}function st(e){let n,r=["draw","guess","vote","lol vote","leaderboard"].includes(e[0]),o=r&&ot(e);return{c(){o&&o.c(),n=x()},m(e,t){o&&o.m(e,t),g(e,n,t)},p(e,[t]){1&t&&(r=["draw","guess","vote","lol vote","leaderboard"].includes(e[0])),r?o?o.p(e,t):(o=ot(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(e){o&&o.d(e),e&&v(n)}}}function it(e,t,n){let r,o,s;u(e,ae,e=>n(6,r=e)),u(e,pe,e=>n(10,o=e));let i="login",l=0;const c=rt(0);function a(e,t="",r=(()=>!1)){n(4,l=e),console.log("TOT TIME IS",l),c.set(0,{duration:l?100:1e3}).then(()=>c.set(1,{duration:1e3*l})).then(()=>r()?alert(t):null)}function p(){return!r.drawings.some(e=>e.username===o)}function d(){return!(r.guesses.some(e=>e.guesser_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==w||r.current_prompt==$)}function f(){return!(r.votes.some(e=>e.voter_username===o&&e.real_prompt===r.current_prompt)||r.current_prompt==w||r.current_prompt==$)}let m,h,g,v,$,w,_;return u(e,c,e=>n(2,s=e)),ae.subscribe(e=>{i!==e.phase&&("draw"===e.phase?a(181,"Please send your drawing!",p):"guess"===e.phase?a(60,"Please send your guess!",d):"vote"===e.phase?a(m,"Please send your vote!",f):"lol vote"===e.phase?a(h):"leaderboard"===e.phase&&"leaderboard"!==i&&a(g),n(0,i=e.phase))}),e.$$.update=()=>{64&e.$$.dirty&&(m=4*r.users.length),64&e.$$.dirty&&(h=3*r.users.length),64&e.$$.dirty&&(g=2*r.users.length),1088&e.$$.dirty&&n(9,v=r.users.find(e=>e.username===o)),512&e.$$.dirty&&($=v?v.assigned_prompt:""),512&e.$$.dirty&&(w=v?v.proposed_prompt:""),20&e.$$.dirty&&n(1,_=Math.floor((1-s)*l))},[i,_,s,c]}class lt extends oe{constructor(e){super(),re(this,e,it,st,c,{})}}function ct(e,t,n){const r=e.slice();return r[13]=t[n],r}function ut(e,t,n){const r=e.slice();return r[10]=t[n],r}function at(e){let n,r,o,s=e[2].phase+"";return{c(){n=w("h1"),r=k("UNKNOWN STATE AAAA!!!! "),o=k(s),C(n,"class","has-text-centered")},m(e,t){g(e,n,t),h(n,r),h(n,o)},p(e,t){4&t&&s!==(s=e[2].phase+"")&&P(o,s)},i:t,o:t,d(e){e&&v(n)}}}function pt(e){let n;return{c(){n=w("h1"),n.textContent="THE END!",C(n,"class","has-text-centered")},m(e,t){g(e,n,t)},p:t,i:t,o:t,d(e){e&&v(n)}}}function dt(e){let t,n;return t=new et({props:{}}),e[8](t),{c(){Z(t.$$.fragment)},m(e,r){ee(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(n){e[8](null),te(t,n)}}}function ft(e){let t,n,r,o,s;const i=[gt,ht],l=[];function c(e,n){return 12&n&&(t=!!e[2].drawings.some(e[7])),t?0:1}return n=c(e,-1),r=l[n]=i[n](e),{c(){r.c(),o=x()},m(e,t){l[n].m(e,t),g(e,o,t),s=!0},p(e,t){let s=n;n=c(e,t),n===s?l[n].p(e,t):(J(),X(l[s],1,1,()=>{l[s]=null}),K(),r=l[n],r||(r=l[n]=i[n](e),r.c()),V(r,1),r.m(o.parentNode,o))},i(e){s||(V(r),s=!0)},o(e){X(r),s=!1},d(e){l[n].d(e),e&&v(o)}}}function mt(e){let t,n,r,o;const s=[wt,$t],i=[];function l(e,t){return""===e[3]?0:1}return t=l(e),n=i[t]=s[t](e),{c(){n.c(),r=x()},m(e,n){i[t].m(e,n),g(e,r,n),o=!0},p(e,o){let c=t;t=l(e),t===c?i[t].p(e,o):(J(),X(i[c],1,1,()=>{i[c]=null}),K(),n=i[t],n||(n=i[t]=s[t](e),n.c()),V(n,1),n.m(r.parentNode,r))},i(e){o||(V(n),o=!0)},o(e){X(n),o=!1},d(e){i[t].d(e),e&&v(r)}}}function ht(e){let n,r,o,s;return o=new be({}),{c(){n=w("h1"),n.textContent="Let's draw!",r=y(),Z(o.$$.fragment),C(n,"class","has-text-centered")},m(e,t){g(e,n,t),g(e,r,t),ee(o,e,t),s=!0},p:t,i(e){s||(V(o.$$.fragment,e),s=!0)},o(e){X(o.$$.fragment,e),s=!1},d(e){e&&v(n),e&&v(r),te(o,e)}}}function gt(e){let t,n,r,o,s=[],i=new Map,l=e[2].drawings;const c=e=>e[13].username;for(let t=0;t<l.length;t+=1){let n=ct(e,l,t),r=c(n);i.set(r,s[t]=vt(r,n))}return{c(){t=w("h1"),t.textContent="Waiting for other players to finish drawing, got:",n=y(),r=w("div");for(let e=0;e<s.length;e+=1)s[e].c();C(t,"class","has-text-centered"),C(r,"class","centered-flex")},m(e,i){g(e,t,i),g(e,n,i),g(e,r,i);for(let e=0;e<s.length;e+=1)s[e].m(r,null);o=!0},p(e,t){if(20&t){const n=e[2].drawings;J(),s=R(s,t,c,1,e,n,i,r,Q,vt,null,ct),K()}},i(e){if(!o){for(let e=0;e<l.length;e+=1)V(s[e]);o=!0}},o(e){for(let e=0;e<s.length;e+=1)X(s[e]);o=!1},d(e){e&&v(t),e&&v(n),e&&v(r);for(let e=0;e<s.length;e+=1)s[e].d()}}}function vt(e,t){let n,r,o;return r=new le({props:{user:t[4](t[13].username)}}),{key:e,first:null,c(){n=x(),Z(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ee(r,e,t),o=!0},p(e,t){const n={};4&t&&(n.user=e[4](e[13].username)),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){X(r.$$.fragment,e),o=!1},d(e){e&&v(n),te(r,e)}}}function $t(e){let t,n,r,o,s,i,l,c,u,a,p=[],d=new Map,f=e[1];const m=e=>e[10].username;for(let t=0;t<f.length;t+=1){let n=ut(e,f,t),r=m(n);d.set(r,p[t]=_t(r,n))}return{c(){t=w("h1"),t.textContent="Waiting for other players",n=y(),r=w("div");for(let e=0;e<p.length;e+=1)p[e].c();o=y(),s=w("button"),i=k("Everybody in!"),C(t,"class","has-text-centered"),C(r,"class","centered-flex"),C(s,"class","button centered-flex"),s.disabled=l=e[1].length<4},m(l,d){g(l,t,d),g(l,n,d),g(l,r,d);for(let e=0;e<p.length;e+=1)p[e].m(r,null);g(l,o,d),g(l,s,d),h(s,i),c=!0,u||(a=b(s,"click",e[6]),u=!0)},p(e,t){if(2&t){const n=e[1];J(),p=R(p,t,m,1,e,n,d,r,Q,_t,null,ut),K()}(!c||2&t&&l!==(l=e[1].length<4))&&(s.disabled=l)},i(e){if(!c){for(let e=0;e<f.length;e+=1)V(p[e]);c=!0}},o(e){for(let e=0;e<p.length;e+=1)X(p[e]);c=!1},d(e){e&&v(t),e&&v(n),e&&v(r);for(let e=0;e<p.length;e+=1)p[e].d();e&&v(o),e&&v(s),u=!1,a()}}}function wt(e){let n,r;return n=new me({}),n.$on("login",e[5]),{c(){Z(n.$$.fragment)},m(e,t){ee(n,e,t),r=!0},p:t,i(e){r||(V(n.$$.fragment,e),r=!0)},o(e){X(n.$$.fragment,e),r=!1},d(e){te(n,e)}}}function _t(e,t){let n,r,o;return r=new le({props:{user:t[10]}}),{key:e,first:null,c(){n=x(),Z(r.$$.fragment),this.first=n},m(e,t){g(e,n,t),ee(r,e,t),o=!0},p(e,t){const n={};2&t&&(n.user=e[10]),r.$set(n)},i(e){o||(V(r.$$.fragment,e),o=!0)},o(e){X(r.$$.fragment,e),o=!1},d(e){e&&v(n),te(r,e)}}}function kt(e){let t,n,r,o,s,i;const l=[mt,ft,dt,pt,at],c=[];function u(e,t){return"login"===e[2].phase?0:"draw"===e[2].phase?1:"guess"===e[2].phase||"vote"===e[2].phase||"lol vote"===e[2].phase||"leaderboard"===e[2].phase?2:"end"===e[2].phase?3:4}return n=u(e),r=c[n]=l[n](e),s=new lt({}),{c(){t=w("div"),r.c(),o=y(),Z(s.$$.fragment),C(t,"class","container svelte-l24f7x")},m(e,r){g(e,t,r),c[n].m(t,null),h(t,o),ee(s,t,null),i=!0},p(e,[s]){let i=n;n=u(e),n===i?c[n].p(e,s):(J(),X(c[i],1,1,()=>{c[i]=null}),K(),r=c[n],r||(r=c[n]=l[n](e),r.c()),V(r,1),r.m(t,o))},i(e){i||(V(r),V(s.$$.fragment,e),i=!0)},o(e){X(r),X(s.$$.fragment,e),i=!1},d(e){e&&v(t),c[n].d(),te(s)}}}function yt(e,t,n){let r,o;u(e,ae,e=>n(2,r=e)),u(e,pe,e=>n(3,o=e));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function l(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};let i;let l;return e.$$.update=()=>{4&e.$$.dirty&&n(1,l=[...r.users])},[i,l,r,o,function(e){for(let t of l)if(t.username===e)return t;throw Error("User "+e+" not found")},function(e){return s(this,void 0,void 0,(function*(){const t=e.detail.username,n=e.detail.img_src,r=e.detail.prompt.toUpperCase().trim();try{yield he.login(t,n,r)}catch(e){return void alert(e)}pe.set(t),console.log("Logged in: ",e.detail);let o=document.getElementById("telegram-login-minnybot");(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o)}))},function(){return s(this,void 0,void 0,(function*(){try{yield he.startGame()}catch(e){alert(e)}}))},e=>e.username===o,function(e){j[e?"unshift":"push"](()=>{i=e,n(0,i)})}]}return new class extends oe{constructor(e){super(),re(this,e,yt,kt,c,{})}}({target:document.body,props:{}})}(io);
//# sourceMappingURL=bundle.js.map
